


ARM Macro Assembler    Page 1 


    1 00000000         
    2 00000000                 INCLUDE          equates.h
    1 00000000         
    2 00000000         
    3 00000000         
    4 00000000         ;//NES_RAM   EQU 0x20008000 ;//±£³Ö1024×Ö½Ú6502¹·Êº¶Ñ¶ÔÆ
                       ë 
    5 00000000         
    6 00000000         
    7 00000000        A 
                       globalptr
                               RN               r10         ;=wram_globals* ptr
                                                            
    8 00000000         ;//cpu_zpage RN r11 ;=CPU_RAM
    9 00000000         ;-------------------------------------------------------
                       ---------------------
   10 00000000         
   11 00000000         
   12 00000000         ;//everything in wram_globals* areas:
   13 00000000                 MAP              0,globalptr ;6502.s   ;//MAP ÓÃ
                                                            ÓÚ¶¨ÒåÒ»¸ö½á¹¹»¯µÄÄ
                                                            Ú´æ±íµÄÊ×µØÖ·
   14 00000000         ;//¶¨ÒåÄÚ´æ±íµÄÊ×µØÖ·Îªglobalptr
   15 00000000 00000000 
                       opz     #                256*4       ;//´úÂë±íÕ¼ÓÃ256*4
   16 00000000 00000400 
                       readmem_tbl
                               #                8*4         ;//8*4
   17 00000000 00000420 
                       writemem_tbl
                               #                8*4         ;//8*4
   18 00000000 00000440 
                       memmap_tbl
                               #                8*4         ;//´æ´¢Æ÷Ó³Ïó ram+r
                                                            om
   19 00000000 00000460 
                       cpuregs #                7*4         ;//1208´æ·Å6502¼Ä´æ
                                                            Æ÷±£´æµÄ¿ªÊ¼µØÖ·
   20 00000000 0000047C 
                       m6502_s #                4           ;//
   21 00000000 00000480 
                       lastbank
                               #                4           ;//6502PC´Ó ROMµÄ×î
                                                            ºóÆ«ÒÆÁ¿
   22 00000000 00000484 
                       nexttimeout
                               #                4
   23 00000000         
   24 00000000 00000488 
                       rombase #                4           ;//ROM¿ªÊ¼µØÖ·
   25 00000000 0000048C 
                       romnumber
                               #                4           ;// ROM´óÐ¡  40976 
                                                            ×Ö½Ú
   26 00000000 00000490 
                       rommask #                4           ;//ROMÑÚÄ¤ rommask=
                                                            romsize-1
   27 00000000         
   28 00000000 00000494 



ARM Macro Assembler    Page 2 


                       joy0serial
                               #                4           ;//´®ÐÐÊý¾Ý
   29 00000000         ;// # 2 ;align      ;//×Ü¹²1360/////////////////////////
                       
   30 00000000         
   31 00000000                 END
    3 00000000                 INCLUDE          6502mac.h
    1 00000000         
    2 00000000 00000001 
                       C       EQU              0x01        ;//6502 flags  6502
                                                            ±êÖ¾
    3 00000000 00000002 
                       Z       EQU              0x02
    4 00000000 00000004 
                       I       EQU              0x04
    5 00000000 00000008 
                       D       EQU              0x08
    6 00000000 00000010 
                       B       EQU              0x10        ;//(allways 1 excep
                                                            t when IRQ pushes i
                                                            t)IRQÍâ²¿ÖÐ¶Ï
    7 00000000 00000020 
                       R       EQU              0x20        ;//(locked at 1)
    8 00000000 00000040 
                       V       EQU              0x40
    9 00000000 00000080 
                       N       EQU              0x80
   10 00000000         
   11 00000000         
   12 00000000         
   13 00000000                 MACRO                        ;//translate from 6
                                                            502 PC to rom offse
                                                            t·­Òë´Ó6502 PC ROMµ
                                                            ÄÆ«ÒÆÁ¿
   14 00000000                 encodePC
   15 00000000                 and              r1,m6502_pc,#0xE000 ;//r9ºÍ0xe0
                                                            00°´Î»ÓëÔËËã
   16 00000000                 adr              r2,memmap_tbl ;//°Ñ´æ´¢Æ÷Ó³ÏóµØ
                                                            Ö·¼ÓÔØµ½r2
   17 00000000         ;// ldr r0,[r2,r1,lsr#11]    ;//¸Ä¹ý£¬¼Ó2ÐÐ 
   18 00000000                 lsr              r0,r1,#11   ;//>>11Î»   r1/2048
                                                            
   19 00000000                 ldr              r0,[r2,r0]  ;//¶ÁÈ¡r2µØÖ·+r1Æ«Ò
                                                            ÆµÄÊý¾Ýµ½r0
   20 00000000         
   21 00000000         
   22 00000000                 str              r0,lastbank ;//±£´æ6502PC´Ó ROM
                                                            µÄ×îºóÆ«ÒÆÁ¿ 
   23 00000000                 add              m6502_pc,m6502_pc,r0 
                                                            ;//m6502_pc+r0
   24 00000000                 MEND
   25 00000000         
   26 00000000                 MACRO                        ;//pack 6502 flags 
                                                            into r0   6502±êÖ¾°
                                                            ü×°µ½R0
   27 00000000                 encodeP          $extra
   28 00000000                 and              r0,cycles,#CYC_V+CYC_D+CYC_I+CY
C_C
   29 00000000                 tst              m6502_nz,#0x80000000 ;//PSR_N



ARM Macro Assembler    Page 3 


   30 00000000                 orrne            r0,r0,#N    ;N
   31 00000000                 tst              m6502_nz,#0xff
   32 00000000                 orreq            r0,r0,#Z    ;Z
   33 00000000                 orr              r0,r0,#$extra ;R(&B)
   34 00000000                 MEND
   35 00000000         
   36 00000000                 MACRO                        ;//;ºê¶¨Òå//unpack 
                                                            6502 flags from r0 
                                                              ½âÑ¹Ëõ6502´ÓR0µÄ±
                                                            êÖ¾
   37 00000000                 decodeP
   38 00000000                 bic              cycles,cycles,#CYC_V+CYC_D+CYC_
I+CYC_C
   39 00000000                 and              r1,r0,#V+D+I+C
   40 00000000                 orr              cycles,cycles,r1 ;//VDIC
   41 00000000                 bic              m6502_nz,r0,#0xFD 
                                                            ;//r0 is signed
   42 00000000                 eor              m6502_nz,m6502_nz,#Z
   43 00000000                 MEND                         ;//    ;ºê¶¨Òå½áÊø
   44 00000000         
   45 00000000                 MACRO
   46 00000000                 fetch            $count      ;//ÌáÈ¡²Ù×÷Âë ;$±êº
                                                            Å ºêÃû $²ÎÊý1£¬$²ÎÊ
                                                            ý2£¬...
   47 00000000                 subs             cycles,cycles,#$count*256 ;//CY
                                                            CLE=256 ;// 3*256 Õ
                                                            ýÊý»ò0¾ÍÖ´ÐÐÏÂ2ÌõÖ¸
                                                            Áî  
   48 00000000         ;// subs cycles,cycles,#$count  ;//   r8=r8-#$count
   49 00000000                 ldrplb           r0,[m6502_pc],#1 ; //´Ó´æ´¢Æ÷ÖÐ
                                                            ¼ÓÔØ×Ö½Úµ½Ò»¸ö¼Ä´æÆ
                                                            ÷ÖÐ  r0=²Ù×÷Âë
   50 00000000                 ldrpl            pc,[m6502_optbl,r0,lsl#2] ;//r1
                                                            0 ********r0=r0x4**
                                                            *ÔËÐÐ´úÂëµÄµØÖ·****
                                                            *******************
                                                            ***************
   51 00000000                 ldr              pc,nexttimeout
   52 00000000                 MEND
   53 00000000         
   54 00000000                 MACRO                        ;//ÏàÍ¬µÄÌáÈ¡£¬µ«Ëü
                                                            Ôö¼ÓÁË½øÎ»£¨Î»0£©
   55 00000000                 fetch_c          $count      ;//same as fetch ex
                                                            cept it adds the Ca
                                                            rry (bit 0) also.
   56 00000000                 sbcs             cycles,cycles,#$count*256 
                                                            ;//CYCLE=256
   57 00000000                 ldrplb           r0,[m6502_pc],#1
   58 00000000                 ldrpl            pc,[m6502_optbl,r0,lsl#2]
   59 00000000                 ldr              pc,nexttimeout
   60 00000000                 MEND
   61 00000000         
   62 00000000                 MACRO
   63 00000000                 clearcycles
   64 00000000                 and              cycles,cycles,#CYC_MASK 
                                                            ;Save CPU bits
   65 00000000                 MEND
   66 00000000         
   67 00000000                 MACRO



ARM Macro Assembler    Page 4 


   68 00000000                 readmemabs
   69 00000000                 and              r1,addy,#0xE000
   70 00000000                 adr              lr,%F0
   71 00000000         ;// ldr pc,[m6502_rmem,r1,lsr#11] ;//in: addy,r1=addy&0x
                       E000 (for rom_R)
   72 00000000                 lsr              r1,r1,#11   ;//¸Ä¹ý£¬¼Ó2ÐÐ  >>1
                                                            1
   73 00000000                 ldr              pc,[m6502_rmem,r1]
   74 00000000         
   75 00000000         0                                    ;//out: r0=val (bit
                                                            s 8-31=0 (LSR,ROR,I
                                                            NC,DEC,ASL)), addy 
                                                            preserved for RMW i
                                                            nstructions
   76 00000000                 MEND
   77 00000000         
   78 00000000                 MACRO
   79 00000000                 readmemzp
   80 00000000                 ldrb             r0,[cpu_zpage,addy]
   81 00000000                 MEND
   82 00000000         
   83 00000000                 MACRO
   84 00000000                 readmemzpi
   85 00000000         ;// ldrb r0,[cpu_zpage,addy,lsr#24]
   86 00000000                 lsr              r0,addy,#24 ;//¸Ä¹ý£¬¼Ó3ÐÐ
   87 00000000                 ldrb             r0,[cpu_zpage,r0]
   88 00000000         
   89 00000000                 MEND
   90 00000000         
   91 00000000                 MACRO
   92 00000000                 readmemzps
   93 00000000                 ldrsb            m6502_nz,[cpu_zpage,addy]
   94 00000000                 MEND
   95 00000000         
   96 00000000                 MACRO
   97 00000000                 readmemimm
   98 00000000                 ldrb             r0,[m6502_pc],#1
   99 00000000                 MEND
  100 00000000         
  101 00000000                 MACRO
  102 00000000                 readmemimms
  103 00000000                 ldrsb            m6502_nz,[m6502_pc],#1
  104 00000000                 MEND
  105 00000000         
  106 00000000                 MACRO
  107 00000000                 readmem
  108 00000000                 [                _type = _ABS
  109 00000000                 readmemabs
  110 00000000                 ]
  111 00000000                 [                _type = _ZP
  112 00000000                 readmemzp
  113 00000000                 ]
  114 00000000                 [                _type = _ZPI
  115 00000000                 readmemzpi
  116 00000000                 ]
  117 00000000                 [                _type = _IMM
  118 00000000                 readmemimm
  119 00000000                 ]
  120 00000000                 MEND



ARM Macro Assembler    Page 5 


  121 00000000         
  122 00000000                 MACRO
  123 00000000                 readmems
  124 00000000                 [                _type = _ABS
  125 00000000                 readmemabs
  126 00000000                 orr              m6502_nz,r0,r0,lsl#24
  127 00000000                 ]
  128 00000000                 [                _type = _ZP
  129 00000000                 readmemzps
  130 00000000                 ]
  131 00000000                 [                _type = _IMM
  132 00000000                 readmemimms
  133 00000000                 ]
  134 00000000                 MEND
  135 00000000         
  136 00000000         
  137 00000000                 MACRO
  138 00000000                 writememabs
  139 00000000                 and              r1,addy,#0xe000
  140 00000000                 adr              r2,writemem_tbl
  141 00000000                 adr              lr,%F0
  142 00000000         ;// ldr pc,[r2,r1,lsr#11] ;//in: addy,r0=val(bits 8-31=?
                       )
  143 00000000                 lsr              r1,r1,#11   ;//¸Ä¹ý£¬¼Ó2ÐÐ >>11
                                                            
  144 00000000                 ldr              pc,[r2,r1]
  145 00000000         
  146 00000000         0                                    ;out: r0,r1,r2,addy
                                                            =?
  147 00000000                 MEND
  148 00000000         
  149 00000000                 MACRO
  150 00000000                 writememzp
  151 00000000                 strb             r0,[cpu_zpage,addy]
  152 00000000                 MEND
  153 00000000         
  154 00000000                 MACRO
  155 00000000                 writememzpi
  156 00000000         ;// strb r0,[cpu_zpage,addy,lsr#24]
  157 00000000                 lsr              r1,addy,#24 ;//¸Ä¹ý£¬¼Ó2ÐÐ  >>2
                                                            4
  158 00000000                 strb             r0,[cpu_zpage,r1]
  159 00000000         
  160 00000000         
  161 00000000                 MEND
  162 00000000         
  163 00000000                 MACRO
  164 00000000                 writemem                     ;//Ð´ÄÚ´æ
  165 00000000                 [                _type = _ABS
  166 00000000                 writememabs
  167 00000000                 ]
  168 00000000                 [                _type = _ZP
  169 00000000                 writememzp
  170 00000000                 ]
  171 00000000                 [                _type = _ZPI
  172 00000000                 writememzpi
  173 00000000                 ]
  174 00000000                 MEND
  175 00000000         ;-------------------------------------------------------



ARM Macro Assembler    Page 6 


                       ---------------------
  176 00000000         
  177 00000000                 MACRO                        ;//////////////////
                                                            /////////////// ///
                                                            //////////////////
  178 00000000                 push16                       ;push r0
  179 00000000                 mov              r1,r0,lsr#8
  180 00000000                 ldr              r2,m6502_s
  181 00000000                 strb             r1,[r2],#-1
  182 00000000                 orr              r2,r2,#0x100
  183 00000000                 strb             r0,[r2],#-1
  184 00000000                 strb             r2,m6502_s
  185 00000000                 MEND                         ;r1,r2=?
  186 00000000         
  187 00000000                 MACRO
  188 00000000                 push8            $x
  189 00000000                 ldr              r2,m6502_s
  190 00000000                 strb             $x,[r2],#-1
  191 00000000                 strb             r2,m6502_s
  192 00000000                 MEND                         ;r2=?
  193 00000000         
  194 00000000                 MACRO
  195 00000000                 pop16                        ;pop m6502_pc
  196 00000000                 ldrb             r2,m6502_s
  197 00000000                 add              r2,r2,#2
  198 00000000                 strb             r2,m6502_s
  199 00000000                 ldr              r2,m6502_s
  200 00000000                 ldrb             r0,[r2],#-1
  201 00000000                 orr              r2,r2,#0x100
  202 00000000                 ldrb             m6502_pc,[r2]
  203 00000000                 orr              m6502_pc,m6502_pc,r0,lsl#8
  204 00000000                 MEND                         ;r0,r1=?
  205 00000000         
  206 00000000                 MACRO
  207 00000000                 pop8             $x
  208 00000000                 ldrb             r2,m6502_s
  209 00000000                 add              r2,r2,#1
  210 00000000                 strb             r2,m6502_s
  211 00000000                 orr              r2,r2,#0x100
  212 00000000                 ldrsb            $x,[cpu_zpage,r2] ;signed for P
                                                            LA & PLP
  213 00000000         
  214 00000000                 MEND                         ;r2=?
  215 00000000         
  216 00000000         ;-------------------------------------------------------
                       ---------------------
  217 00000000         ;doXXX: load addy, increment m6502_pc
  218 00000000         
  219 00000000                 GBLA             _type
  220 00000000         
  221 00000000 00000001 
                       _IMM    EQU              1           ;immediate
  222 00000000 00000002 
                       _ZP     EQU              2           ;zero page
  223 00000000 00000003 
                       _ZPI    EQU              3           ;zero page indexed
  224 00000000 00000004 
                       _ABS    EQU              4           ;absolute
  225 00000000         



ARM Macro Assembler    Page 7 


  226 00000000                 MACRO
  227 00000000                 doABS                        ;absolute          
                                                                 $nnnn
  228 00000000         _type   SETA             _ABS
  229 00000000                 ldrb             addy,[m6502_pc],#1
  230 00000000                 ldrb             r0,[m6502_pc],#1
  231 00000000                 orr              addy,addy,r0,lsl#8
  232 00000000                 MEND
  233 00000000         
  234 00000000                 MACRO
  235 00000000                 doAIX                        ;absolute indexed X
                                                                 $nnnn,X
  236 00000000         _type   SETA             _ABS
  237 00000000                 ldrb             addy,[m6502_pc],#1
  238 00000000                 ldrb             r0,[m6502_pc],#1
  239 00000000                 orr              addy,addy,r0,lsl#8
  240 00000000                 add              addy,addy,m6502_x,lsr#24
  241 00000000         ; bic addy,addy,#0xff0000 ;Base Wars needs this
  242 00000000                 MEND
  243 00000000         
  244 00000000                 MACRO
  245 00000000                 doAIY                        ;absolute indexed Y
                                                                 $nnnn,Y
  246 00000000         _type   SETA             _ABS
  247 00000000                 ldrb             addy,[m6502_pc],#1
  248 00000000                 ldrb             r0,[m6502_pc],#1
  249 00000000                 orr              addy,addy,r0,lsl#8
  250 00000000                 add              addy,addy,m6502_y,lsr#24
  251 00000000         ; bic addy,addy,#0xff0000 ;Tecmo Bowl needs this
  252 00000000                 MEND
  253 00000000         
  254 00000000                 MACRO
  255 00000000                 doIMM                        ;immediate         
                                                                 #$nn
  256 00000000         _type   SETA             _IMM
  257 00000000                 MEND
  258 00000000         
  259 00000000                 MACRO
  260 00000000                 doIIX                        ;indexed indirect X
                                                                 ($nn,X)
  261 00000000         _type   SETA             _ABS
  262 00000000                 ldrb             r0,[m6502_pc],#1
  263 00000000                 add              r0,m6502_x,r0,lsl#24
  264 00000000         ;//ldrb addy,[cpu_zpage,r0,lsr#24] ;//´íÎó:Ö¸¶¨µÄ×ª±ä²»Ô
                       ÊÐí
  265 00000000                 lsr              addy,r0,#24 ;//¸Ä¹ý£¬¼Ó2ÐÐ >>24
                                                            
  266 00000000                 ldrb             addy,[cpu_zpage,addy]
  267 00000000         
  268 00000000                 add              r0,r0,#0x01000000
  269 00000000         ;//ldrb r1,[cpu_zpage,r0,lsr#24] ;//R1,LSR#2;½«R1ÖÐµÄÄÚÈ
                       ÝÓÒÒÆ2Î»
  270 00000000                 lsr              r1,r0,#24   ;//¸Ä¹ý£¬¼Ó2ÐÐ
  271 00000000                 ldrb             r1,[cpu_zpage,r1]
  272 00000000         
  273 00000000                 orr              addy,addy,r1,lsl#8
  274 00000000                 MEND
  275 00000000         
  276 00000000                 MACRO



ARM Macro Assembler    Page 8 


  277 00000000                 doIIY                        ;indirect indexed Y
                                                                 ($nn),Y
  278 00000000         _type   SETA             _ABS
  279 00000000                 ldrb             r0,[m6502_pc],#1
  280 00000000         ;// ldrb addy,[r0,cpu_zpage]! ;;ÔÚÊý¾Ý´«ËÍÖ®Ç°,½«Æ«ÒÆÁ¿¼
                       Óµ½Rn ÖÐ,Æä½á¹û×÷Îª´«ËÍÊý¾ÝµÄ´æ´¢µØÖ·
  281 00000000         ;//ÈôÊ¹ÓÃºó×º"!",Ôò½á¹ûÐ´»Øµ½RnÖÐ
  282 00000000                 ldrb             addy,[r0,cpu_zpage]
  283 00000000                 add              r0,r0,cpu_zpage ;//////////////
                                                            ///////////////////
                                                            /////
  284 00000000         
  285 00000000         
  286 00000000                 ldrb             r1,[r0,#1]
  287 00000000                 orr              addy,addy,r1,lsl#8
  288 00000000                 add              addy,addy,m6502_y,lsr#24
  289 00000000         ; bic addy,addy,#0xff0000 ;Zelda2 needs this
  290 00000000                 MEND
  291 00000000         
  292 00000000                 MACRO
  293 00000000                 doZPI                        ;Zeropage indirect 
                                                                ($nn)
  294 00000000         _type   SETA             _ABS
  295 00000000                 ldrb             r0,[m6502_pc],#1
  296 00000000         ;// ldrb addy,[r0,cpu_zpage]!;;ÔÚÊý¾Ý´«ËÍÖ®Ç°,½«Æ«ÒÆÁ¿¼Ó
                       µ½Rn ÖÐ,Æä½á¹û×÷Îª´«ËÍÊý¾ÝµÄ´æ´¢µØÖ·
  297 00000000         ;//ÈôÊ¹ÓÃºó×º"!",Ôò½á¹ûÐ´»Øµ½RnÖÐ
  298 00000000                 ldrb             addy,[r0,cpu_zpage]
  299 00000000                 add              r0,r0,cpu_zpage
  300 00000000         
  301 00000000         
  302 00000000                 ldrb             r1,[r0,#1]
  303 00000000                 orr              addy,addy,r1,lsl#8
  304 00000000                 MEND
  305 00000000         
  306 00000000                 MACRO
  307 00000000                 doZ                          ;zero page         
                                                                 $nn
  308 00000000         _type   SETA             _ZP
  309 00000000                 ldrb             addy,[m6502_pc],#1
  310 00000000                 MEND
  311 00000000         
  312 00000000                 MACRO
  313 00000000                 doZ2                         ;zero page         
                                                                 $nn
  314 00000000         _type   SETA             _ZP
  315 00000000                 ldrb             addy,[m6502_pc],#2 ;ugly thing 
                                                            for bbr/bbs
  316 00000000                 MEND
  317 00000000         
  318 00000000                 MACRO
  319 00000000                 doZIX                        ;zero page indexed 
                                                            X    $nn,X
  320 00000000         _type   SETA             _ZP
  321 00000000                 ldrb             addy,[m6502_pc],#1
  322 00000000                 add              addy,addy,m6502_x,lsr#24
  323 00000000                 and              addy,addy,#0xff 
                                                            ;Rygar needs this
  324 00000000                 MEND



ARM Macro Assembler    Page 9 


  325 00000000         
  326 00000000                 MACRO
  327 00000000                 doZIXf                       ;zero page indexed 
                                                            X    $nn,X
  328 00000000         _type   SETA             _ZPI
  329 00000000                 ldrb             addy,[m6502_pc],#1
  330 00000000                 add              addy,m6502_x,addy,lsl#24
  331 00000000                 MEND
  332 00000000         
  333 00000000                 MACRO
  334 00000000                 doZIY                        ;zero page indexed 
                                                            Y    $nn,Y
  335 00000000         _type   SETA             _ZP
  336 00000000                 ldrb             addy,[m6502_pc],#1
  337 00000000                 add              addy,addy,m6502_y,lsr#24
  338 00000000                 and              addy,addy,#0xff
  339 00000000                 MEND
  340 00000000         
  341 00000000                 MACRO
  342 00000000                 doZIYf                       ;zero page indexed 
                                                            Y    $nn,Y
  343 00000000         _type   SETA             _ZPI
  344 00000000                 ldrb             addy,[m6502_pc],#1
  345 00000000                 add              addy,m6502_y,addy,lsl#24
  346 00000000                 MEND
  347 00000000         
  348 00000000         ;-------------------------------------------------------
                       ---------------------
  349 00000000         
  350 00000000                 MACRO
  351 00000000                 opADC
  352 00000000                 readmem
  353 00000000                 movs             r1,cycles,lsr#1 ;get C
  354 00000000                 subcs            r0,r0,#0x00000100
  355 00000000                 adcs             m6502_a,m6502_a,r0,ror#8
  356 00000000                 mov              m6502_nz,m6502_a,asr#24 ;NZ
  357 00000000                 orr              cycles,cycles,#CYC_C+CYC_V 
                                                            ;Prepare C & V
  358 00000000                 bicvc            cycles,cycles,#CYC_V ;V
  359 00000000                 MEND
  360 00000000         
  361 00000000                 MACRO
  362 00000000                 opAND
  363 00000000                 readmem
  364 00000000                 and              m6502_a,m6502_a,r0,lsl#24
  365 00000000                 mov              m6502_nz,m6502_a,asr#24 ;NZ
  366 00000000                 MEND
  367 00000000         
  368 00000000                 MACRO
  369 00000000                 opASL
  370 00000000                 readmem
  371 00000000                 add              r0,r0,r0
  372 00000000                 orrs             m6502_nz,r0,r0,lsl#24 ;NZ
  373 00000000                 orr              cycles,cycles,#CYC_C ;Prepare C
                                                            
  374 00000000                 writemem
  375 00000000                 MEND
  376 00000000         
  377 00000000                 MACRO



ARM Macro Assembler    Page 10 


  378 00000000                 opBIT
  379 00000000                 readmem
  380 00000000                 bic              cycles,cycles,#CYC_V ;reset V
  381 00000000                 tst              r0,#V
  382 00000000                 orrne            cycles,cycles,#CYC_V ;V
  383 00000000                 and              m6502_nz,r0,m6502_a,lsr#24 ;Z
  384 00000000                 orr              m6502_nz,m6502_nz,r0,lsl#24 ;N
  385 00000000                 MEND
  386 00000000         
  387 00000000                 MACRO
  388 00000000                 opCOMP           $x          ;A,X & Y
  389 00000000                 readmem
  390 00000000                 subs             m6502_nz,$x,r0,lsl#24
  391 00000000                 mov              m6502_nz,m6502_nz,asr#24 ;NZ
  392 00000000                 orr              cycles,cycles,#CYC_C ;Prepare C
                                                            
  393 00000000                 MEND
  394 00000000         
  395 00000000                 MACRO
  396 00000000                 opDEC
  397 00000000                 readmem
  398 00000000                 sub              r0,r0,#1
  399 00000000                 orr              m6502_nz,r0,r0,lsl#24 ;NZ
  400 00000000                 writemem
  401 00000000                 MEND
  402 00000000         
  403 00000000                 MACRO
  404 00000000                 opEOR
  405 00000000                 readmem
  406 00000000                 eor              m6502_a,m6502_a,r0,lsl#24
  407 00000000                 mov              m6502_nz,m6502_a,asr#24 ;NZ
  408 00000000                 MEND
  409 00000000         
  410 00000000                 MACRO
  411 00000000                 opINC
  412 00000000                 readmem
  413 00000000                 add              r0,r0,#1
  414 00000000                 orr              m6502_nz,r0,r0,lsl#24 ;NZ
  415 00000000                 writemem
  416 00000000                 MEND
  417 00000000         
  418 00000000                 MACRO
  419 00000000                 opLOAD           $x
  420 00000000                 readmems
  421 00000000                 mov              $x,m6502_nz,lsl#24
  422 00000000                 MEND
  423 00000000         
  424 00000000                 MACRO
  425 00000000                 opLSR
  426 00000000                 [                _type = _ABS
  427 00000000                 readmemabs
  428 00000000                 movs             r0,r0,lsr#1
  429 00000000                 orr              cycles,cycles,#CYC_C ;Prepare C
                                                            
  430 00000000                 mov              m6502_nz,r0 ;Z, (N=0)
  431 00000000                 writememabs
  432 00000000                 ]
  433 00000000                 [                _type = _ZP
  434 00000000                 ldrb             m6502_nz,[cpu_zpage,addy]



ARM Macro Assembler    Page 11 


  435 00000000                 movs             m6502_nz,m6502_nz,lsr#1 
                                                            ;Z, (N=0)
  436 00000000                 orr              cycles,cycles,#CYC_C ;Prepare C
                                                            
  437 00000000                 strb             m6502_nz,[cpu_zpage,addy]
  438 00000000                 ]
  439 00000000                 [                _type = _ZPI
  440 00000000         ;//  ldrb m6502_nz,[cpu_zpage,addy,lsr#24]
  441 00000000                 lsr              m6502_nz,addy,#24 
                                                            ;//¸Ä¹ý£¬¼Ó2ÐÐ
  442 00000000                 ldrb             m6502_nz,[cpu_zpage,m6502_nz]
  443 00000000         
  444 00000000                 movs             m6502_nz,m6502_nz,lsr#1 
                                                            ;Z, (N=0)
  445 00000000                 orr              cycles,cycles,#CYC_C ;Prepare C
                                                            
  446 00000000         ;//  strb m6502_nz,[cpu_zpage,addy,lsr#24]
  447 00000000                 lsr              r1,addy,#24 ;//¸Ä¹ý£¬¼Ó2ÐÐ
  448 00000000                 strb             m6502_nz,[cpu_zpage,r1]
  449 00000000         
  450 00000000                 ]
  451 00000000                 MEND
  452 00000000         
  453 00000000                 MACRO
  454 00000000                 opORA
  455 00000000                 readmem
  456 00000000                 orr              m6502_a,m6502_a,r0,lsl#24
  457 00000000                 mov              m6502_nz,m6502_a,asr#24
  458 00000000                 MEND
  459 00000000         
  460 00000000                 MACRO
  461 00000000                 opROL
  462 00000000                 readmem
  463 00000000                 movs             cycles,cycles,lsr#1 ;get C
  464 00000000                 adc              r0,r0,r0
  465 00000000                 orrs             m6502_nz,r0,r0,lsl#24 ;NZ
  466 00000000                 adc              cycles,cycles,cycles ;Set C
  467 00000000                 writemem
  468 00000000                 MEND
  469 00000000         
  470 00000000                 MACRO
  471 00000000                 opROR
  472 00000000                 readmem
  473 00000000                 movs             cycles,cycles,lsr#1 ;get C
  474 00000000                 orrcs            r0,r0,#0x100
  475 00000000                 movs             r0,r0,lsr#1
  476 00000000                 orr              m6502_nz,r0,r0,lsl#24 ;NZ
  477 00000000                 adc              cycles,cycles,cycles ;Set C
  478 00000000                 writemem
  479 00000000                 MEND
  480 00000000         
  481 00000000                 MACRO
  482 00000000                 opSBC
  483 00000000                 readmem
  484 00000000                 movs             r1,cycles,lsr#1 ;get C
  485 00000000                 sbcs             m6502_a,m6502_a,r0,lsl#24
  486 00000000                 and              m6502_a,m6502_a,#0xff000000
  487 00000000                 mov              m6502_nz,m6502_a,asr#24 ;NZ
  488 00000000                 orr              cycles,cycles,#CYC_C+CYC_V 



ARM Macro Assembler    Page 12 


                                                            ;Prepare C & V
  489 00000000                 bicvc            cycles,cycles,#CYC_V ;V
  490 00000000                 MEND
  491 00000000         
  492 00000000                 MACRO
  493 00000000                 opSTORE          $x
  494 00000000                 mov              r0,$x,lsr#24
  495 00000000                 writemem
  496 00000000                 MEND
  497 00000000         ;----------------------------------------------------
  498 00000000                 END
    4 00000000         
    5 00000000                 IMPORT           NES_RAM     ;nes_main.c 
    6 00000000         ; IMPORT prg_rombank0  ;nes_main.c 
    7 00000000         ; IMPORT prg_rombank1  ;nes_main.c 
    8 00000000                 IMPORT           spr_ram     ;ppu.c
    9 00000000         
   10 00000000                 EXPORT           op_table    ;´úÂëÌø×ª±íµØÖ· car
                                                            t.s
   11 00000000                 EXPORT           line242NMI
   12 00000000                 EXPORT           CPU_reset
   13 00000000                 EXPORT           run
   14 00000000         
   15 00000000 0000FFFE 
                       IRQ_VECTOR
                               EQU              0xfffe      ; //IRQ / BRKÖÐ¶ÏÏò
                                                            Á¿µØÖ·
   16 00000000 0000FFFC 
                       RES_VECTOR
                               EQU              0xfffc      ;// ¸´Î»ÖÐ¶ÏÏòÁ¿µØÖ
                                                            ·
   17 00000000 0000FFFA 
                       NMI_VECTOR
                               EQU              0xfffa      ;// NMIÖÐ¶ÏÏòÁ¿µØÖ·
                                                            
   18 00000000         
   19 00000000         ;cycle flags- (stored in cycles reg for speed)´æ´¢ÔÚÖÜÆÚ
                       ÕÂËÙ¶È
   20 00000000         
   21 00000000 00000001 
                       CYC_C   EQU              0x01        ;Carry bit ½øÎ»
   22 00000000         ;BRANCH   EQU 0x02 ;branch instruction encountered Óöµ½·
                       ÖÖ§Ö¸Áî
   23 00000000 00000004 
                       CYC_I   EQU              0x04        ;IRQ mask
   24 00000000 00000008 
                       CYC_D   EQU              0x08        ;Decimal bit Ð¡ÊýÎ»
                                                            
   25 00000000 00000040 
                       CYC_V   EQU              0x40        ;Overflow bit  Òç³ö
                                                            Î»
   26 00000000         ;CYC_MASK  EQU 0xFF;CYCLE-1 ;Mask
   27 00000000         
   28 00000000         
   29 00000000         ;   AREA wram_code0, CODE, READWRITE
   30 00000000                 AREA             cpu_code, CODE, READONLY 
                                                            ;, ALIGN=2
   31 00000000         ; ²»Òª¶Ô ARM ´úÂë½ÚÊ¹ÓÃ ALIGN=0 »ò ALIGN=1¡£
   32 00000000         ;    ²»Òª¶Ô Thumb ´úÂë½ÚÊ¹ÓÃ ALIGN=0¡£



ARM Macro Assembler    Page 13 


   33 00000000         ;AREA  Î±´úÂëÒ²ÊÇÐèÒªÓï·¨µÄ£¬AREA  ºóÃæ¸ú×Å¶ÎÃû±êºÅ£¬È»º
                       óÊÇÊôÐÔ£¬CODE ±íÊ¾ÕâÊÇÒ» 
   34 00000000         ;¸ö´úÂë¶Î£¬READONLY ±íÊ¾Õâ¸ö¶ÎÊÇÖ»¶ÁµÄ
   35 00000000         ;|.text|ÏµÍ³Ä¬ÈÏµÄ´úÂë¶ÎÃû  
   36 00000000         ; ALIGN Ö¸ÁîÍ¨¹ýÓÃÁã»ò NOP Ö¸Áî½øÐÐÌî³ä½«µ±Ç°Î»ÖÃ¶ÔÆëµ½Ö
                       ¸¶¨±ß½ç
   37 00000000         ;ENTRY  Õâ¸öÎ±´úÂëÊÇÓÃÀ´¶¨ÒåÈë¿Úµã
   38 00000000                 THUMB                        ;ThumbÊÇARMÌåÏµ½á¹¹
                                                            ÖÐÒ»ÖÖ16Î»µÄÖ¸Áî¼¯
   39 00000000         ; REQUIRE8  ;REQUIRE8 Ö¸ÁîÖ¸¶¨µ±Ç°ÎÄ¼þÒªÇó¶ÑÕ»°Ë×Ö½Ú¶ÔÆë
                       ¡£ ËüÉèÖÃ REQ8 ±àÒëÊôÐÔÒÔÍ¨ÖªÁ´½ÓÆ÷¡£
   40 00000000                 PRESERVE8                    ;{TRUE} ;PRESERVE8 
                                                            Ö¸ÁîÖ¸¶¨µ±Ç°ÎÄ¼þ±£³
                                                            Ö¶ÑÕ»°Ë×Ö½Ú¶ÔÆë¡£ Ë
                                                            üÉèÖÃ PRES8 ±àÒëÊôÐ
                                                            ÔÒÔÍ¨ÖªÁ´½ÓÆ÷¡£
   41 00000000         ;Èç¹ûÄúÊ¡ÂÔ PRESERVE8 ºÍ PRESERVE8 {FALSE}£¬»ã±à³ÌÐò»á¼ì
                       ²éÐÞ¸Ä sp µÄÖ¸Áî£¬
   42 00000000         ;ÒÔ¾ö¶¨ÊÇ·ñÉèÖÃ PRES8 ±àÒëÊôÐÔ¡£ ARM ½¨ÒéÃ÷È·Ö¸¶¨ PRESER
                       VE8¡£
   43 00000000         ; ARMÊ¹ÓÃr0×÷Îª·µ»ØÖµ
   44 00000000         ;²ÎÊý´«µÝARM£º¼Ä´æÆ÷µ½¶ÑÕ»£¬Ê×ÏÈ½«²ÎÊý¸³¸ør0, r1µÈ
   45 00000000         
   46 00000000         ;  PROC Îª×Ó³ÌÐò¿ªÊ¼£¬ENDP Îª×Ó³ÌÐò½áÊø
   47 00000000         
   48 00000000         
   49 00000000         ;r0,r1,r2=temp regs   
   50 00000000        3 
                       m6502_nz
                               RN               r3          ;bit 31=N, Z=1 if b
                                                            its 0-7=0    ;RN¶¨Ò
                                                            å¼Ä´æÆ÷Ãû
   51 00000000        4 
                       m6502_rmem
                               RN               r4          ;readmem_tbl
   52 00000000        5 
                       m6502_a RN               r5          ;//bits 0-23=0, »¹Ó
                                                            ÃÓÚÇå³ýÔÚÄÚ´æÖÐµÄ×Ö
                                                            ½Ú
   53 00000000        6 
                       m6502_x RN               r6          ;bits 0-23=0
   54 00000000        7 
                       m6502_y RN               r7          ;bits 0-23=0
   55 00000000        8 
                       cycles  RN               r8          ;//also VDIC flagsÒ
                                                            ²VDIC±êÖ¾
   56 00000000        9 
                       m6502_pc
                               RN               r9
   57 00000000        A 
                       globalptr
                               RN               r10         ;=wram_globals* ptr
                                                            
   58 00000000        A 
                       m6502_optbl
                               RN               r10
   59 00000000        B 
                       cpu_zpage
                               RN               r11         ;=CPU_RAM



ARM Macro Assembler    Page 14 


   60 00000000        C 
                       addy    RN               r12         ;//keep this at r12
                                                             (´ÓÍ· APCS) //addr
                                                              :´ú±í8Î»µØÖ· 
   61 00000000         ;r13=SP
   62 00000000         ;r14=LR
   63 00000000         ;r15=PC
   64 00000000         ;---------------------------------------------------
   65 00000000         
   66 00000000         
   67 00000000         _00                                  ;   BRK
   68 00000000         ;-------------------------------------------------------
                       ---------------------
   69 00000000         
   70 00000000 F8DA 0480       ldr              r0,lastbank ;   6502PC´Ó ROMµÄ×
                                                            îºóÆ«ÒÆÁ¿
   71 00000004 EBA9 0100       sub              r1,m6502_pc,r0
   72 00000008 F101 0001       add              r0,r1,#1
   73 0000000C                 push16                       ;save PC
  179 0000000C EA4F 2110       mov              r1,r0,lsr#8
  180 00000010 F8DA 247C       ldr              r2,m6502_s
  181 00000014 F802 1901       strb             r1,[r2],#-1
  182 00000018 F442 7280       orr              r2,r2,#0x100
  183 0000001C F802 0901       strb             r0,[r2],#-1
  184 00000020 F88A 247C       strb             r2,m6502_s
   74 00000024         
   75 00000024                 encodeP          (B+R)       ;save P
   28 00000024 F008 004D       and              r0,cycles,#CYC_V+CYC_D+CYC_I+CY
C_C
   29 00000028 F013 4F00       tst              m6502_nz,#0x80000000 ;//PSR_N
   30 0000002C BF18 F040 
              0080             orrne            r0,r0,#N    ;N
   31 00000032 F013 0FFF       tst              m6502_nz,#0xff
   32 00000036 BF08 F040 
              0002             orreq            r0,r0,#Z    ;Z
   33 0000003C F040 0030       orr              r0,r0,#(B+R) ;R(&B)
   76 00000040         
   77 00000040 F64F 7CFE       ldr              r12,=IRQ_VECTOR
   78 00000044 F7FF FFFE       bl               VecCont
   79 00000048         
   80 00000048                 fetch            7
   47 00000048 F5B8 68E0       subs             cycles,cycles,#7*256 ;//CYCLE=2
                                                            56 ;// 3*256 ÕýÊý»ò
                                                            0¾ÍÖ´ÐÐÏÂ2ÌõÖ¸Áî  
   48 0000004C         ;// subs cycles,cycles,#$count  ;//   r8=r8-#$count
   49 0000004C BF5C F819 
              0B01             ldrplb           r0,[m6502_pc],#1 ; //´Ó´æ´¢Æ÷ÖÐ
                                                            ¼ÓÔØ×Ö½Úµ½Ò»¸ö¼Ä´æÆ
                                                            ÷ÖÐ  r0=²Ù×÷Âë
   50 00000052 F85A F020       ldrpl            pc,[m6502_optbl,r0,lsl#2] ;//r1
                                                            0 ********r0=r0x4**
                                                            *ÔËÐÐ´úÂëµÄµØÖ·****
                                                            *******************
                                                            ***************
   51 00000056 F8DA F484       ldr              pc,nexttimeout
   81 0000005A                 LTORG                        ;Ö¸Áî£¬ LTORG¿ÉÄÜÊÇ
                                                            ÔÚÒ»¸ö¿ÉÖ´ÐÐµÄÎ»ÖÃ
   82 0000005A         ;-------------------------------------------------------
                       ---------------------



ARM Macro Assembler    Page 15 


   83 0000005A         _01                                  ;   ORA ($nn,X)
   84 0000005A         ;-------------------------------------------------------
                       ---------------------
   85 0000005A                 doIIX
  261 0000005A 00000004 
                       _type   SETA             _ABS
  262 0000005A F819 0B01       ldrb             r0,[m6502_pc],#1
  263 0000005E EB06 6000       add              r0,m6502_x,r0,lsl#24
  264 00000062         ;//ldrb addy,[cpu_zpage,r0,lsr#24] ;//´íÎó:Ö¸¶¨µÄ×ª±ä²»Ô
                       ÊÐí
  265 00000062 EA4F 6C10       lsr              addy,r0,#24 ;//¸Ä¹ý£¬¼Ó2ÐÐ >>24
                                                            
  266 00000066 F81B C00C       ldrb             addy,[cpu_zpage,addy]
  267 0000006A         
  268 0000006A F100 7080       add              r0,r0,#0x01000000
  269 0000006E         ;//ldrb r1,[cpu_zpage,r0,lsr#24] ;//R1,LSR#2;½«R1ÖÐµÄÄÚÈ
                       ÝÓÒÒÆ2Î»
  270 0000006E EA4F 6110       lsr              r1,r0,#24   ;//¸Ä¹ý£¬¼Ó2ÐÐ
  271 00000072 F81B 1001       ldrb             r1,[cpu_zpage,r1]
  272 00000076         
  273 00000076 EA4C 2C01       orr              addy,addy,r1,lsl#8
   86 0000007A                 opORA
  455 0000007A                 readmem
  108 0000007A                 [                _type = _ABS
  109 0000007A                 readmemabs
   69 0000007A F40C 4160       and              r1,addy,#0xE000
   70 0000007E F20F 0E0A       adr              lr,%F0
   71 00000082         ;// ldr pc,[m6502_rmem,r1,lsr#11] ;//in: addy,r1=addy&0x
                       E000 (for rom_R)
   72 00000082 EA4F 21D1       lsr              r1,r1,#11   ;//¸Ä¹ý£¬¼Ó2ÐÐ  >>1
                                                            1
   73 00000086 F854 F001       ldr              pc,[m6502_rmem,r1]
   74 0000008A         
   75 0000008A         0                                    ;//out: r0=val (bit
                                                            s 8-31=0 (LSR,ROR,I
                                                            NC,DEC,ASL)), addy 
                                                            preserved for RMW i
                                                            nstructions
  110 0000008A                 ]
  111 0000008A                 [                _type = _ZP
  113                          ]
  114 0000008A                 [                _type = _ZPI
  116                          ]
  117 0000008A                 [                _type = _IMM
  119                          ]
  456 0000008A EA45 6500       orr              m6502_a,m6502_a,r0,lsl#24
  457 0000008E EA4F 6325       mov              m6502_nz,m6502_a,asr#24
   87 00000092                 fetch            6
   47 00000092 F5B8 68C0       subs             cycles,cycles,#6*256 ;//CYCLE=2
                                                            56 ;// 3*256 ÕýÊý»ò
                                                            0¾ÍÖ´ÐÐÏÂ2ÌõÖ¸Áî  
   48 00000096         ;// subs cycles,cycles,#$count  ;//   r8=r8-#$count
   49 00000096 BF5C F819 
              0B01             ldrplb           r0,[m6502_pc],#1 ; //´Ó´æ´¢Æ÷ÖÐ
                                                            ¼ÓÔØ×Ö½Úµ½Ò»¸ö¼Ä´æÆ
                                                            ÷ÖÐ  r0=²Ù×÷Âë
   50 0000009C F85A F020       ldrpl            pc,[m6502_optbl,r0,lsl#2] ;//r1
                                                            0 ********r0=r0x4**
                                                            *ÔËÐÐ´úÂëµÄµØÖ·****



ARM Macro Assembler    Page 16 


                                                            *******************
                                                            ***************
   51 000000A0 F8DA F484       ldr              pc,nexttimeout
   88 000000A4         ;-------------------------------------------------------
                       ---------------------
   89 000000A4         _05                                  ;   ORA $nn
   90 000000A4         ;-------------------------------------------------------
                       ---------------------
   91 000000A4                 doZ
  308 000000A4 00000002 
                       _type   SETA             _ZP
  309 000000A4 F819 CB01       ldrb             addy,[m6502_pc],#1
   92 000000A8                 opORA
  455 000000A8                 readmem
  108 000000A8                 [                _type = _ABS
  110                          ]
  111 000000A8                 [                _type = _ZP
  112 000000A8                 readmemzp
   80 000000A8 F81B 000C       ldrb             r0,[cpu_zpage,addy]
  113 000000AC                 ]
  114 000000AC                 [                _type = _ZPI
  116                          ]
  117 000000AC                 [                _type = _IMM
  119                          ]
  456 000000AC EA45 6500       orr              m6502_a,m6502_a,r0,lsl#24
  457 000000B0 EA4F 6325       mov              m6502_nz,m6502_a,asr#24
   93 000000B4                 fetch            3
   47 000000B4 F5B8 7840       subs             cycles,cycles,#3*256 ;//CYCLE=2
                                                            56 ;// 3*256 ÕýÊý»ò
                                                            0¾ÍÖ´ÐÐÏÂ2ÌõÖ¸Áî  
   48 000000B8         ;// subs cycles,cycles,#$count  ;//   r8=r8-#$count
   49 000000B8 BF5C F819 
              0B01             ldrplb           r0,[m6502_pc],#1 ; //´Ó´æ´¢Æ÷ÖÐ
                                                            ¼ÓÔØ×Ö½Úµ½Ò»¸ö¼Ä´æÆ
                                                            ÷ÖÐ  r0=²Ù×÷Âë
   50 000000BE F85A F020       ldrpl            pc,[m6502_optbl,r0,lsl#2] ;//r1
                                                            0 ********r0=r0x4**
                                                            *ÔËÐÐ´úÂëµÄµØÖ·****
                                                            *******************
                                                            ***************
   51 000000C2 F8DA F484       ldr              pc,nexttimeout
   94 000000C6         ;-------------------------------------------------------
                       ---------------------
   95 000000C6         _06                                  ;   ASL $nn
   96 000000C6         ;-------------------------------------------------------
                       ---------------------
   97 000000C6                 doZ
  308 000000C6 00000002 
                       _type   SETA             _ZP
  309 000000C6 F819 CB01       ldrb             addy,[m6502_pc],#1
   98 000000CA                 opASL
  370 000000CA                 readmem
  108 000000CA                 [                _type = _ABS
  110                          ]
  111 000000CA                 [                _type = _ZP
  112 000000CA                 readmemzp
   80 000000CA F81B 000C       ldrb             r0,[cpu_zpage,addy]
  113 000000CE                 ]
  114 000000CE                 [                _type = _ZPI



ARM Macro Assembler    Page 17 


  116                          ]
  117 000000CE                 [                _type = _IMM
  119                          ]
  371 000000CE 4400            add              r0,r0,r0
  372 000000D0 EA50 6300       orrs             m6502_nz,r0,r0,lsl#24 ;NZ
  373 000000D4 F048 0801       orr              cycles,cycles,#CYC_C ;Prepare C
                                                            
  374 000000D8                 writemem
  165 000000D8                 [                _type = _ABS
  167                          ]
  168 000000D8                 [                _type = _ZP
  169 000000D8                 writememzp
  151 000000D8 F80B 000C       strb             r0,[cpu_zpage,addy]
  170 000000DC                 ]
  171 000000DC                 [                _type = _ZPI
  173                          ]
   99 000000DC                 fetch_c          5
   56 000000DC F578 68A0       sbcs             cycles,cycles,#5*256 
                                                            ;//CYCLE=256
   57 000000E0 BF5C F819 
              0B01             ldrplb           r0,[m6502_pc],#1
   58 000000E6 F85A F020       ldrpl            pc,[m6502_optbl,r0,lsl#2]
   59 000000EA F8DA F484       ldr              pc,nexttimeout
  100 000000EE         ;-------------------------------------------------------
                       ---------------------
  101 000000EE         _08                                  ;   PHP
  102 000000EE         ;-------------------------------------------------------
                       ---------------------
  103 000000EE                 encodeP          (B+R)
   28 000000EE F008 004D       and              r0,cycles,#CYC_V+CYC_D+CYC_I+CY
C_C
   29 000000F2 F013 4F00       tst              m6502_nz,#0x80000000 ;//PSR_N
   30 000000F6 BF18 F040 
              0080             orrne            r0,r0,#N    ;N
   31 000000FC F013 0FFF       tst              m6502_nz,#0xff
   32 00000100 BF08 F040 
              0002             orreq            r0,r0,#Z    ;Z
   33 00000106 F040 0030       orr              r0,r0,#(B+R) ;R(&B)
  104 0000010A                 push8            r0
  189 0000010A F8DA 247C       ldr              r2,m6502_s
  190 0000010E F802 0901       strb             r0,[r2],#-1
  191 00000112 F88A 247C       strb             r2,m6502_s
  105 00000116                 fetch            3
   47 00000116 F5B8 7840       subs             cycles,cycles,#3*256 ;//CYCLE=2
                                                            56 ;// 3*256 ÕýÊý»ò
                                                            0¾ÍÖ´ÐÐÏÂ2ÌõÖ¸Áî  
   48 0000011A         ;// subs cycles,cycles,#$count  ;//   r8=r8-#$count
   49 0000011A BF5C F819 
              0B01             ldrplb           r0,[m6502_pc],#1 ; //´Ó´æ´¢Æ÷ÖÐ
                                                            ¼ÓÔØ×Ö½Úµ½Ò»¸ö¼Ä´æÆ
                                                            ÷ÖÐ  r0=²Ù×÷Âë
   50 00000120 F85A F020       ldrpl            pc,[m6502_optbl,r0,lsl#2] ;//r1
                                                            0 ********r0=r0x4**
                                                            *ÔËÐÐ´úÂëµÄµØÖ·****
                                                            *******************
                                                            ***************
   51 00000124 F8DA F484       ldr              pc,nexttimeout
  106 00000128         ;-------------------------------------------------------
                       ---------------------



ARM Macro Assembler    Page 18 


  107 00000128         _09                                  ;   ORA #$nn
  108 00000128         ;-------------------------------------------------------
                       ---------------------
  109 00000128                 doIMM
  256 00000128 00000001 
                       _type   SETA             _IMM
  110 00000128                 opORA
  455 00000128                 readmem
  108 00000128                 [                _type = _ABS
  110                          ]
  111 00000128                 [                _type = _ZP
  113                          ]
  114 00000128                 [                _type = _ZPI
  116                          ]
  117 00000128                 [                _type = _IMM
  118 00000128                 readmemimm
   98 00000128 F819 0B01       ldrb             r0,[m6502_pc],#1
  119 0000012C                 ]
  456 0000012C EA45 6500       orr              m6502_a,m6502_a,r0,lsl#24
  457 00000130 EA4F 6325       mov              m6502_nz,m6502_a,asr#24
  111 00000134                 fetch            2
   47 00000134 F5B8 7800       subs             cycles,cycles,#2*256 ;//CYCLE=2
                                                            56 ;// 3*256 ÕýÊý»ò
                                                            0¾ÍÖ´ÐÐÏÂ2ÌõÖ¸Áî  
   48 00000138         ;// subs cycles,cycles,#$count  ;//   r8=r8-#$count
   49 00000138 BF5C F819 
              0B01             ldrplb           r0,[m6502_pc],#1 ; //´Ó´æ´¢Æ÷ÖÐ
                                                            ¼ÓÔØ×Ö½Úµ½Ò»¸ö¼Ä´æÆ
                                                            ÷ÖÐ  r0=²Ù×÷Âë
   50 0000013E F85A F020       ldrpl            pc,[m6502_optbl,r0,lsl#2] ;//r1
                                                            0 ********r0=r0x4**
                                                            *ÔËÐÐ´úÂëµÄµØÖ·****
                                                            *******************
                                                            ***************
   51 00000142 F8DA F484       ldr              pc,nexttimeout
  112 00000146         ;-------------------------------------------------------
                       ---------------------
  113 00000146         _0A                                  ;   ASL
  114 00000146         ;-------------------------------------------------------
                       ---------------------
  115 00000146 196D            adds             m6502_a,m6502_a,m6502_a
  116 00000148 EA4F 6325       mov              m6502_nz,m6502_a,asr#24 ;NZ
  117 0000014C F048 0801       orr              cycles,cycles,#CYC_C ;Prepare C
                                                            
  118 00000150                 fetch_c          2           ;also subs carry
   56 00000150 F578 7800       sbcs             cycles,cycles,#2*256 
                                                            ;//CYCLE=256
   57 00000154 BF5C F819 
              0B01             ldrplb           r0,[m6502_pc],#1
   58 0000015A F85A F020       ldrpl            pc,[m6502_optbl,r0,lsl#2]
   59 0000015E F8DA F484       ldr              pc,nexttimeout
  119 00000162         ;-------------------------------------------------------
                       ---------------------
  120 00000162         _0D                                  ;   ORA $nnnn
  121 00000162         ;-------------------------------------------------------
                       ---------------------
  122 00000162                 doABS
  228 00000162 00000004 
                       _type   SETA             _ABS



ARM Macro Assembler    Page 19 


  229 00000162 F819 CB01       ldrb             addy,[m6502_pc],#1
  230 00000166 F819 0B01       ldrb             r0,[m6502_pc],#1
  231 0000016A EA4C 2C00       orr              addy,addy,r0,lsl#8
  123 0000016E                 opORA
  455 0000016E                 readmem
  108 0000016E                 [                _type = _ABS
  109 0000016E                 readmemabs
   69 0000016E F40C 4160       and              r1,addy,#0xE000
   70 00000172 F20F 0E0A       adr              lr,%F0
   71 00000176         ;// ldr pc,[m6502_rmem,r1,lsr#11] ;//in: addy,r1=addy&0x
                       E000 (for rom_R)
   72 00000176 EA4F 21D1       lsr              r1,r1,#11   ;//¸Ä¹ý£¬¼Ó2ÐÐ  >>1
                                                            1
   73 0000017A F854 F001       ldr              pc,[m6502_rmem,r1]
   74 0000017E         
   75 0000017E         0                                    ;//out: r0=val (bit
                                                            s 8-31=0 (LSR,ROR,I
                                                            NC,DEC,ASL)), addy 
                                                            preserved for RMW i
                                                            nstructions
  110 0000017E                 ]
  111 0000017E                 [                _type = _ZP
  113                          ]
  114 0000017E                 [                _type = _ZPI
  116                          ]
  117 0000017E                 [                _type = _IMM
  119                          ]
  456 0000017E EA45 6500       orr              m6502_a,m6502_a,r0,lsl#24
  457 00000182 EA4F 6325       mov              m6502_nz,m6502_a,asr#24
  124 00000186                 fetch            4
   47 00000186 F5B8 6880       subs             cycles,cycles,#4*256 ;//CYCLE=2
                                                            56 ;// 3*256 ÕýÊý»ò
                                                            0¾ÍÖ´ÐÐÏÂ2ÌõÖ¸Áî  
   48 0000018A         ;// subs cycles,cycles,#$count  ;//   r8=r8-#$count
   49 0000018A BF5C F819 
              0B01             ldrplb           r0,[m6502_pc],#1 ; //´Ó´æ´¢Æ÷ÖÐ
                                                            ¼ÓÔØ×Ö½Úµ½Ò»¸ö¼Ä´æÆ
                                                            ÷ÖÐ  r0=²Ù×÷Âë
   50 00000190 F85A F020       ldrpl            pc,[m6502_optbl,r0,lsl#2] ;//r1
                                                            0 ********r0=r0x4**
                                                            *ÔËÐÐ´úÂëµÄµØÖ·****
                                                            *******************
                                                            ***************
   51 00000194 F8DA F484       ldr              pc,nexttimeout
  125 00000198         ;-------------------------------------------------------
                       ---------------------
  126 00000198         _0E                                  ;   ASL $nnnn
  127 00000198         ;-------------------------------------------------------
                       ---------------------
  128 00000198                 doABS
  228 00000198 00000004 
                       _type   SETA             _ABS
  229 00000198 F819 CB01       ldrb             addy,[m6502_pc],#1
  230 0000019C F819 0B01       ldrb             r0,[m6502_pc],#1
  231 000001A0 EA4C 2C00       orr              addy,addy,r0,lsl#8
  129 000001A4                 opASL
  370 000001A4                 readmem
  108 000001A4                 [                _type = _ABS
  109 000001A4                 readmemabs



ARM Macro Assembler    Page 20 


   69 000001A4 F40C 4160       and              r1,addy,#0xE000
   70 000001A8 F20F 0E08       adr              lr,%F0
   71 000001AC         ;// ldr pc,[m6502_rmem,r1,lsr#11] ;//in: addy,r1=addy&0x
                       E000 (for rom_R)
   72 000001AC EA4F 21D1       lsr              r1,r1,#11   ;//¸Ä¹ý£¬¼Ó2ÐÐ  >>1
                                                            1
   73 000001B0 F854 F001       ldr              pc,[m6502_rmem,r1]
   74 000001B4         
   75 000001B4         0                                    ;//out: r0=val (bit
                                                            s 8-31=0 (LSR,ROR,I
                                                            NC,DEC,ASL)), addy 
                                                            preserved for RMW i
                                                            nstructions
  110 000001B4                 ]
  111 000001B4                 [                _type = _ZP
  113                          ]
  114 000001B4                 [                _type = _ZPI
  116                          ]
  117 000001B4                 [                _type = _IMM
  119                          ]
  371 000001B4 4400            add              r0,r0,r0
  372 000001B6 EA50 6300       orrs             m6502_nz,r0,r0,lsl#24 ;NZ
  373 000001BA F048 0801       orr              cycles,cycles,#CYC_C ;Prepare C
                                                            
  374 000001BE                 writemem
  165 000001BE                 [                _type = _ABS
  166 000001BE                 writememabs
  139 000001BE F40C 4160       and              r1,addy,#0xe000
  140 000001C2 F50A 6284       adr              r2,writemem_tbl
  141 000001C6 F20F 0E0A       adr              lr,%F0
  142 000001CA         ;// ldr pc,[r2,r1,lsr#11] ;//in: addy,r0=val(bits 8-31=?
                       )
  143 000001CA EA4F 21D1       lsr              r1,r1,#11   ;//¸Ä¹ý£¬¼Ó2ÐÐ >>11
                                                            
  144 000001CE F852 F001       ldr              pc,[r2,r1]
  145 000001D2         
  146 000001D2         0                                    ;out: r0,r1,r2,addy
                                                            =?
  167 000001D2                 ]
  168 000001D2                 [                _type = _ZP
  170                          ]
  171 000001D2                 [                _type = _ZPI
  173                          ]
  130 000001D2                 fetch_c          6
   56 000001D2 F578 68C0       sbcs             cycles,cycles,#6*256 
                                                            ;//CYCLE=256
   57 000001D6 BF5C F819 
              0B01             ldrplb           r0,[m6502_pc],#1
   58 000001DC F85A F020       ldrpl            pc,[m6502_optbl,r0,lsl#2]
   59 000001E0 F8DA F484       ldr              pc,nexttimeout
  131 000001E4         ;-------------------------------------------------------
                       ---------------------  
  132 000001E4         _10                                  ;   BPL *
  133 000001E4         ;-------------------------------------------------------
                       ---------------------
  134 000001E4 F013 4F00       tst              m6502_nz,#0x80000000
  135 000001E8 F919 0B01       ldrsb            r0,[m6502_pc],#1
  136 000001EC BF04 4481       addeq            m6502_pc,m6502_pc,r0
  137 000001F0         ; subeq cycles,cycles,#3*CYCLE



ARM Macro Assembler    Page 21 


  138 000001F0 F5A8 7880       subeq            cycles,cycles,#256
  139 000001F4                 fetch            2
   47 000001F4 F5B8 7800       subs             cycles,cycles,#2*256 ;//CYCLE=2
                                                            56 ;// 3*256 ÕýÊý»ò
                                                            0¾ÍÖ´ÐÐÏÂ2ÌõÖ¸Áî  
   48 000001F8         ;// subs cycles,cycles,#$count  ;//   r8=r8-#$count
   49 000001F8 BF5C F819 
              0B01             ldrplb           r0,[m6502_pc],#1 ; //´Ó´æ´¢Æ÷ÖÐ
                                                            ¼ÓÔØ×Ö½Úµ½Ò»¸ö¼Ä´æÆ
                                                            ÷ÖÐ  r0=²Ù×÷Âë
   50 000001FE F85A F020       ldrpl            pc,[m6502_optbl,r0,lsl#2] ;//r1
                                                            0 ********r0=r0x4**
                                                            *ÔËÐÐ´úÂëµÄµØÖ·****
                                                            *******************
                                                            ***************
   51 00000202 F8DA F484       ldr              pc,nexttimeout
  140 00000206         ;-------------------------------------------------------
                       ---------------------
  141 00000206         _11                                  ;   ORA ($nn),Y
  142 00000206         ;-------------------------------------------------------
                       ---------------------
  143 00000206                 doIIY
  278 00000206 00000004 
                       _type   SETA             _ABS
  279 00000206 F819 0B01       ldrb             r0,[m6502_pc],#1
  280 0000020A         ;// ldrb addy,[r0,cpu_zpage]! ;;ÔÚÊý¾Ý´«ËÍÖ®Ç°,½«Æ«ÒÆÁ¿¼
                       Óµ½Rn ÖÐ,Æä½á¹û×÷Îª´«ËÍÊý¾ÝµÄ´æ´¢µØÖ·
  281 0000020A         ;//ÈôÊ¹ÓÃºó×º"!",Ôò½á¹ûÐ´»Øµ½RnÖÐ
  282 0000020A F810 C00B       ldrb             addy,[r0,cpu_zpage]
  283 0000020E 4458            add              r0,r0,cpu_zpage ;//////////////
                                                            ///////////////////
                                                            /////
  284 00000210         
  285 00000210         
  286 00000210 7841            ldrb             r1,[r0,#1]
  287 00000212 EA4C 2C01       orr              addy,addy,r1,lsl#8
  288 00000216 EB0C 6C17       add              addy,addy,m6502_y,lsr#24
  289 0000021A         ; bic addy,addy,#0xff0000 ;Zelda2 needs this
  144 0000021A                 opORA
  455 0000021A                 readmem
  108 0000021A                 [                _type = _ABS
  109 0000021A                 readmemabs
   69 0000021A F40C 4160       and              r1,addy,#0xE000
   70 0000021E F20F 0E0A       adr              lr,%F0
   71 00000222         ;// ldr pc,[m6502_rmem,r1,lsr#11] ;//in: addy,r1=addy&0x
                       E000 (for rom_R)
   72 00000222 EA4F 21D1       lsr              r1,r1,#11   ;//¸Ä¹ý£¬¼Ó2ÐÐ  >>1
                                                            1
   73 00000226 F854 F001       ldr              pc,[m6502_rmem,r1]
   74 0000022A         
   75 0000022A         0                                    ;//out: r0=val (bit
                                                            s 8-31=0 (LSR,ROR,I
                                                            NC,DEC,ASL)), addy 
                                                            preserved for RMW i
                                                            nstructions
  110 0000022A                 ]
  111 0000022A                 [                _type = _ZP
  113                          ]
  114 0000022A                 [                _type = _ZPI



ARM Macro Assembler    Page 22 


  116                          ]
  117 0000022A                 [                _type = _IMM
  119                          ]
  456 0000022A EA45 6500       orr              m6502_a,m6502_a,r0,lsl#24
  457 0000022E EA4F 6325       mov              m6502_nz,m6502_a,asr#24
  145 00000232                 fetch            5
   47 00000232 F5B8 68A0       subs             cycles,cycles,#5*256 ;//CYCLE=2
                                                            56 ;// 3*256 ÕýÊý»ò
                                                            0¾ÍÖ´ÐÐÏÂ2ÌõÖ¸Áî  
   48 00000236         ;// subs cycles,cycles,#$count  ;//   r8=r8-#$count
   49 00000236 BF5C F819 
              0B01             ldrplb           r0,[m6502_pc],#1 ; //´Ó´æ´¢Æ÷ÖÐ
                                                            ¼ÓÔØ×Ö½Úµ½Ò»¸ö¼Ä´æÆ
                                                            ÷ÖÐ  r0=²Ù×÷Âë
   50 0000023C F85A F020       ldrpl            pc,[m6502_optbl,r0,lsl#2] ;//r1
                                                            0 ********r0=r0x4**
                                                            *ÔËÐÐ´úÂëµÄµØÖ·****
                                                            *******************
                                                            ***************
   51 00000240 F8DA F484       ldr              pc,nexttimeout
  146 00000244         ;-------------------------------------------------------
                       ---------------------
  147 00000244         _15                                  ;   ORA $nn,X
  148 00000244         ;-------------------------------------------------------
                       ---------------------
  149 00000244                 doZIXf
  328 00000244 00000003 
                       _type   SETA             _ZPI
  329 00000244 F819 CB01       ldrb             addy,[m6502_pc],#1
  330 00000248 EB06 6C0C       add              addy,m6502_x,addy,lsl#24
  150 0000024C                 opORA
  455 0000024C                 readmem
  108 0000024C                 [                _type = _ABS
  110                          ]
  111 0000024C                 [                _type = _ZP
  113                          ]
  114 0000024C                 [                _type = _ZPI
  115 0000024C                 readmemzpi
   85 0000024C         ;// ldrb r0,[cpu_zpage,addy,lsr#24]
   86 0000024C EA4F 601C       lsr              r0,addy,#24 ;//¸Ä¹ý£¬¼Ó3ÐÐ
   87 00000250 F81B 0000       ldrb             r0,[cpu_zpage,r0]
   88 00000254         
  116 00000254                 ]
  117 00000254                 [                _type = _IMM
  119                          ]
  456 00000254 EA45 6500       orr              m6502_a,m6502_a,r0,lsl#24
  457 00000258 EA4F 6325       mov              m6502_nz,m6502_a,asr#24
  151 0000025C                 fetch            4
   47 0000025C F5B8 6880       subs             cycles,cycles,#4*256 ;//CYCLE=2
                                                            56 ;// 3*256 ÕýÊý»ò
                                                            0¾ÍÖ´ÐÐÏÂ2ÌõÖ¸Áî  
   48 00000260         ;// subs cycles,cycles,#$count  ;//   r8=r8-#$count
   49 00000260 BF5C F819 
              0B01             ldrplb           r0,[m6502_pc],#1 ; //´Ó´æ´¢Æ÷ÖÐ
                                                            ¼ÓÔØ×Ö½Úµ½Ò»¸ö¼Ä´æÆ
                                                            ÷ÖÐ  r0=²Ù×÷Âë
   50 00000266 F85A F020       ldrpl            pc,[m6502_optbl,r0,lsl#2] ;//r1
                                                            0 ********r0=r0x4**
                                                            *ÔËÐÐ´úÂëµÄµØÖ·****



ARM Macro Assembler    Page 23 


                                                            *******************
                                                            ***************
   51 0000026A F8DA F484       ldr              pc,nexttimeout
  152 0000026E         ;-------------------------------------------------------
                       ---------------------
  153 0000026E         _16                                  ;   ASL $nn,X
  154 0000026E         ;-------------------------------------------------------
                       ---------------------
  155 0000026E                 doZIXf
  328 0000026E 00000003 
                       _type   SETA             _ZPI
  329 0000026E F819 CB01       ldrb             addy,[m6502_pc],#1
  330 00000272 EB06 6C0C       add              addy,m6502_x,addy,lsl#24
  156 00000276                 opASL
  370 00000276                 readmem
  108 00000276                 [                _type = _ABS
  110                          ]
  111 00000276                 [                _type = _ZP
  113                          ]
  114 00000276                 [                _type = _ZPI
  115 00000276                 readmemzpi
   85 00000276         ;// ldrb r0,[cpu_zpage,addy,lsr#24]
   86 00000276 EA4F 601C       lsr              r0,addy,#24 ;//¸Ä¹ý£¬¼Ó3ÐÐ
   87 0000027A F81B 0000       ldrb             r0,[cpu_zpage,r0]
   88 0000027E         
  116 0000027E                 ]
  117 0000027E                 [                _type = _IMM
  119                          ]
  371 0000027E 4400            add              r0,r0,r0
  372 00000280 EA50 6300       orrs             m6502_nz,r0,r0,lsl#24 ;NZ
  373 00000284 F048 0801       orr              cycles,cycles,#CYC_C ;Prepare C
                                                            
  374 00000288                 writemem
  165 00000288                 [                _type = _ABS
  167                          ]
  168 00000288                 [                _type = _ZP
  170                          ]
  171 00000288                 [                _type = _ZPI
  172 00000288                 writememzpi
  156 00000288         ;// strb r0,[cpu_zpage,addy,lsr#24]
  157 00000288 EA4F 611C       lsr              r1,addy,#24 ;//¸Ä¹ý£¬¼Ó2ÐÐ  >>2
                                                            4
  158 0000028C F80B 0001       strb             r0,[cpu_zpage,r1]
  159 00000290         
  160 00000290         
  173 00000290                 ]
  157 00000290                 fetch_c          6
   56 00000290 F578 68C0       sbcs             cycles,cycles,#6*256 
                                                            ;//CYCLE=256
   57 00000294 BF5C F819 
              0B01             ldrplb           r0,[m6502_pc],#1
   58 0000029A F85A F020       ldrpl            pc,[m6502_optbl,r0,lsl#2]
   59 0000029E F8DA F484       ldr              pc,nexttimeout
  158 000002A2         ;-------------------------------------------------------
                       ---------------------
  159 000002A2         _18                                  ;   CLC
  160 000002A2         ;-------------------------------------------------------
                       ---------------------
  161 000002A2 F028 0801       bic              cycles,cycles,#CYC_C



ARM Macro Assembler    Page 24 


  162 000002A6                 fetch            2
   47 000002A6 F5B8 7800       subs             cycles,cycles,#2*256 ;//CYCLE=2
                                                            56 ;// 3*256 ÕýÊý»ò
                                                            0¾ÍÖ´ÐÐÏÂ2ÌõÖ¸Áî  
   48 000002AA         ;// subs cycles,cycles,#$count  ;//   r8=r8-#$count
   49 000002AA BF5C F819 
              0B01             ldrplb           r0,[m6502_pc],#1 ; //´Ó´æ´¢Æ÷ÖÐ
                                                            ¼ÓÔØ×Ö½Úµ½Ò»¸ö¼Ä´æÆ
                                                            ÷ÖÐ  r0=²Ù×÷Âë
   50 000002B0 F85A F020       ldrpl            pc,[m6502_optbl,r0,lsl#2] ;//r1
                                                            0 ********r0=r0x4**
                                                            *ÔËÐÐ´úÂëµÄµØÖ·****
                                                            *******************
                                                            ***************
   51 000002B4 F8DA F484       ldr              pc,nexttimeout
  163 000002B8         ;-------------------------------------------------------
                       ---------------------
  164 000002B8         _19                                  ;   ORA $nnnn,Y
  165 000002B8         ;-------------------------------------------------------
                       ---------------------
  166 000002B8                 doAIY
  246 000002B8 00000004 
                       _type   SETA             _ABS
  247 000002B8 F819 CB01       ldrb             addy,[m6502_pc],#1
  248 000002BC F819 0B01       ldrb             r0,[m6502_pc],#1
  249 000002C0 EA4C 2C00       orr              addy,addy,r0,lsl#8
  250 000002C4 EB0C 6C17       add              addy,addy,m6502_y,lsr#24
  251 000002C8         ; bic addy,addy,#0xff0000 ;Tecmo Bowl needs this
  167 000002C8                 opORA
  455 000002C8                 readmem
  108 000002C8                 [                _type = _ABS
  109 000002C8                 readmemabs
   69 000002C8 F40C 4160       and              r1,addy,#0xE000
   70 000002CC F20F 0E08       adr              lr,%F0
   71 000002D0         ;// ldr pc,[m6502_rmem,r1,lsr#11] ;//in: addy,r1=addy&0x
                       E000 (for rom_R)
   72 000002D0 EA4F 21D1       lsr              r1,r1,#11   ;//¸Ä¹ý£¬¼Ó2ÐÐ  >>1
                                                            1
   73 000002D4 F854 F001       ldr              pc,[m6502_rmem,r1]
   74 000002D8         
   75 000002D8         0                                    ;//out: r0=val (bit
                                                            s 8-31=0 (LSR,ROR,I
                                                            NC,DEC,ASL)), addy 
                                                            preserved for RMW i
                                                            nstructions
  110 000002D8                 ]
  111 000002D8                 [                _type = _ZP
  113                          ]
  114 000002D8                 [                _type = _ZPI
  116                          ]
  117 000002D8                 [                _type = _IMM
  119                          ]
  456 000002D8 EA45 6500       orr              m6502_a,m6502_a,r0,lsl#24
  457 000002DC EA4F 6325       mov              m6502_nz,m6502_a,asr#24
  168 000002E0                 fetch            4
   47 000002E0 F5B8 6880       subs             cycles,cycles,#4*256 ;//CYCLE=2
                                                            56 ;// 3*256 ÕýÊý»ò
                                                            0¾ÍÖ´ÐÐÏÂ2ÌõÖ¸Áî  
   48 000002E4         ;// subs cycles,cycles,#$count  ;//   r8=r8-#$count



ARM Macro Assembler    Page 25 


   49 000002E4 BF5C F819 
              0B01             ldrplb           r0,[m6502_pc],#1 ; //´Ó´æ´¢Æ÷ÖÐ
                                                            ¼ÓÔØ×Ö½Úµ½Ò»¸ö¼Ä´æÆ
                                                            ÷ÖÐ  r0=²Ù×÷Âë
   50 000002EA F85A F020       ldrpl            pc,[m6502_optbl,r0,lsl#2] ;//r1
                                                            0 ********r0=r0x4**
                                                            *ÔËÐÐ´úÂëµÄµØÖ·****
                                                            *******************
                                                            ***************
   51 000002EE F8DA F484       ldr              pc,nexttimeout
  169 000002F2         ;-------------------------------------------------------
                       ---------------------
  170 000002F2         _1D                                  ;   ORA $nnnn,X
  171 000002F2         ;-------------------------------------------------------
                       ---------------------
  172 000002F2                 doAIX
  236 000002F2 00000004 
                       _type   SETA             _ABS
  237 000002F2 F819 CB01       ldrb             addy,[m6502_pc],#1
  238 000002F6 F819 0B01       ldrb             r0,[m6502_pc],#1
  239 000002FA EA4C 2C00       orr              addy,addy,r0,lsl#8
  240 000002FE EB0C 6C16       add              addy,addy,m6502_x,lsr#24
  241 00000302         ; bic addy,addy,#0xff0000 ;Base Wars needs this
  173 00000302                 opORA
  455 00000302                 readmem
  108 00000302                 [                _type = _ABS
  109 00000302                 readmemabs
   69 00000302 F40C 4160       and              r1,addy,#0xE000
   70 00000306 F20F 0E0A       adr              lr,%F0
   71 0000030A         ;// ldr pc,[m6502_rmem,r1,lsr#11] ;//in: addy,r1=addy&0x
                       E000 (for rom_R)
   72 0000030A EA4F 21D1       lsr              r1,r1,#11   ;//¸Ä¹ý£¬¼Ó2ÐÐ  >>1
                                                            1
   73 0000030E F854 F001       ldr              pc,[m6502_rmem,r1]
   74 00000312         
   75 00000312         0                                    ;//out: r0=val (bit
                                                            s 8-31=0 (LSR,ROR,I
                                                            NC,DEC,ASL)), addy 
                                                            preserved for RMW i
                                                            nstructions
  110 00000312                 ]
  111 00000312                 [                _type = _ZP
  113                          ]
  114 00000312                 [                _type = _ZPI
  116                          ]
  117 00000312                 [                _type = _IMM
  119                          ]
  456 00000312 EA45 6500       orr              m6502_a,m6502_a,r0,lsl#24
  457 00000316 EA4F 6325       mov              m6502_nz,m6502_a,asr#24
  174 0000031A                 fetch            4
   47 0000031A F5B8 6880       subs             cycles,cycles,#4*256 ;//CYCLE=2
                                                            56 ;// 3*256 ÕýÊý»ò
                                                            0¾ÍÖ´ÐÐÏÂ2ÌõÖ¸Áî  
   48 0000031E         ;// subs cycles,cycles,#$count  ;//   r8=r8-#$count
   49 0000031E BF5C F819 
              0B01             ldrplb           r0,[m6502_pc],#1 ; //´Ó´æ´¢Æ÷ÖÐ
                                                            ¼ÓÔØ×Ö½Úµ½Ò»¸ö¼Ä´æÆ
                                                            ÷ÖÐ  r0=²Ù×÷Âë
   50 00000324 F85A F020       ldrpl            pc,[m6502_optbl,r0,lsl#2] ;//r1



ARM Macro Assembler    Page 26 


                                                            0 ********r0=r0x4**
                                                            *ÔËÐÐ´úÂëµÄµØÖ·****
                                                            *******************
                                                            ***************
   51 00000328 F8DA F484       ldr              pc,nexttimeout
  175 0000032C         ;-------------------------------------------------------
                       ---------------------
  176 0000032C         _1E                                  ;   ASL $nnnn,X
  177 0000032C         ;-------------------------------------------------------
                       ---------------------
  178 0000032C                 doAIX
  236 0000032C 00000004 
                       _type   SETA             _ABS
  237 0000032C F819 CB01       ldrb             addy,[m6502_pc],#1
  238 00000330 F819 0B01       ldrb             r0,[m6502_pc],#1
  239 00000334 EA4C 2C00       orr              addy,addy,r0,lsl#8
  240 00000338 EB0C 6C16       add              addy,addy,m6502_x,lsr#24
  241 0000033C         ; bic addy,addy,#0xff0000 ;Base Wars needs this
  179 0000033C                 opASL
  370 0000033C                 readmem
  108 0000033C                 [                _type = _ABS
  109 0000033C                 readmemabs
   69 0000033C F40C 4160       and              r1,addy,#0xE000
   70 00000340 F20F 0E08       adr              lr,%F0
   71 00000344         ;// ldr pc,[m6502_rmem,r1,lsr#11] ;//in: addy,r1=addy&0x
                       E000 (for rom_R)
   72 00000344 EA4F 21D1       lsr              r1,r1,#11   ;//¸Ä¹ý£¬¼Ó2ÐÐ  >>1
                                                            1
   73 00000348 F854 F001       ldr              pc,[m6502_rmem,r1]
   74 0000034C         
   75 0000034C         0                                    ;//out: r0=val (bit
                                                            s 8-31=0 (LSR,ROR,I
                                                            NC,DEC,ASL)), addy 
                                                            preserved for RMW i
                                                            nstructions
  110 0000034C                 ]
  111 0000034C                 [                _type = _ZP
  113                          ]
  114 0000034C                 [                _type = _ZPI
  116                          ]
  117 0000034C                 [                _type = _IMM
  119                          ]
  371 0000034C 4400            add              r0,r0,r0
  372 0000034E EA50 6300       orrs             m6502_nz,r0,r0,lsl#24 ;NZ
  373 00000352 F048 0801       orr              cycles,cycles,#CYC_C ;Prepare C
                                                            
  374 00000356                 writemem
  165 00000356                 [                _type = _ABS
  166 00000356                 writememabs
  139 00000356 F40C 4160       and              r1,addy,#0xe000
  140 0000035A F50A 6284       adr              r2,writemem_tbl
  141 0000035E F20F 0E0A       adr              lr,%F0
  142 00000362         ;// ldr pc,[r2,r1,lsr#11] ;//in: addy,r0=val(bits 8-31=?
                       )
  143 00000362 EA4F 21D1       lsr              r1,r1,#11   ;//¸Ä¹ý£¬¼Ó2ÐÐ >>11
                                                            
  144 00000366 F852 F001       ldr              pc,[r2,r1]
  145 0000036A         
  146 0000036A         0                                    ;out: r0,r1,r2,addy



ARM Macro Assembler    Page 27 


                                                            =?
  167 0000036A                 ]
  168 0000036A                 [                _type = _ZP
  170                          ]
  171 0000036A                 [                _type = _ZPI
  173                          ]
  180 0000036A                 fetch_c          7
   56 0000036A F578 68E0       sbcs             cycles,cycles,#7*256 
                                                            ;//CYCLE=256
   57 0000036E BF5C F819 
              0B01             ldrplb           r0,[m6502_pc],#1
   58 00000374 F85A F020       ldrpl            pc,[m6502_optbl,r0,lsl#2]
   59 00000378 F8DA F484       ldr              pc,nexttimeout
  181 0000037C         ;-------------------------------------------------------
                       ---------------------
  182 0000037C         _20                                  ;   JSR $nnnn
  183 0000037C         ;-------------------------------------------------------
                       ---------------------
  184 0000037C F819 2B01       ldrb             r2,[m6502_pc],#1
  185 00000380 F8DA 1480       ldr              r1,lastbank
  186 00000384 EBA9 0001       sub              r0,m6502_pc,r1
  187 00000388 F899 1000       ldrb             r1,[m6502_pc]
  188 0000038C EA42 2901       orr              m6502_pc,r2,r1,lsl#8
  189 00000390                 push16
  179 00000390 EA4F 2110       mov              r1,r0,lsr#8
  180 00000394 F8DA 247C       ldr              r2,m6502_s
  181 00000398 F802 1901       strb             r1,[r2],#-1
  182 0000039C F442 7280       orr              r2,r2,#0x100
  183 000003A0 F802 0901       strb             r0,[r2],#-1
  184 000003A4 F88A 247C       strb             r2,m6502_s
  190 000003A8                 encodePC
   15 000003A8 F409 4160       and              r1,m6502_pc,#0xE000 ;//r9ºÍ0xe0
                                                            00°´Î»ÓëÔËËã
   16 000003AC F50A 6288       adr              r2,memmap_tbl ;//°Ñ´æ´¢Æ÷Ó³ÏóµØ
                                                            Ö·¼ÓÔØµ½r2
   17 000003B0         ;// ldr r0,[r2,r1,lsr#11]    ;//¸Ä¹ý£¬¼Ó2ÐÐ 
   18 000003B0 EA4F 20D1       lsr              r0,r1,#11   ;//>>11Î»   r1/2048
                                                            
   19 000003B4 5810            ldr              r0,[r2,r0]  ;//¶ÁÈ¡r2µØÖ·+r1Æ«Ò
                                                            ÆµÄÊý¾Ýµ½r0
   20 000003B6         
   21 000003B6         
   22 000003B6 F8CA 0480       str              r0,lastbank ;//±£´æ6502PC´Ó ROM
                                                            µÄ×îºóÆ«ÒÆÁ¿ 
   23 000003BA 4481            add              m6502_pc,m6502_pc,r0 
                                                            ;//m6502_pc+r0
  191 000003BC                 fetch            6
   47 000003BC F5B8 68C0       subs             cycles,cycles,#6*256 ;//CYCLE=2
                                                            56 ;// 3*256 ÕýÊý»ò
                                                            0¾ÍÖ´ÐÐÏÂ2ÌõÖ¸Áî  
   48 000003C0         ;// subs cycles,cycles,#$count  ;//   r8=r8-#$count
   49 000003C0 BF5C F819 
              0B01             ldrplb           r0,[m6502_pc],#1 ; //´Ó´æ´¢Æ÷ÖÐ
                                                            ¼ÓÔØ×Ö½Úµ½Ò»¸ö¼Ä´æÆ
                                                            ÷ÖÐ  r0=²Ù×÷Âë
   50 000003C6 F85A F020       ldrpl            pc,[m6502_optbl,r0,lsl#2] ;//r1
                                                            0 ********r0=r0x4**
                                                            *ÔËÐÐ´úÂëµÄµØÖ·****
                                                            *******************



ARM Macro Assembler    Page 28 


                                                            ***************
   51 000003CA F8DA F484       ldr              pc,nexttimeout
  192 000003CE         ;-------------------------------------------------------
                       ---------------------
  193 000003CE         _21                                  ;   AND ($nn,X)
  194 000003CE         ;-------------------------------------------------------
                       ---------------------
  195 000003CE                 doIIX
  261 000003CE 00000004 
                       _type   SETA             _ABS
  262 000003CE F819 0B01       ldrb             r0,[m6502_pc],#1
  263 000003D2 EB06 6000       add              r0,m6502_x,r0,lsl#24
  264 000003D6         ;//ldrb addy,[cpu_zpage,r0,lsr#24] ;//´íÎó:Ö¸¶¨µÄ×ª±ä²»Ô
                       ÊÐí
  265 000003D6 EA4F 6C10       lsr              addy,r0,#24 ;//¸Ä¹ý£¬¼Ó2ÐÐ >>24
                                                            
  266 000003DA F81B C00C       ldrb             addy,[cpu_zpage,addy]
  267 000003DE         
  268 000003DE F100 7080       add              r0,r0,#0x01000000
  269 000003E2         ;//ldrb r1,[cpu_zpage,r0,lsr#24] ;//R1,LSR#2;½«R1ÖÐµÄÄÚÈ
                       ÝÓÒÒÆ2Î»
  270 000003E2 EA4F 6110       lsr              r1,r0,#24   ;//¸Ä¹ý£¬¼Ó2ÐÐ
  271 000003E6 F81B 1001       ldrb             r1,[cpu_zpage,r1]
  272 000003EA         
  273 000003EA EA4C 2C01       orr              addy,addy,r1,lsl#8
  196 000003EE                 opAND
  363 000003EE                 readmem
  108 000003EE                 [                _type = _ABS
  109 000003EE                 readmemabs
   69 000003EE F40C 4160       and              r1,addy,#0xE000
   70 000003F2 F20F 0E0A       adr              lr,%F0
   71 000003F6         ;// ldr pc,[m6502_rmem,r1,lsr#11] ;//in: addy,r1=addy&0x
                       E000 (for rom_R)
   72 000003F6 EA4F 21D1       lsr              r1,r1,#11   ;//¸Ä¹ý£¬¼Ó2ÐÐ  >>1
                                                            1
   73 000003FA F854 F001       ldr              pc,[m6502_rmem,r1]
   74 000003FE         
   75 000003FE         0                                    ;//out: r0=val (bit
                                                            s 8-31=0 (LSR,ROR,I
                                                            NC,DEC,ASL)), addy 
                                                            preserved for RMW i
                                                            nstructions
  110 000003FE                 ]
  111 000003FE                 [                _type = _ZP
  113                          ]
  114 000003FE                 [                _type = _ZPI
  116                          ]
  117 000003FE                 [                _type = _IMM
  119                          ]
  364 000003FE EA05 6500       and              m6502_a,m6502_a,r0,lsl#24
  365 00000402 EA4F 6325       mov              m6502_nz,m6502_a,asr#24 ;NZ
  197 00000406                 fetch            6
   47 00000406 F5B8 68C0       subs             cycles,cycles,#6*256 ;//CYCLE=2
                                                            56 ;// 3*256 ÕýÊý»ò
                                                            0¾ÍÖ´ÐÐÏÂ2ÌõÖ¸Áî  
   48 0000040A         ;// subs cycles,cycles,#$count  ;//   r8=r8-#$count
   49 0000040A BF5C F819 
              0B01             ldrplb           r0,[m6502_pc],#1 ; //´Ó´æ´¢Æ÷ÖÐ
                                                            ¼ÓÔØ×Ö½Úµ½Ò»¸ö¼Ä´æÆ



ARM Macro Assembler    Page 29 


                                                            ÷ÖÐ  r0=²Ù×÷Âë
   50 00000410 F85A F020       ldrpl            pc,[m6502_optbl,r0,lsl#2] ;//r1
                                                            0 ********r0=r0x4**
                                                            *ÔËÐÐ´úÂëµÄµØÖ·****
                                                            *******************
                                                            ***************
   51 00000414 F8DA F484       ldr              pc,nexttimeout
  198 00000418         ;-------------------------------------------------------
                       ---------------------
  199 00000418         _24                                  ;   BIT $nn
  200 00000418         ;-------------------------------------------------------
                       ---------------------
  201 00000418                 doZ
  308 00000418 00000002 
                       _type   SETA             _ZP
  309 00000418 F819 CB01       ldrb             addy,[m6502_pc],#1
  202 0000041C                 opBIT
  379 0000041C                 readmem
  108 0000041C                 [                _type = _ABS
  110                          ]
  111 0000041C                 [                _type = _ZP
  112 0000041C                 readmemzp
   80 0000041C F81B 000C       ldrb             r0,[cpu_zpage,addy]
  113 00000420                 ]
  114 00000420                 [                _type = _ZPI
  116                          ]
  117 00000420                 [                _type = _IMM
  119                          ]
  380 00000420 F028 0840       bic              cycles,cycles,#CYC_V ;reset V
  381 00000424 F010 0F40       tst              r0,#V
  382 00000428 BF18 F048 
              0840             orrne            cycles,cycles,#CYC_V ;V
  383 0000042E EA00 6315       and              m6502_nz,r0,m6502_a,lsr#24 ;Z
  384 00000432 EA43 6300       orr              m6502_nz,m6502_nz,r0,lsl#24 ;N
  203 00000436                 fetch            3
   47 00000436 F5B8 7840       subs             cycles,cycles,#3*256 ;//CYCLE=2
                                                            56 ;// 3*256 ÕýÊý»ò
                                                            0¾ÍÖ´ÐÐÏÂ2ÌõÖ¸Áî  
   48 0000043A         ;// subs cycles,cycles,#$count  ;//   r8=r8-#$count
   49 0000043A BF5C F819 
              0B01             ldrplb           r0,[m6502_pc],#1 ; //´Ó´æ´¢Æ÷ÖÐ
                                                            ¼ÓÔØ×Ö½Úµ½Ò»¸ö¼Ä´æÆ
                                                            ÷ÖÐ  r0=²Ù×÷Âë
   50 00000440 F85A F020       ldrpl            pc,[m6502_optbl,r0,lsl#2] ;//r1
                                                            0 ********r0=r0x4**
                                                            *ÔËÐÐ´úÂëµÄµØÖ·****
                                                            *******************
                                                            ***************
   51 00000444 F8DA F484       ldr              pc,nexttimeout
  204 00000448         ;-------------------------------------------------------
                       ---------------------
  205 00000448         _25                                  ;   AND $nn
  206 00000448         ;-------------------------------------------------------
                       ---------------------
  207 00000448                 doZ
  308 00000448 00000002 
                       _type   SETA             _ZP
  309 00000448 F819 CB01       ldrb             addy,[m6502_pc],#1
  208 0000044C                 opAND



ARM Macro Assembler    Page 30 


  363 0000044C                 readmem
  108 0000044C                 [                _type = _ABS
  110                          ]
  111 0000044C                 [                _type = _ZP
  112 0000044C                 readmemzp
   80 0000044C F81B 000C       ldrb             r0,[cpu_zpage,addy]
  113 00000450                 ]
  114 00000450                 [                _type = _ZPI
  116                          ]
  117 00000450                 [                _type = _IMM
  119                          ]
  364 00000450 EA05 6500       and              m6502_a,m6502_a,r0,lsl#24
  365 00000454 EA4F 6325       mov              m6502_nz,m6502_a,asr#24 ;NZ
  209 00000458                 fetch            3
   47 00000458 F5B8 7840       subs             cycles,cycles,#3*256 ;//CYCLE=2
                                                            56 ;// 3*256 ÕýÊý»ò
                                                            0¾ÍÖ´ÐÐÏÂ2ÌõÖ¸Áî  
   48 0000045C         ;// subs cycles,cycles,#$count  ;//   r8=r8-#$count
   49 0000045C BF5C F819 
              0B01             ldrplb           r0,[m6502_pc],#1 ; //´Ó´æ´¢Æ÷ÖÐ
                                                            ¼ÓÔØ×Ö½Úµ½Ò»¸ö¼Ä´æÆ
                                                            ÷ÖÐ  r0=²Ù×÷Âë
   50 00000462 F85A F020       ldrpl            pc,[m6502_optbl,r0,lsl#2] ;//r1
                                                            0 ********r0=r0x4**
                                                            *ÔËÐÐ´úÂëµÄµØÖ·****
                                                            *******************
                                                            ***************
   51 00000466 F8DA F484       ldr              pc,nexttimeout
  210 0000046A         ;-------------------------------------------------------
                       ---------------------
  211 0000046A         _26                                  ;   ROL $nn
  212 0000046A         ;-------------------------------------------------------
                       ---------------------
  213 0000046A                 doZ
  308 0000046A 00000002 
                       _type   SETA             _ZP
  309 0000046A F819 CB01       ldrb             addy,[m6502_pc],#1
  214 0000046E                 opROL
  462 0000046E                 readmem
  108 0000046E                 [                _type = _ABS
  110                          ]
  111 0000046E                 [                _type = _ZP
  112 0000046E                 readmemzp
   80 0000046E F81B 000C       ldrb             r0,[cpu_zpage,addy]
  113 00000472                 ]
  114 00000472                 [                _type = _ZPI
  116                          ]
  117 00000472                 [                _type = _IMM
  119                          ]
  463 00000472 EA5F 0858       movs             cycles,cycles,lsr#1 ;get C
  464 00000476 EB40 0000       adc              r0,r0,r0
  465 0000047A EA50 6300       orrs             m6502_nz,r0,r0,lsl#24 ;NZ
  466 0000047E EB48 0808       adc              cycles,cycles,cycles ;Set C
  467 00000482                 writemem
  165 00000482                 [                _type = _ABS
  167                          ]
  168 00000482                 [                _type = _ZP
  169 00000482                 writememzp
  151 00000482 F80B 000C       strb             r0,[cpu_zpage,addy]



ARM Macro Assembler    Page 31 


  170 00000486                 ]
  171 00000486                 [                _type = _ZPI
  173                          ]
  215 00000486                 fetch            5
   47 00000486 F5B8 68A0       subs             cycles,cycles,#5*256 ;//CYCLE=2
                                                            56 ;// 3*256 ÕýÊý»ò
                                                            0¾ÍÖ´ÐÐÏÂ2ÌõÖ¸Áî  
   48 0000048A         ;// subs cycles,cycles,#$count  ;//   r8=r8-#$count
   49 0000048A BF5C F819 
              0B01             ldrplb           r0,[m6502_pc],#1 ; //´Ó´æ´¢Æ÷ÖÐ
                                                            ¼ÓÔØ×Ö½Úµ½Ò»¸ö¼Ä´æÆ
                                                            ÷ÖÐ  r0=²Ù×÷Âë
   50 00000490 F85A F020       ldrpl            pc,[m6502_optbl,r0,lsl#2] ;//r1
                                                            0 ********r0=r0x4**
                                                            *ÔËÐÐ´úÂëµÄµØÖ·****
                                                            *******************
                                                            ***************
   51 00000494 F8DA F484       ldr              pc,nexttimeout
  216 00000498         ;-------------------------------------------------------
                       ---------------------
  217 00000498         _28                                  ;   PLP
  218 00000498         ;-------------------------------------------------------
                       ---------------------
  219 00000498                 pop8             r0
  208 00000498 F89A 247C       ldrb             r2,m6502_s
  209 0000049C F102 0201       add              r2,r2,#1
  210 000004A0 F88A 247C       strb             r2,m6502_s
  211 000004A4 F442 7280       orr              r2,r2,#0x100
  212 000004A8 F91B 0002       ldrsb            r0,[cpu_zpage,r2] ;signed for P
                                                            LA & PLP
  213 000004AC         
  220 000004AC                 decodeP
   38 000004AC F028 084D       bic              cycles,cycles,#CYC_V+CYC_D+CYC_
I+CYC_C
   39 000004B0 F000 014D       and              r1,r0,#V+D+I+C
   40 000004B4 EA48 0801       orr              cycles,cycles,r1 ;//VDIC
   41 000004B8 F020 03FD       bic              m6502_nz,r0,#0xFD 
                                                            ;//r0 is signed
   42 000004BC F083 0302       eor              m6502_nz,m6502_nz,#Z
  221 000004C0                 fetch            4
   47 000004C0 F5B8 6880       subs             cycles,cycles,#4*256 ;//CYCLE=2
                                                            56 ;// 3*256 ÕýÊý»ò
                                                            0¾ÍÖ´ÐÐÏÂ2ÌõÖ¸Áî  
   48 000004C4         ;// subs cycles,cycles,#$count  ;//   r8=r8-#$count
   49 000004C4 BF5C F819 
              0B01             ldrplb           r0,[m6502_pc],#1 ; //´Ó´æ´¢Æ÷ÖÐ
                                                            ¼ÓÔØ×Ö½Úµ½Ò»¸ö¼Ä´æÆ
                                                            ÷ÖÐ  r0=²Ù×÷Âë
   50 000004CA F85A F020       ldrpl            pc,[m6502_optbl,r0,lsl#2] ;//r1
                                                            0 ********r0=r0x4**
                                                            *ÔËÐÐ´úÂëµÄµØÖ·****
                                                            *******************
                                                            ***************
   51 000004CE F8DA F484       ldr              pc,nexttimeout
  222 000004D2         ;-------------------------------------------------------
                       ---------------------
  223 000004D2         _29                                  ;   AND #$nn
  224 000004D2         ;-------------------------------------------------------
                       ---------------------



ARM Macro Assembler    Page 32 


  225 000004D2                 doIMM
  256 000004D2 00000001 
                       _type   SETA             _IMM
  226 000004D2                 opAND
  363 000004D2                 readmem
  108 000004D2                 [                _type = _ABS
  110                          ]
  111 000004D2                 [                _type = _ZP
  113                          ]
  114 000004D2                 [                _type = _ZPI
  116                          ]
  117 000004D2                 [                _type = _IMM
  118 000004D2                 readmemimm
   98 000004D2 F819 0B01       ldrb             r0,[m6502_pc],#1
  119 000004D6                 ]
  364 000004D6 EA05 6500       and              m6502_a,m6502_a,r0,lsl#24
  365 000004DA EA4F 6325       mov              m6502_nz,m6502_a,asr#24 ;NZ
  227 000004DE                 fetch            2
   47 000004DE F5B8 7800       subs             cycles,cycles,#2*256 ;//CYCLE=2
                                                            56 ;// 3*256 ÕýÊý»ò
                                                            0¾ÍÖ´ÐÐÏÂ2ÌõÖ¸Áî  
   48 000004E2         ;// subs cycles,cycles,#$count  ;//   r8=r8-#$count
   49 000004E2 BF5C F819 
              0B01             ldrplb           r0,[m6502_pc],#1 ; //´Ó´æ´¢Æ÷ÖÐ
                                                            ¼ÓÔØ×Ö½Úµ½Ò»¸ö¼Ä´æÆ
                                                            ÷ÖÐ  r0=²Ù×÷Âë
   50 000004E8 F85A F020       ldrpl            pc,[m6502_optbl,r0,lsl#2] ;//r1
                                                            0 ********r0=r0x4**
                                                            *ÔËÐÐ´úÂëµÄµØÖ·****
                                                            *******************
                                                            ***************
   51 000004EC F8DA F484       ldr              pc,nexttimeout
  228 000004F0         ;-------------------------------------------------------
                       ---------------------
  229 000004F0         _2A                                  ;   ROL
  230 000004F0         ;-------------------------------------------------------
                       ---------------------
  231 000004F0 EA5F 0858       movs             cycles,cycles,lsr#1 ;get C
  232 000004F4 BF28 F445 
              0500             orrcs            m6502_a,m6502_a,#0x00800000
  233 000004FA 196D            adds             m6502_a,m6502_a,m6502_a
  234 000004FC EA4F 6325       mov              m6502_nz,m6502_a,asr#24 ;NZ
  235 00000500 EB48 0808       adc              cycles,cycles,cycles ;Set C
  236 00000504                 fetch            2
   47 00000504 F5B8 7800       subs             cycles,cycles,#2*256 ;//CYCLE=2
                                                            56 ;// 3*256 ÕýÊý»ò
                                                            0¾ÍÖ´ÐÐÏÂ2ÌõÖ¸Áî  
   48 00000508         ;// subs cycles,cycles,#$count  ;//   r8=r8-#$count
   49 00000508 BF5C F819 
              0B01             ldrplb           r0,[m6502_pc],#1 ; //´Ó´æ´¢Æ÷ÖÐ
                                                            ¼ÓÔØ×Ö½Úµ½Ò»¸ö¼Ä´æÆ
                                                            ÷ÖÐ  r0=²Ù×÷Âë
   50 0000050E F85A F020       ldrpl            pc,[m6502_optbl,r0,lsl#2] ;//r1
                                                            0 ********r0=r0x4**
                                                            *ÔËÐÐ´úÂëµÄµØÖ·****
                                                            *******************
                                                            ***************
   51 00000512 F8DA F484       ldr              pc,nexttimeout
  237 00000516         ;-------------------------------------------------------



ARM Macro Assembler    Page 33 


                       ---------------------
  238 00000516         _2C                                  ;   BIT $nnnn
  239 00000516         ;-------------------------------------------------------
                       ---------------------
  240 00000516                 doABS
  228 00000516 00000004 
                       _type   SETA             _ABS
  229 00000516 F819 CB01       ldrb             addy,[m6502_pc],#1
  230 0000051A F819 0B01       ldrb             r0,[m6502_pc],#1
  231 0000051E EA4C 2C00       orr              addy,addy,r0,lsl#8
  241 00000522                 opBIT
  379 00000522                 readmem
  108 00000522                 [                _type = _ABS
  109 00000522                 readmemabs
   69 00000522 F40C 4160       and              r1,addy,#0xE000
   70 00000526 F20F 0E0A       adr              lr,%F0
   71 0000052A         ;// ldr pc,[m6502_rmem,r1,lsr#11] ;//in: addy,r1=addy&0x
                       E000 (for rom_R)
   72 0000052A EA4F 21D1       lsr              r1,r1,#11   ;//¸Ä¹ý£¬¼Ó2ÐÐ  >>1
                                                            1
   73 0000052E F854 F001       ldr              pc,[m6502_rmem,r1]
   74 00000532         
   75 00000532         0                                    ;//out: r0=val (bit
                                                            s 8-31=0 (LSR,ROR,I
                                                            NC,DEC,ASL)), addy 
                                                            preserved for RMW i
                                                            nstructions
  110 00000532                 ]
  111 00000532                 [                _type = _ZP
  113                          ]
  114 00000532                 [                _type = _ZPI
  116                          ]
  117 00000532                 [                _type = _IMM
  119                          ]
  380 00000532 F028 0840       bic              cycles,cycles,#CYC_V ;reset V
  381 00000536 F010 0F40       tst              r0,#V
  382 0000053A BF18 F048 
              0840             orrne            cycles,cycles,#CYC_V ;V
  383 00000540 EA00 6315       and              m6502_nz,r0,m6502_a,lsr#24 ;Z
  384 00000544 EA43 6300       orr              m6502_nz,m6502_nz,r0,lsl#24 ;N
  242 00000548                 fetch            4
   47 00000548 F5B8 6880       subs             cycles,cycles,#4*256 ;//CYCLE=2
                                                            56 ;// 3*256 ÕýÊý»ò
                                                            0¾ÍÖ´ÐÐÏÂ2ÌõÖ¸Áî  
   48 0000054C         ;// subs cycles,cycles,#$count  ;//   r8=r8-#$count
   49 0000054C BF5C F819 
              0B01             ldrplb           r0,[m6502_pc],#1 ; //´Ó´æ´¢Æ÷ÖÐ
                                                            ¼ÓÔØ×Ö½Úµ½Ò»¸ö¼Ä´æÆ
                                                            ÷ÖÐ  r0=²Ù×÷Âë
   50 00000552 F85A F020       ldrpl            pc,[m6502_optbl,r0,lsl#2] ;//r1
                                                            0 ********r0=r0x4**
                                                            *ÔËÐÐ´úÂëµÄµØÖ·****
                                                            *******************
                                                            ***************
   51 00000556 F8DA F484       ldr              pc,nexttimeout
  243 0000055A         ;-------------------------------------------------------
                       ---------------------
  244 0000055A         _2D                                  ;   AND $nnnn
  245 0000055A         ;-------------------------------------------------------



ARM Macro Assembler    Page 34 


                       ---------------------
  246 0000055A                 doABS
  228 0000055A 00000004 
                       _type   SETA             _ABS
  229 0000055A F819 CB01       ldrb             addy,[m6502_pc],#1
  230 0000055E F819 0B01       ldrb             r0,[m6502_pc],#1
  231 00000562 EA4C 2C00       orr              addy,addy,r0,lsl#8
  247 00000566                 opAND
  363 00000566                 readmem
  108 00000566                 [                _type = _ABS
  109 00000566                 readmemabs
   69 00000566 F40C 4160       and              r1,addy,#0xE000
   70 0000056A F20F 0E0A       adr              lr,%F0
   71 0000056E         ;// ldr pc,[m6502_rmem,r1,lsr#11] ;//in: addy,r1=addy&0x
                       E000 (for rom_R)
   72 0000056E EA4F 21D1       lsr              r1,r1,#11   ;//¸Ä¹ý£¬¼Ó2ÐÐ  >>1
                                                            1
   73 00000572 F854 F001       ldr              pc,[m6502_rmem,r1]
   74 00000576         
   75 00000576         0                                    ;//out: r0=val (bit
                                                            s 8-31=0 (LSR,ROR,I
                                                            NC,DEC,ASL)), addy 
                                                            preserved for RMW i
                                                            nstructions
  110 00000576                 ]
  111 00000576                 [                _type = _ZP
  113                          ]
  114 00000576                 [                _type = _ZPI
  116                          ]
  117 00000576                 [                _type = _IMM
  119                          ]
  364 00000576 EA05 6500       and              m6502_a,m6502_a,r0,lsl#24
  365 0000057A EA4F 6325       mov              m6502_nz,m6502_a,asr#24 ;NZ
  248 0000057E                 fetch            4
   47 0000057E F5B8 6880       subs             cycles,cycles,#4*256 ;//CYCLE=2
                                                            56 ;// 3*256 ÕýÊý»ò
                                                            0¾ÍÖ´ÐÐÏÂ2ÌõÖ¸Áî  
   48 00000582         ;// subs cycles,cycles,#$count  ;//   r8=r8-#$count
   49 00000582 BF5C F819 
              0B01             ldrplb           r0,[m6502_pc],#1 ; //´Ó´æ´¢Æ÷ÖÐ
                                                            ¼ÓÔØ×Ö½Úµ½Ò»¸ö¼Ä´æÆ
                                                            ÷ÖÐ  r0=²Ù×÷Âë
   50 00000588 F85A F020       ldrpl            pc,[m6502_optbl,r0,lsl#2] ;//r1
                                                            0 ********r0=r0x4**
                                                            *ÔËÐÐ´úÂëµÄµØÖ·****
                                                            *******************
                                                            ***************
   51 0000058C F8DA F484       ldr              pc,nexttimeout
  249 00000590         ;-------------------------------------------------------
                       ---------------------
  250 00000590         _2E                                  ;   ROL $nnnn
  251 00000590         ;-------------------------------------------------------
                       ---------------------
  252 00000590                 doABS
  228 00000590 00000004 
                       _type   SETA             _ABS
  229 00000590 F819 CB01       ldrb             addy,[m6502_pc],#1
  230 00000594 F819 0B01       ldrb             r0,[m6502_pc],#1
  231 00000598 EA4C 2C00       orr              addy,addy,r0,lsl#8



ARM Macro Assembler    Page 35 


  253 0000059C                 opROL
  462 0000059C                 readmem
  108 0000059C                 [                _type = _ABS
  109 0000059C                 readmemabs
   69 0000059C F40C 4160       and              r1,addy,#0xE000
   70 000005A0 F20F 0E08       adr              lr,%F0
   71 000005A4         ;// ldr pc,[m6502_rmem,r1,lsr#11] ;//in: addy,r1=addy&0x
                       E000 (for rom_R)
   72 000005A4 EA4F 21D1       lsr              r1,r1,#11   ;//¸Ä¹ý£¬¼Ó2ÐÐ  >>1
                                                            1
   73 000005A8 F854 F001       ldr              pc,[m6502_rmem,r1]
   74 000005AC         
   75 000005AC         0                                    ;//out: r0=val (bit
                                                            s 8-31=0 (LSR,ROR,I
                                                            NC,DEC,ASL)), addy 
                                                            preserved for RMW i
                                                            nstructions
  110 000005AC                 ]
  111 000005AC                 [                _type = _ZP
  113                          ]
  114 000005AC                 [                _type = _ZPI
  116                          ]
  117 000005AC                 [                _type = _IMM
  119                          ]
  463 000005AC EA5F 0858       movs             cycles,cycles,lsr#1 ;get C
  464 000005B0 EB40 0000       adc              r0,r0,r0
  465 000005B4 EA50 6300       orrs             m6502_nz,r0,r0,lsl#24 ;NZ
  466 000005B8 EB48 0808       adc              cycles,cycles,cycles ;Set C
  467 000005BC                 writemem
  165 000005BC                 [                _type = _ABS
  166 000005BC                 writememabs
  139 000005BC F40C 4160       and              r1,addy,#0xe000
  140 000005C0 F50A 6284       adr              r2,writemem_tbl
  141 000005C4 F20F 0E08       adr              lr,%F0
  142 000005C8         ;// ldr pc,[r2,r1,lsr#11] ;//in: addy,r0=val(bits 8-31=?
                       )
  143 000005C8 EA4F 21D1       lsr              r1,r1,#11   ;//¸Ä¹ý£¬¼Ó2ÐÐ >>11
                                                            
  144 000005CC F852 F001       ldr              pc,[r2,r1]
  145 000005D0         
  146 000005D0         0                                    ;out: r0,r1,r2,addy
                                                            =?
  167 000005D0                 ]
  168 000005D0                 [                _type = _ZP
  170                          ]
  171 000005D0                 [                _type = _ZPI
  173                          ]
  254 000005D0                 fetch            6
   47 000005D0 F5B8 68C0       subs             cycles,cycles,#6*256 ;//CYCLE=2
                                                            56 ;// 3*256 ÕýÊý»ò
                                                            0¾ÍÖ´ÐÐÏÂ2ÌõÖ¸Áî  
   48 000005D4         ;// subs cycles,cycles,#$count  ;//   r8=r8-#$count
   49 000005D4 BF5C F819 
              0B01             ldrplb           r0,[m6502_pc],#1 ; //´Ó´æ´¢Æ÷ÖÐ
                                                            ¼ÓÔØ×Ö½Úµ½Ò»¸ö¼Ä´æÆ
                                                            ÷ÖÐ  r0=²Ù×÷Âë
   50 000005DA F85A F020       ldrpl            pc,[m6502_optbl,r0,lsl#2] ;//r1
                                                            0 ********r0=r0x4**
                                                            *ÔËÐÐ´úÂëµÄµØÖ·****



ARM Macro Assembler    Page 36 


                                                            *******************
                                                            ***************
   51 000005DE F8DA F484       ldr              pc,nexttimeout
  255 000005E2         ;-------------------------------------------------------
                       ---------------------
  256 000005E2         _30                                  ;   BMI *
  257 000005E2         ;-------------------------------------------------------
                       ---------------------
  258 000005E2 F013 4F00       tst              m6502_nz,#0x80000000
  259 000005E6 F919 0B01       ldrsb            r0,[m6502_pc],#1
  260 000005EA BF1C 4481       addne            m6502_pc,m6502_pc,r0
  261 000005EE         ; subne cycles,cycles,#3*CYCLE
  262 000005EE F5A8 7880       subne            cycles,cycles,#256
  263 000005F2                 fetch            2
   47 000005F2 F5B8 7800       subs             cycles,cycles,#2*256 ;//CYCLE=2
                                                            56 ;// 3*256 ÕýÊý»ò
                                                            0¾ÍÖ´ÐÐÏÂ2ÌõÖ¸Áî  
   48 000005F6         ;// subs cycles,cycles,#$count  ;//   r8=r8-#$count
   49 000005F6 BF5C F819 
              0B01             ldrplb           r0,[m6502_pc],#1 ; //´Ó´æ´¢Æ÷ÖÐ
                                                            ¼ÓÔØ×Ö½Úµ½Ò»¸ö¼Ä´æÆ
                                                            ÷ÖÐ  r0=²Ù×÷Âë
   50 000005FC F85A F020       ldrpl            pc,[m6502_optbl,r0,lsl#2] ;//r1
                                                            0 ********r0=r0x4**
                                                            *ÔËÐÐ´úÂëµÄµØÖ·****
                                                            *******************
                                                            ***************
   51 00000600 F8DA F484       ldr              pc,nexttimeout
  264 00000604         ;-------------------------------------------------------
                       ---------------------
  265 00000604         _31                                  ;   AND ($nn),Y
  266 00000604         ;-------------------------------------------------------
                       ---------------------
  267 00000604                 doIIY
  278 00000604 00000004 
                       _type   SETA             _ABS
  279 00000604 F819 0B01       ldrb             r0,[m6502_pc],#1
  280 00000608         ;// ldrb addy,[r0,cpu_zpage]! ;;ÔÚÊý¾Ý´«ËÍÖ®Ç°,½«Æ«ÒÆÁ¿¼
                       Óµ½Rn ÖÐ,Æä½á¹û×÷Îª´«ËÍÊý¾ÝµÄ´æ´¢µØÖ·
  281 00000608         ;//ÈôÊ¹ÓÃºó×º"!",Ôò½á¹ûÐ´»Øµ½RnÖÐ
  282 00000608 F810 C00B       ldrb             addy,[r0,cpu_zpage]
  283 0000060C 4458            add              r0,r0,cpu_zpage ;//////////////
                                                            ///////////////////
                                                            /////
  284 0000060E         
  285 0000060E         
  286 0000060E 7841            ldrb             r1,[r0,#1]
  287 00000610 EA4C 2C01       orr              addy,addy,r1,lsl#8
  288 00000614 EB0C 6C17       add              addy,addy,m6502_y,lsr#24
  289 00000618         ; bic addy,addy,#0xff0000 ;Zelda2 needs this
  268 00000618                 opAND
  363 00000618                 readmem
  108 00000618                 [                _type = _ABS
  109 00000618                 readmemabs
   69 00000618 F40C 4160       and              r1,addy,#0xE000
   70 0000061C F20F 0E08       adr              lr,%F0
   71 00000620         ;// ldr pc,[m6502_rmem,r1,lsr#11] ;//in: addy,r1=addy&0x
                       E000 (for rom_R)
   72 00000620 EA4F 21D1       lsr              r1,r1,#11   ;//¸Ä¹ý£¬¼Ó2ÐÐ  >>1



ARM Macro Assembler    Page 37 


                                                            1
   73 00000624 F854 F001       ldr              pc,[m6502_rmem,r1]
   74 00000628         
   75 00000628         0                                    ;//out: r0=val (bit
                                                            s 8-31=0 (LSR,ROR,I
                                                            NC,DEC,ASL)), addy 
                                                            preserved for RMW i
                                                            nstructions
  110 00000628                 ]
  111 00000628                 [                _type = _ZP
  113                          ]
  114 00000628                 [                _type = _ZPI
  116                          ]
  117 00000628                 [                _type = _IMM
  119                          ]
  364 00000628 EA05 6500       and              m6502_a,m6502_a,r0,lsl#24
  365 0000062C EA4F 6325       mov              m6502_nz,m6502_a,asr#24 ;NZ
  269 00000630                 fetch            5
   47 00000630 F5B8 68A0       subs             cycles,cycles,#5*256 ;//CYCLE=2
                                                            56 ;// 3*256 ÕýÊý»ò
                                                            0¾ÍÖ´ÐÐÏÂ2ÌõÖ¸Áî  
   48 00000634         ;// subs cycles,cycles,#$count  ;//   r8=r8-#$count
   49 00000634 BF5C F819 
              0B01             ldrplb           r0,[m6502_pc],#1 ; //´Ó´æ´¢Æ÷ÖÐ
                                                            ¼ÓÔØ×Ö½Úµ½Ò»¸ö¼Ä´æÆ
                                                            ÷ÖÐ  r0=²Ù×÷Âë
   50 0000063A F85A F020       ldrpl            pc,[m6502_optbl,r0,lsl#2] ;//r1
                                                            0 ********r0=r0x4**
                                                            *ÔËÐÐ´úÂëµÄµØÖ·****
                                                            *******************
                                                            ***************
   51 0000063E F8DA F484       ldr              pc,nexttimeout
  270 00000642         ;-------------------------------------------------------
                       ---------------------
  271 00000642         _35                                  ;   AND $nn,X
  272 00000642         ;-------------------------------------------------------
                       ---------------------
  273 00000642                 doZIXf
  328 00000642 00000003 
                       _type   SETA             _ZPI
  329 00000642 F819 CB01       ldrb             addy,[m6502_pc],#1
  330 00000646 EB06 6C0C       add              addy,m6502_x,addy,lsl#24
  274 0000064A                 opAND
  363 0000064A                 readmem
  108 0000064A                 [                _type = _ABS
  110                          ]
  111 0000064A                 [                _type = _ZP
  113                          ]
  114 0000064A                 [                _type = _ZPI
  115 0000064A                 readmemzpi
   85 0000064A         ;// ldrb r0,[cpu_zpage,addy,lsr#24]
   86 0000064A EA4F 601C       lsr              r0,addy,#24 ;//¸Ä¹ý£¬¼Ó3ÐÐ
   87 0000064E F81B 0000       ldrb             r0,[cpu_zpage,r0]
   88 00000652         
  116 00000652                 ]
  117 00000652                 [                _type = _IMM
  119                          ]
  364 00000652 EA05 6500       and              m6502_a,m6502_a,r0,lsl#24
  365 00000656 EA4F 6325       mov              m6502_nz,m6502_a,asr#24 ;NZ



ARM Macro Assembler    Page 38 


  275 0000065A                 fetch            4
   47 0000065A F5B8 6880       subs             cycles,cycles,#4*256 ;//CYCLE=2
                                                            56 ;// 3*256 ÕýÊý»ò
                                                            0¾ÍÖ´ÐÐÏÂ2ÌõÖ¸Áî  
   48 0000065E         ;// subs cycles,cycles,#$count  ;//   r8=r8-#$count
   49 0000065E BF5C F819 
              0B01             ldrplb           r0,[m6502_pc],#1 ; //´Ó´æ´¢Æ÷ÖÐ
                                                            ¼ÓÔØ×Ö½Úµ½Ò»¸ö¼Ä´æÆ
                                                            ÷ÖÐ  r0=²Ù×÷Âë
   50 00000664 F85A F020       ldrpl            pc,[m6502_optbl,r0,lsl#2] ;//r1
                                                            0 ********r0=r0x4**
                                                            *ÔËÐÐ´úÂëµÄµØÖ·****
                                                            *******************
                                                            ***************
   51 00000668 F8DA F484       ldr              pc,nexttimeout
  276 0000066C         ;-------------------------------------------------------
                       ---------------------
  277 0000066C         _36                                  ;   ROL $nn,X
  278 0000066C         ;-------------------------------------------------------
                       ---------------------
  279 0000066C                 doZIXf
  328 0000066C 00000003 
                       _type   SETA             _ZPI
  329 0000066C F819 CB01       ldrb             addy,[m6502_pc],#1
  330 00000670 EB06 6C0C       add              addy,m6502_x,addy,lsl#24
  280 00000674                 opROL
  462 00000674                 readmem
  108 00000674                 [                _type = _ABS
  110                          ]
  111 00000674                 [                _type = _ZP
  113                          ]
  114 00000674                 [                _type = _ZPI
  115 00000674                 readmemzpi
   85 00000674         ;// ldrb r0,[cpu_zpage,addy,lsr#24]
   86 00000674 EA4F 601C       lsr              r0,addy,#24 ;//¸Ä¹ý£¬¼Ó3ÐÐ
   87 00000678 F81B 0000       ldrb             r0,[cpu_zpage,r0]
   88 0000067C         
  116 0000067C                 ]
  117 0000067C                 [                _type = _IMM
  119                          ]
  463 0000067C EA5F 0858       movs             cycles,cycles,lsr#1 ;get C
  464 00000680 EB40 0000       adc              r0,r0,r0
  465 00000684 EA50 6300       orrs             m6502_nz,r0,r0,lsl#24 ;NZ
  466 00000688 EB48 0808       adc              cycles,cycles,cycles ;Set C
  467 0000068C                 writemem
  165 0000068C                 [                _type = _ABS
  167                          ]
  168 0000068C                 [                _type = _ZP
  170                          ]
  171 0000068C                 [                _type = _ZPI
  172 0000068C                 writememzpi
  156 0000068C         ;// strb r0,[cpu_zpage,addy,lsr#24]
  157 0000068C EA4F 611C       lsr              r1,addy,#24 ;//¸Ä¹ý£¬¼Ó2ÐÐ  >>2
                                                            4
  158 00000690 F80B 0001       strb             r0,[cpu_zpage,r1]
  159 00000694         
  160 00000694         
  173 00000694                 ]
  281 00000694                 fetch            6



ARM Macro Assembler    Page 39 


   47 00000694 F5B8 68C0       subs             cycles,cycles,#6*256 ;//CYCLE=2
                                                            56 ;// 3*256 ÕýÊý»ò
                                                            0¾ÍÖ´ÐÐÏÂ2ÌõÖ¸Áî  
   48 00000698         ;// subs cycles,cycles,#$count  ;//   r8=r8-#$count
   49 00000698 BF5C F819 
              0B01             ldrplb           r0,[m6502_pc],#1 ; //´Ó´æ´¢Æ÷ÖÐ
                                                            ¼ÓÔØ×Ö½Úµ½Ò»¸ö¼Ä´æÆ
                                                            ÷ÖÐ  r0=²Ù×÷Âë
   50 0000069E F85A F020       ldrpl            pc,[m6502_optbl,r0,lsl#2] ;//r1
                                                            0 ********r0=r0x4**
                                                            *ÔËÐÐ´úÂëµÄµØÖ·****
                                                            *******************
                                                            ***************
   51 000006A2 F8DA F484       ldr              pc,nexttimeout
  282 000006A6         ;-------------------------------------------------------
                       ---------------------
  283 000006A6         _38                                  ;   SEC
  284 000006A6         ;-------------------------------------------------------
                       ---------------------
  285 000006A6 F048 0801       orr              cycles,cycles,#CYC_C
  286 000006AA                 fetch            2
   47 000006AA F5B8 7800       subs             cycles,cycles,#2*256 ;//CYCLE=2
                                                            56 ;// 3*256 ÕýÊý»ò
                                                            0¾ÍÖ´ÐÐÏÂ2ÌõÖ¸Áî  
   48 000006AE         ;// subs cycles,cycles,#$count  ;//   r8=r8-#$count
   49 000006AE BF5C F819 
              0B01             ldrplb           r0,[m6502_pc],#1 ; //´Ó´æ´¢Æ÷ÖÐ
                                                            ¼ÓÔØ×Ö½Úµ½Ò»¸ö¼Ä´æÆ
                                                            ÷ÖÐ  r0=²Ù×÷Âë
   50 000006B4 F85A F020       ldrpl            pc,[m6502_optbl,r0,lsl#2] ;//r1
                                                            0 ********r0=r0x4**
                                                            *ÔËÐÐ´úÂëµÄµØÖ·****
                                                            *******************
                                                            ***************
   51 000006B8 F8DA F484       ldr              pc,nexttimeout
  287 000006BC         ;-------------------------------------------------------
                       ---------------------
  288 000006BC         _39                                  ;   AND $nnnn,Y
  289 000006BC         ;-------------------------------------------------------
                       ---------------------
  290 000006BC                 doAIY
  246 000006BC 00000004 
                       _type   SETA             _ABS
  247 000006BC F819 CB01       ldrb             addy,[m6502_pc],#1
  248 000006C0 F819 0B01       ldrb             r0,[m6502_pc],#1
  249 000006C4 EA4C 2C00       orr              addy,addy,r0,lsl#8
  250 000006C8 EB0C 6C17       add              addy,addy,m6502_y,lsr#24
  251 000006CC         ; bic addy,addy,#0xff0000 ;Tecmo Bowl needs this
  291 000006CC                 opAND
  363 000006CC                 readmem
  108 000006CC                 [                _type = _ABS
  109 000006CC                 readmemabs
   69 000006CC F40C 4160       and              r1,addy,#0xE000
   70 000006D0 F20F 0E08       adr              lr,%F0
   71 000006D4         ;// ldr pc,[m6502_rmem,r1,lsr#11] ;//in: addy,r1=addy&0x
                       E000 (for rom_R)
   72 000006D4 EA4F 21D1       lsr              r1,r1,#11   ;//¸Ä¹ý£¬¼Ó2ÐÐ  >>1
                                                            1
   73 000006D8 F854 F001       ldr              pc,[m6502_rmem,r1]



ARM Macro Assembler    Page 40 


   74 000006DC         
   75 000006DC         0                                    ;//out: r0=val (bit
                                                            s 8-31=0 (LSR,ROR,I
                                                            NC,DEC,ASL)), addy 
                                                            preserved for RMW i
                                                            nstructions
  110 000006DC                 ]
  111 000006DC                 [                _type = _ZP
  113                          ]
  114 000006DC                 [                _type = _ZPI
  116                          ]
  117 000006DC                 [                _type = _IMM
  119                          ]
  364 000006DC EA05 6500       and              m6502_a,m6502_a,r0,lsl#24
  365 000006E0 EA4F 6325       mov              m6502_nz,m6502_a,asr#24 ;NZ
  292 000006E4                 fetch            4
   47 000006E4 F5B8 6880       subs             cycles,cycles,#4*256 ;//CYCLE=2
                                                            56 ;// 3*256 ÕýÊý»ò
                                                            0¾ÍÖ´ÐÐÏÂ2ÌõÖ¸Áî  
   48 000006E8         ;// subs cycles,cycles,#$count  ;//   r8=r8-#$count
   49 000006E8 BF5C F819 
              0B01             ldrplb           r0,[m6502_pc],#1 ; //´Ó´æ´¢Æ÷ÖÐ
                                                            ¼ÓÔØ×Ö½Úµ½Ò»¸ö¼Ä´æÆ
                                                            ÷ÖÐ  r0=²Ù×÷Âë
   50 000006EE F85A F020       ldrpl            pc,[m6502_optbl,r0,lsl#2] ;//r1
                                                            0 ********r0=r0x4**
                                                            *ÔËÐÐ´úÂëµÄµØÖ·****
                                                            *******************
                                                            ***************
   51 000006F2 F8DA F484       ldr              pc,nexttimeout
  293 000006F6         ;-------------------------------------------------------
                       ---------------------
  294 000006F6         _3D                                  ;   AND $nnnn,X
  295 000006F6         ;-------------------------------------------------------
                       ---------------------
  296 000006F6                 doAIX
  236 000006F6 00000004 
                       _type   SETA             _ABS
  237 000006F6 F819 CB01       ldrb             addy,[m6502_pc],#1
  238 000006FA F819 0B01       ldrb             r0,[m6502_pc],#1
  239 000006FE EA4C 2C00       orr              addy,addy,r0,lsl#8
  240 00000702 EB0C 6C16       add              addy,addy,m6502_x,lsr#24
  241 00000706         ; bic addy,addy,#0xff0000 ;Base Wars needs this
  297 00000706                 opAND
  363 00000706                 readmem
  108 00000706                 [                _type = _ABS
  109 00000706                 readmemabs
   69 00000706 F40C 4160       and              r1,addy,#0xE000
   70 0000070A F20F 0E0A       adr              lr,%F0
   71 0000070E         ;// ldr pc,[m6502_rmem,r1,lsr#11] ;//in: addy,r1=addy&0x
                       E000 (for rom_R)
   72 0000070E EA4F 21D1       lsr              r1,r1,#11   ;//¸Ä¹ý£¬¼Ó2ÐÐ  >>1
                                                            1
   73 00000712 F854 F001       ldr              pc,[m6502_rmem,r1]
   74 00000716         
   75 00000716         0                                    ;//out: r0=val (bit
                                                            s 8-31=0 (LSR,ROR,I
                                                            NC,DEC,ASL)), addy 
                                                            preserved for RMW i



ARM Macro Assembler    Page 41 


                                                            nstructions
  110 00000716                 ]
  111 00000716                 [                _type = _ZP
  113                          ]
  114 00000716                 [                _type = _ZPI
  116                          ]
  117 00000716                 [                _type = _IMM
  119                          ]
  364 00000716 EA05 6500       and              m6502_a,m6502_a,r0,lsl#24
  365 0000071A EA4F 6325       mov              m6502_nz,m6502_a,asr#24 ;NZ
  298 0000071E                 fetch            4
   47 0000071E F5B8 6880       subs             cycles,cycles,#4*256 ;//CYCLE=2
                                                            56 ;// 3*256 ÕýÊý»ò
                                                            0¾ÍÖ´ÐÐÏÂ2ÌõÖ¸Áî  
   48 00000722         ;// subs cycles,cycles,#$count  ;//   r8=r8-#$count
   49 00000722 BF5C F819 
              0B01             ldrplb           r0,[m6502_pc],#1 ; //´Ó´æ´¢Æ÷ÖÐ
                                                            ¼ÓÔØ×Ö½Úµ½Ò»¸ö¼Ä´æÆ
                                                            ÷ÖÐ  r0=²Ù×÷Âë
   50 00000728 F85A F020       ldrpl            pc,[m6502_optbl,r0,lsl#2] ;//r1
                                                            0 ********r0=r0x4**
                                                            *ÔËÐÐ´úÂëµÄµØÖ·****
                                                            *******************
                                                            ***************
   51 0000072C F8DA F484       ldr              pc,nexttimeout
  299 00000730         ;-------------------------------------------------------
                       ---------------------
  300 00000730         _3E                                  ;   ROL $nnnn,X
  301 00000730         ;-------------------------------------------------------
                       ---------------------
  302 00000730                 doAIX
  236 00000730 00000004 
                       _type   SETA             _ABS
  237 00000730 F819 CB01       ldrb             addy,[m6502_pc],#1
  238 00000734 F819 0B01       ldrb             r0,[m6502_pc],#1
  239 00000738 EA4C 2C00       orr              addy,addy,r0,lsl#8
  240 0000073C EB0C 6C16       add              addy,addy,m6502_x,lsr#24
  241 00000740         ; bic addy,addy,#0xff0000 ;Base Wars needs this
  303 00000740                 opROL
  462 00000740                 readmem
  108 00000740                 [                _type = _ABS
  109 00000740                 readmemabs
   69 00000740 F40C 4160       and              r1,addy,#0xE000
   70 00000744 F20F 0E08       adr              lr,%F0
   71 00000748         ;// ldr pc,[m6502_rmem,r1,lsr#11] ;//in: addy,r1=addy&0x
                       E000 (for rom_R)
   72 00000748 EA4F 21D1       lsr              r1,r1,#11   ;//¸Ä¹ý£¬¼Ó2ÐÐ  >>1
                                                            1
   73 0000074C F854 F001       ldr              pc,[m6502_rmem,r1]
   74 00000750         
   75 00000750         0                                    ;//out: r0=val (bit
                                                            s 8-31=0 (LSR,ROR,I
                                                            NC,DEC,ASL)), addy 
                                                            preserved for RMW i
                                                            nstructions
  110 00000750                 ]
  111 00000750                 [                _type = _ZP
  113                          ]
  114 00000750                 [                _type = _ZPI



ARM Macro Assembler    Page 42 


  116                          ]
  117 00000750                 [                _type = _IMM
  119                          ]
  463 00000750 EA5F 0858       movs             cycles,cycles,lsr#1 ;get C
  464 00000754 EB40 0000       adc              r0,r0,r0
  465 00000758 EA50 6300       orrs             m6502_nz,r0,r0,lsl#24 ;NZ
  466 0000075C EB48 0808       adc              cycles,cycles,cycles ;Set C
  467 00000760                 writemem
  165 00000760                 [                _type = _ABS
  166 00000760                 writememabs
  139 00000760 F40C 4160       and              r1,addy,#0xe000
  140 00000764 F50A 6284       adr              r2,writemem_tbl
  141 00000768 F20F 0E08       adr              lr,%F0
  142 0000076C         ;// ldr pc,[r2,r1,lsr#11] ;//in: addy,r0=val(bits 8-31=?
                       )
  143 0000076C EA4F 21D1       lsr              r1,r1,#11   ;//¸Ä¹ý£¬¼Ó2ÐÐ >>11
                                                            
  144 00000770 F852 F001       ldr              pc,[r2,r1]
  145 00000774         
  146 00000774         0                                    ;out: r0,r1,r2,addy
                                                            =?
  167 00000774                 ]
  168 00000774                 [                _type = _ZP
  170                          ]
  171 00000774                 [                _type = _ZPI
  173                          ]
  304 00000774                 fetch            7
   47 00000774 F5B8 68E0       subs             cycles,cycles,#7*256 ;//CYCLE=2
                                                            56 ;// 3*256 ÕýÊý»ò
                                                            0¾ÍÖ´ÐÐÏÂ2ÌõÖ¸Áî  
   48 00000778         ;// subs cycles,cycles,#$count  ;//   r8=r8-#$count
   49 00000778 BF5C F819 
              0B01             ldrplb           r0,[m6502_pc],#1 ; //´Ó´æ´¢Æ÷ÖÐ
                                                            ¼ÓÔØ×Ö½Úµ½Ò»¸ö¼Ä´æÆ
                                                            ÷ÖÐ  r0=²Ù×÷Âë
   50 0000077E F85A F020       ldrpl            pc,[m6502_optbl,r0,lsl#2] ;//r1
                                                            0 ********r0=r0x4**
                                                            *ÔËÐÐ´úÂëµÄµØÖ·****
                                                            *******************
                                                            ***************
   51 00000782 F8DA F484       ldr              pc,nexttimeout
  305 00000786         ;-------------------------------------------------------
                       ---------------------
  306 00000786         _40                                  ;   RTI
  307 00000786         ;-------------------------------------------------------
                       ---------------------
  308 00000786                 pop8             r0          ;pop 6502 flags and
                                                             decode
  208 00000786 F89A 247C       ldrb             r2,m6502_s
  209 0000078A F102 0201       add              r2,r2,#1
  210 0000078E F88A 247C       strb             r2,m6502_s
  211 00000792 F442 7280       orr              r2,r2,#0x100
  212 00000796 F91B 0002       ldrsb            r0,[cpu_zpage,r2] ;signed for P
                                                            LA & PLP
  213 0000079A         
  309 0000079A                 decodeP
   38 0000079A F028 084D       bic              cycles,cycles,#CYC_V+CYC_D+CYC_
I+CYC_C
   39 0000079E F000 014D       and              r1,r0,#V+D+I+C



ARM Macro Assembler    Page 43 


   40 000007A2 EA48 0801       orr              cycles,cycles,r1 ;//VDIC
   41 000007A6 F020 03FD       bic              m6502_nz,r0,#0xFD 
                                                            ;//r0 is signed
   42 000007AA F083 0302       eor              m6502_nz,m6502_nz,#Z
  310 000007AE                 pop16                        ;pop the return add
                                                            ress
  196 000007AE F89A 247C       ldrb             r2,m6502_s
  197 000007B2 F102 0202       add              r2,r2,#2
  198 000007B6 F88A 247C       strb             r2,m6502_s
  199 000007BA F8DA 247C       ldr              r2,m6502_s
  200 000007BE F812 0901       ldrb             r0,[r2],#-1
  201 000007C2 F442 7280       orr              r2,r2,#0x100
  202 000007C6 F892 9000       ldrb             m6502_pc,[r2]
  203 000007CA EA49 2900       orr              m6502_pc,m6502_pc,r0,lsl#8
  311 000007CE                 encodePC
   15 000007CE F409 4160       and              r1,m6502_pc,#0xE000 ;//r9ºÍ0xe0
                                                            00°´Î»ÓëÔËËã
   16 000007D2 F50A 6288       adr              r2,memmap_tbl ;//°Ñ´æ´¢Æ÷Ó³ÏóµØ
                                                            Ö·¼ÓÔØµ½r2
   17 000007D6         ;// ldr r0,[r2,r1,lsr#11]    ;//¸Ä¹ý£¬¼Ó2ÐÐ 
   18 000007D6 EA4F 20D1       lsr              r0,r1,#11   ;//>>11Î»   r1/2048
                                                            
   19 000007DA 5810            ldr              r0,[r2,r0]  ;//¶ÁÈ¡r2µØÖ·+r1Æ«Ò
                                                            ÆµÄÊý¾Ýµ½r0
   20 000007DC         
   21 000007DC         
   22 000007DC F8CA 0480       str              r0,lastbank ;//±£´æ6502PC´Ó ROM
                                                            µÄ×îºóÆ«ÒÆÁ¿ 
   23 000007E0 4481            add              m6502_pc,m6502_pc,r0 
                                                            ;//m6502_pc+r0
  312 000007E2                 fetch            6
   47 000007E2 F5B8 68C0       subs             cycles,cycles,#6*256 ;//CYCLE=2
                                                            56 ;// 3*256 ÕýÊý»ò
                                                            0¾ÍÖ´ÐÐÏÂ2ÌõÖ¸Áî  
   48 000007E6         ;// subs cycles,cycles,#$count  ;//   r8=r8-#$count
   49 000007E6 BF5C F819 
              0B01             ldrplb           r0,[m6502_pc],#1 ; //´Ó´æ´¢Æ÷ÖÐ
                                                            ¼ÓÔØ×Ö½Úµ½Ò»¸ö¼Ä´æÆ
                                                            ÷ÖÐ  r0=²Ù×÷Âë
   50 000007EC F85A F020       ldrpl            pc,[m6502_optbl,r0,lsl#2] ;//r1
                                                            0 ********r0=r0x4**
                                                            *ÔËÐÐ´úÂëµÄµØÖ·****
                                                            *******************
                                                            ***************
   51 000007F0 F8DA F484       ldr              pc,nexttimeout
  313 000007F4         ;-------------------------------------------------------
                       ---------------------
  314 000007F4         _41                                  ;   EOR ($nn,X)
  315 000007F4         ;-------------------------------------------------------
                       ---------------------
  316 000007F4                 doIIX
  261 000007F4 00000004 
                       _type   SETA             _ABS
  262 000007F4 F819 0B01       ldrb             r0,[m6502_pc],#1
  263 000007F8 EB06 6000       add              r0,m6502_x,r0,lsl#24
  264 000007FC         ;//ldrb addy,[cpu_zpage,r0,lsr#24] ;//´íÎó:Ö¸¶¨µÄ×ª±ä²»Ô
                       ÊÐí
  265 000007FC EA4F 6C10       lsr              addy,r0,#24 ;//¸Ä¹ý£¬¼Ó2ÐÐ >>24
                                                            



ARM Macro Assembler    Page 44 


  266 00000800 F81B C00C       ldrb             addy,[cpu_zpage,addy]
  267 00000804         
  268 00000804 F100 7080       add              r0,r0,#0x01000000
  269 00000808         ;//ldrb r1,[cpu_zpage,r0,lsr#24] ;//R1,LSR#2;½«R1ÖÐµÄÄÚÈ
                       ÝÓÒÒÆ2Î»
  270 00000808 EA4F 6110       lsr              r1,r0,#24   ;//¸Ä¹ý£¬¼Ó2ÐÐ
  271 0000080C F81B 1001       ldrb             r1,[cpu_zpage,r1]
  272 00000810         
  273 00000810 EA4C 2C01       orr              addy,addy,r1,lsl#8
  317 00000814                 opEOR
  405 00000814                 readmem
  108 00000814                 [                _type = _ABS
  109 00000814                 readmemabs
   69 00000814 F40C 4160       and              r1,addy,#0xE000
   70 00000818 F20F 0E08       adr              lr,%F0
   71 0000081C         ;// ldr pc,[m6502_rmem,r1,lsr#11] ;//in: addy,r1=addy&0x
                       E000 (for rom_R)
   72 0000081C EA4F 21D1       lsr              r1,r1,#11   ;//¸Ä¹ý£¬¼Ó2ÐÐ  >>1
                                                            1
   73 00000820 F854 F001       ldr              pc,[m6502_rmem,r1]
   74 00000824         
   75 00000824         0                                    ;//out: r0=val (bit
                                                            s 8-31=0 (LSR,ROR,I
                                                            NC,DEC,ASL)), addy 
                                                            preserved for RMW i
                                                            nstructions
  110 00000824                 ]
  111 00000824                 [                _type = _ZP
  113                          ]
  114 00000824                 [                _type = _ZPI
  116                          ]
  117 00000824                 [                _type = _IMM
  119                          ]
  406 00000824 EA85 6500       eor              m6502_a,m6502_a,r0,lsl#24
  407 00000828 EA4F 6325       mov              m6502_nz,m6502_a,asr#24 ;NZ
  318 0000082C                 fetch            6
   47 0000082C F5B8 68C0       subs             cycles,cycles,#6*256 ;//CYCLE=2
                                                            56 ;// 3*256 ÕýÊý»ò
                                                            0¾ÍÖ´ÐÐÏÂ2ÌõÖ¸Áî  
   48 00000830         ;// subs cycles,cycles,#$count  ;//   r8=r8-#$count
   49 00000830 BF5C F819 
              0B01             ldrplb           r0,[m6502_pc],#1 ; //´Ó´æ´¢Æ÷ÖÐ
                                                            ¼ÓÔØ×Ö½Úµ½Ò»¸ö¼Ä´æÆ
                                                            ÷ÖÐ  r0=²Ù×÷Âë
   50 00000836 F85A F020       ldrpl            pc,[m6502_optbl,r0,lsl#2] ;//r1
                                                            0 ********r0=r0x4**
                                                            *ÔËÐÐ´úÂëµÄµØÖ·****
                                                            *******************
                                                            ***************
   51 0000083A F8DA F484       ldr              pc,nexttimeout
  319 0000083E         ;-------------------------------------------------------
                       ---------------------
  320 0000083E         _45                                  ;   EOR $nn
  321 0000083E         ;-------------------------------------------------------
                       ---------------------
  322 0000083E                 doZ
  308 0000083E 00000002 
                       _type   SETA             _ZP
  309 0000083E F819 CB01       ldrb             addy,[m6502_pc],#1



ARM Macro Assembler    Page 45 


  323 00000842                 opEOR
  405 00000842                 readmem
  108 00000842                 [                _type = _ABS
  110                          ]
  111 00000842                 [                _type = _ZP
  112 00000842                 readmemzp
   80 00000842 F81B 000C       ldrb             r0,[cpu_zpage,addy]
  113 00000846                 ]
  114 00000846                 [                _type = _ZPI
  116                          ]
  117 00000846                 [                _type = _IMM
  119                          ]
  406 00000846 EA85 6500       eor              m6502_a,m6502_a,r0,lsl#24
  407 0000084A EA4F 6325       mov              m6502_nz,m6502_a,asr#24 ;NZ
  324 0000084E                 fetch            3
   47 0000084E F5B8 7840       subs             cycles,cycles,#3*256 ;//CYCLE=2
                                                            56 ;// 3*256 ÕýÊý»ò
                                                            0¾ÍÖ´ÐÐÏÂ2ÌõÖ¸Áî  
   48 00000852         ;// subs cycles,cycles,#$count  ;//   r8=r8-#$count
   49 00000852 BF5C F819 
              0B01             ldrplb           r0,[m6502_pc],#1 ; //´Ó´æ´¢Æ÷ÖÐ
                                                            ¼ÓÔØ×Ö½Úµ½Ò»¸ö¼Ä´æÆ
                                                            ÷ÖÐ  r0=²Ù×÷Âë
   50 00000858 F85A F020       ldrpl            pc,[m6502_optbl,r0,lsl#2] ;//r1
                                                            0 ********r0=r0x4**
                                                            *ÔËÐÐ´úÂëµÄµØÖ·****
                                                            *******************
                                                            ***************
   51 0000085C F8DA F484       ldr              pc,nexttimeout
  325 00000860         ;-------------------------------------------------------
                       ---------------------
  326 00000860         _46                                  ;   LSR $nn
  327 00000860         ;-------------------------------------------------------
                       ---------------------
  328 00000860                 doZ
  308 00000860 00000002 
                       _type   SETA             _ZP
  309 00000860 F819 CB01       ldrb             addy,[m6502_pc],#1
  329 00000864                 opLSR
  426 00000864                 [                _type = _ABS
  432                          ]
  433 00000864                 [                _type = _ZP
  434 00000864 F81B 300C       ldrb             m6502_nz,[cpu_zpage,addy]
  435 00000868 085B            movs             m6502_nz,m6502_nz,lsr#1 
                                                            ;Z, (N=0)
  436 0000086A F048 0801       orr              cycles,cycles,#CYC_C ;Prepare C
                                                            
  437 0000086E F80B 300C       strb             m6502_nz,[cpu_zpage,addy]
  438 00000872                 ]
  439 00000872                 [                _type = _ZPI
  450                          ]
  330 00000872                 fetch_c          5
   56 00000872 F578 68A0       sbcs             cycles,cycles,#5*256 
                                                            ;//CYCLE=256
   57 00000876 BF5C F819 
              0B01             ldrplb           r0,[m6502_pc],#1
   58 0000087C F85A F020       ldrpl            pc,[m6502_optbl,r0,lsl#2]
   59 00000880 F8DA F484       ldr              pc,nexttimeout
  331 00000884         ;-------------------------------------------------------



ARM Macro Assembler    Page 46 


                       ---------------------
  332 00000884         _48                                  ;   PHA
  333 00000884         ;-------------------------------------------------------
                       ---------------------
  334 00000884 EA4F 6015       mov              r0,m6502_a,lsr#24
  335 00000888                 push8            r0
  189 00000888 F8DA 247C       ldr              r2,m6502_s
  190 0000088C F802 0901       strb             r0,[r2],#-1
  191 00000890 F88A 247C       strb             r2,m6502_s
  336 00000894                 fetch            3
   47 00000894 F5B8 7840       subs             cycles,cycles,#3*256 ;//CYCLE=2
                                                            56 ;// 3*256 ÕýÊý»ò
                                                            0¾ÍÖ´ÐÐÏÂ2ÌõÖ¸Áî  
   48 00000898         ;// subs cycles,cycles,#$count  ;//   r8=r8-#$count
   49 00000898 BF5C F819 
              0B01             ldrplb           r0,[m6502_pc],#1 ; //´Ó´æ´¢Æ÷ÖÐ
                                                            ¼ÓÔØ×Ö½Úµ½Ò»¸ö¼Ä´æÆ
                                                            ÷ÖÐ  r0=²Ù×÷Âë
   50 0000089E F85A F020       ldrpl            pc,[m6502_optbl,r0,lsl#2] ;//r1
                                                            0 ********r0=r0x4**
                                                            *ÔËÐÐ´úÂëµÄµØÖ·****
                                                            *******************
                                                            ***************
   51 000008A2 F8DA F484       ldr              pc,nexttimeout
  337 000008A6         ;-------------------------------------------------------
                       ---------------------
  338 000008A6         _49                                  ;   EOR #$nn
  339 000008A6         ;-------------------------------------------------------
                       ---------------------
  340 000008A6                 doIMM
  256 000008A6 00000001 
                       _type   SETA             _IMM
  341 000008A6                 opEOR
  405 000008A6                 readmem
  108 000008A6                 [                _type = _ABS
  110                          ]
  111 000008A6                 [                _type = _ZP
  113                          ]
  114 000008A6                 [                _type = _ZPI
  116                          ]
  117 000008A6                 [                _type = _IMM
  118 000008A6                 readmemimm
   98 000008A6 F819 0B01       ldrb             r0,[m6502_pc],#1
  119 000008AA                 ]
  406 000008AA EA85 6500       eor              m6502_a,m6502_a,r0,lsl#24
  407 000008AE EA4F 6325       mov              m6502_nz,m6502_a,asr#24 ;NZ
  342 000008B2                 fetch            2
   47 000008B2 F5B8 7800       subs             cycles,cycles,#2*256 ;//CYCLE=2
                                                            56 ;// 3*256 ÕýÊý»ò
                                                            0¾ÍÖ´ÐÐÏÂ2ÌõÖ¸Áî  
   48 000008B6         ;// subs cycles,cycles,#$count  ;//   r8=r8-#$count
   49 000008B6 BF5C F819 
              0B01             ldrplb           r0,[m6502_pc],#1 ; //´Ó´æ´¢Æ÷ÖÐ
                                                            ¼ÓÔØ×Ö½Úµ½Ò»¸ö¼Ä´æÆ
                                                            ÷ÖÐ  r0=²Ù×÷Âë
   50 000008BC F85A F020       ldrpl            pc,[m6502_optbl,r0,lsl#2] ;//r1
                                                            0 ********r0=r0x4**
                                                            *ÔËÐÐ´úÂëµÄµØÖ·****
                                                            *******************



ARM Macro Assembler    Page 47 


                                                            ***************
   51 000008C0 F8DA F484       ldr              pc,nexttimeout
  343 000008C4         ;-------------------------------------------------------
                       ---------------------
  344 000008C4         _4A                                  ;   LSR
  345 000008C4         ;-------------------------------------------------------
                       ---------------------
  346 000008C4 0E6B            movs             m6502_nz,m6502_a,lsr#25 ;Z, N=0
                                                            
  347 000008C6 EA4F 6503       mov              m6502_a,m6502_nz,lsl#24 ;result
                                                             without garbage
  348 000008CA F048 0801       orr              cycles,cycles,#CYC_C ;Prepare C
                                                            
  349 000008CE                 fetch_c          2
   56 000008CE F578 7800       sbcs             cycles,cycles,#2*256 
                                                            ;//CYCLE=256
   57 000008D2 BF5C F819 
              0B01             ldrplb           r0,[m6502_pc],#1
   58 000008D8 F85A F020       ldrpl            pc,[m6502_optbl,r0,lsl#2]
   59 000008DC F8DA F484       ldr              pc,nexttimeout
  350 000008E0         ;-------------------------------------------------------
                       ---------------------
  351 000008E0         _4C                                  ;   JMP $nnnn
  352 000008E0         ;-------------------------------------------------------
                       ---------------------
  353 000008E0 F819 0B01       ldrb             r0,[m6502_pc],#1
  354 000008E4 F899 1000       ldrb             r1,[m6502_pc]
  355 000008E8 EA40 2901       orr              m6502_pc,r0,r1,lsl#8
  356 000008EC                 encodePC
   15 000008EC F409 4160       and              r1,m6502_pc,#0xE000 ;//r9ºÍ0xe0
                                                            00°´Î»ÓëÔËËã
   16 000008F0 F50A 6288       adr              r2,memmap_tbl ;//°Ñ´æ´¢Æ÷Ó³ÏóµØ
                                                            Ö·¼ÓÔØµ½r2
   17 000008F4         ;// ldr r0,[r2,r1,lsr#11]    ;//¸Ä¹ý£¬¼Ó2ÐÐ 
   18 000008F4 EA4F 20D1       lsr              r0,r1,#11   ;//>>11Î»   r1/2048
                                                            
   19 000008F8 5810            ldr              r0,[r2,r0]  ;//¶ÁÈ¡r2µØÖ·+r1Æ«Ò
                                                            ÆµÄÊý¾Ýµ½r0
   20 000008FA         
   21 000008FA         
   22 000008FA F8CA 0480       str              r0,lastbank ;//±£´æ6502PC´Ó ROM
                                                            µÄ×îºóÆ«ÒÆÁ¿ 
   23 000008FE 4481            add              m6502_pc,m6502_pc,r0 
                                                            ;//m6502_pc+r0
  357 00000900                 fetch            3
   47 00000900 F5B8 7840       subs             cycles,cycles,#3*256 ;//CYCLE=2
                                                            56 ;// 3*256 ÕýÊý»ò
                                                            0¾ÍÖ´ÐÐÏÂ2ÌõÖ¸Áî  
   48 00000904         ;// subs cycles,cycles,#$count  ;//   r8=r8-#$count
   49 00000904 BF5C F819 
              0B01             ldrplb           r0,[m6502_pc],#1 ; //´Ó´æ´¢Æ÷ÖÐ
                                                            ¼ÓÔØ×Ö½Úµ½Ò»¸ö¼Ä´æÆ
                                                            ÷ÖÐ  r0=²Ù×÷Âë
   50 0000090A F85A F020       ldrpl            pc,[m6502_optbl,r0,lsl#2] ;//r1
                                                            0 ********r0=r0x4**
                                                            *ÔËÐÐ´úÂëµÄµØÖ·****
                                                            *******************
                                                            ***************
   51 0000090E F8DA F484       ldr              pc,nexttimeout



ARM Macro Assembler    Page 48 


  358 00000912         ;-------------------------------------------------------
                       ---------------------
  359 00000912         _4D                                  ;   EOR $nnnn
  360 00000912         ;-------------------------------------------------------
                       ---------------------
  361 00000912                 doABS
  228 00000912 00000004 
                       _type   SETA             _ABS
  229 00000912 F819 CB01       ldrb             addy,[m6502_pc],#1
  230 00000916 F819 0B01       ldrb             r0,[m6502_pc],#1
  231 0000091A EA4C 2C00       orr              addy,addy,r0,lsl#8
  362 0000091E                 opEOR
  405 0000091E                 readmem
  108 0000091E                 [                _type = _ABS
  109 0000091E                 readmemabs
   69 0000091E F40C 4160       and              r1,addy,#0xE000
   70 00000922 F20F 0E0A       adr              lr,%F0
   71 00000926         ;// ldr pc,[m6502_rmem,r1,lsr#11] ;//in: addy,r1=addy&0x
                       E000 (for rom_R)
   72 00000926 EA4F 21D1       lsr              r1,r1,#11   ;//¸Ä¹ý£¬¼Ó2ÐÐ  >>1
                                                            1
   73 0000092A F854 F001       ldr              pc,[m6502_rmem,r1]
   74 0000092E         
   75 0000092E         0                                    ;//out: r0=val (bit
                                                            s 8-31=0 (LSR,ROR,I
                                                            NC,DEC,ASL)), addy 
                                                            preserved for RMW i
                                                            nstructions
  110 0000092E                 ]
  111 0000092E                 [                _type = _ZP
  113                          ]
  114 0000092E                 [                _type = _ZPI
  116                          ]
  117 0000092E                 [                _type = _IMM
  119                          ]
  406 0000092E EA85 6500       eor              m6502_a,m6502_a,r0,lsl#24
  407 00000932 EA4F 6325       mov              m6502_nz,m6502_a,asr#24 ;NZ
  363 00000936                 fetch            4
   47 00000936 F5B8 6880       subs             cycles,cycles,#4*256 ;//CYCLE=2
                                                            56 ;// 3*256 ÕýÊý»ò
                                                            0¾ÍÖ´ÐÐÏÂ2ÌõÖ¸Áî  
   48 0000093A         ;// subs cycles,cycles,#$count  ;//   r8=r8-#$count
   49 0000093A BF5C F819 
              0B01             ldrplb           r0,[m6502_pc],#1 ; //´Ó´æ´¢Æ÷ÖÐ
                                                            ¼ÓÔØ×Ö½Úµ½Ò»¸ö¼Ä´æÆ
                                                            ÷ÖÐ  r0=²Ù×÷Âë
   50 00000940 F85A F020       ldrpl            pc,[m6502_optbl,r0,lsl#2] ;//r1
                                                            0 ********r0=r0x4**
                                                            *ÔËÐÐ´úÂëµÄµØÖ·****
                                                            *******************
                                                            ***************
   51 00000944 F8DA F484       ldr              pc,nexttimeout
  364 00000948         ;-------------------------------------------------------
                       ---------------------
  365 00000948         _4E                                  ;   LSR $nnnn
  366 00000948         ;-------------------------------------------------------
                       ---------------------
  367 00000948                 doABS
  228 00000948 00000004 



ARM Macro Assembler    Page 49 


                       _type   SETA             _ABS
  229 00000948 F819 CB01       ldrb             addy,[m6502_pc],#1
  230 0000094C F819 0B01       ldrb             r0,[m6502_pc],#1
  231 00000950 EA4C 2C00       orr              addy,addy,r0,lsl#8
  368 00000954                 opLSR
  426 00000954                 [                _type = _ABS
  427 00000954                 readmemabs
   69 00000954 F40C 4160       and              r1,addy,#0xE000
   70 00000958 F20F 0E08       adr              lr,%F0
   71 0000095C         ;// ldr pc,[m6502_rmem,r1,lsr#11] ;//in: addy,r1=addy&0x
                       E000 (for rom_R)
   72 0000095C EA4F 21D1       lsr              r1,r1,#11   ;//¸Ä¹ý£¬¼Ó2ÐÐ  >>1
                                                            1
   73 00000960 F854 F001       ldr              pc,[m6502_rmem,r1]
   74 00000964         
   75 00000964         0                                    ;//out: r0=val (bit
                                                            s 8-31=0 (LSR,ROR,I
                                                            NC,DEC,ASL)), addy 
                                                            preserved for RMW i
                                                            nstructions
  428 00000964 0840            movs             r0,r0,lsr#1
  429 00000966 F048 0801       orr              cycles,cycles,#CYC_C ;Prepare C
                                                            
  430 0000096A 4603            mov              m6502_nz,r0 ;Z, (N=0)
  431 0000096C                 writememabs
  139 0000096C F40C 4160       and              r1,addy,#0xe000
  140 00000970 F50A 6284       adr              r2,writemem_tbl
  141 00000974 F20F 0E08       adr              lr,%F0
  142 00000978         ;// ldr pc,[r2,r1,lsr#11] ;//in: addy,r0=val(bits 8-31=?
                       )
  143 00000978 EA4F 21D1       lsr              r1,r1,#11   ;//¸Ä¹ý£¬¼Ó2ÐÐ >>11
                                                            
  144 0000097C F852 F001       ldr              pc,[r2,r1]
  145 00000980         
  146 00000980         0                                    ;out: r0,r1,r2,addy
                                                            =?
  432 00000980                 ]
  433 00000980                 [                _type = _ZP
  438                          ]
  439 00000980                 [                _type = _ZPI
  450                          ]
  369 00000980                 fetch_c          6
   56 00000980 F578 68C0       sbcs             cycles,cycles,#6*256 
                                                            ;//CYCLE=256
   57 00000984 BF5C F819 
              0B01             ldrplb           r0,[m6502_pc],#1
   58 0000098A F85A F020       ldrpl            pc,[m6502_optbl,r0,lsl#2]
   59 0000098E F8DA F484       ldr              pc,nexttimeout
  370 00000992         ;-------------------------------------------------------
                       ---------------------
  371 00000992         _50                                  ;   BVC *
  372 00000992         ;-------------------------------------------------------
                       ---------------------
  373 00000992 F018 0F40       tst              cycles,#CYC_V
  374 00000996 F919 0B01       ldrsb            r0,[m6502_pc],#1
  375 0000099A BF04 4481       addeq            m6502_pc,m6502_pc,r0
  376 0000099E         ; subeq cycles,cycles,#3*CYCLE
  377 0000099E F5A8 7880       subeq            cycles,cycles,#256
  378 000009A2                 fetch            2



ARM Macro Assembler    Page 50 


   47 000009A2 F5B8 7800       subs             cycles,cycles,#2*256 ;//CYCLE=2
                                                            56 ;// 3*256 ÕýÊý»ò
                                                            0¾ÍÖ´ÐÐÏÂ2ÌõÖ¸Áî  
   48 000009A6         ;// subs cycles,cycles,#$count  ;//   r8=r8-#$count
   49 000009A6 BF5C F819 
              0B01             ldrplb           r0,[m6502_pc],#1 ; //´Ó´æ´¢Æ÷ÖÐ
                                                            ¼ÓÔØ×Ö½Úµ½Ò»¸ö¼Ä´æÆ
                                                            ÷ÖÐ  r0=²Ù×÷Âë
   50 000009AC F85A F020       ldrpl            pc,[m6502_optbl,r0,lsl#2] ;//r1
                                                            0 ********r0=r0x4**
                                                            *ÔËÐÐ´úÂëµÄµØÖ·****
                                                            *******************
                                                            ***************
   51 000009B0 F8DA F484       ldr              pc,nexttimeout
  379 000009B4         ;-------------------------------------------------------
                       ---------------------
  380 000009B4         _51                                  ;   EOR ($nn),Y
  381 000009B4         ;-------------------------------------------------------
                       ---------------------
  382 000009B4                 doIIY
  278 000009B4 00000004 
                       _type   SETA             _ABS
  279 000009B4 F819 0B01       ldrb             r0,[m6502_pc],#1
  280 000009B8         ;// ldrb addy,[r0,cpu_zpage]! ;;ÔÚÊý¾Ý´«ËÍÖ®Ç°,½«Æ«ÒÆÁ¿¼
                       Óµ½Rn ÖÐ,Æä½á¹û×÷Îª´«ËÍÊý¾ÝµÄ´æ´¢µØÖ·
  281 000009B8         ;//ÈôÊ¹ÓÃºó×º"!",Ôò½á¹ûÐ´»Øµ½RnÖÐ
  282 000009B8 F810 C00B       ldrb             addy,[r0,cpu_zpage]
  283 000009BC 4458            add              r0,r0,cpu_zpage ;//////////////
                                                            ///////////////////
                                                            /////
  284 000009BE         
  285 000009BE         
  286 000009BE 7841            ldrb             r1,[r0,#1]
  287 000009C0 EA4C 2C01       orr              addy,addy,r1,lsl#8
  288 000009C4 EB0C 6C17       add              addy,addy,m6502_y,lsr#24
  289 000009C8         ; bic addy,addy,#0xff0000 ;Zelda2 needs this
  383 000009C8                 opEOR
  405 000009C8                 readmem
  108 000009C8                 [                _type = _ABS
  109 000009C8                 readmemabs
   69 000009C8 F40C 4160       and              r1,addy,#0xE000
   70 000009CC F20F 0E08       adr              lr,%F0
   71 000009D0         ;// ldr pc,[m6502_rmem,r1,lsr#11] ;//in: addy,r1=addy&0x
                       E000 (for rom_R)
   72 000009D0 EA4F 21D1       lsr              r1,r1,#11   ;//¸Ä¹ý£¬¼Ó2ÐÐ  >>1
                                                            1
   73 000009D4 F854 F001       ldr              pc,[m6502_rmem,r1]
   74 000009D8         
   75 000009D8         0                                    ;//out: r0=val (bit
                                                            s 8-31=0 (LSR,ROR,I
                                                            NC,DEC,ASL)), addy 
                                                            preserved for RMW i
                                                            nstructions
  110 000009D8                 ]
  111 000009D8                 [                _type = _ZP
  113                          ]
  114 000009D8                 [                _type = _ZPI
  116                          ]
  117 000009D8                 [                _type = _IMM



ARM Macro Assembler    Page 51 


  119                          ]
  406 000009D8 EA85 6500       eor              m6502_a,m6502_a,r0,lsl#24
  407 000009DC EA4F 6325       mov              m6502_nz,m6502_a,asr#24 ;NZ
  384 000009E0                 fetch            5
   47 000009E0 F5B8 68A0       subs             cycles,cycles,#5*256 ;//CYCLE=2
                                                            56 ;// 3*256 ÕýÊý»ò
                                                            0¾ÍÖ´ÐÐÏÂ2ÌõÖ¸Áî  
   48 000009E4         ;// subs cycles,cycles,#$count  ;//   r8=r8-#$count
   49 000009E4 BF5C F819 
              0B01             ldrplb           r0,[m6502_pc],#1 ; //´Ó´æ´¢Æ÷ÖÐ
                                                            ¼ÓÔØ×Ö½Úµ½Ò»¸ö¼Ä´æÆ
                                                            ÷ÖÐ  r0=²Ù×÷Âë
   50 000009EA F85A F020       ldrpl            pc,[m6502_optbl,r0,lsl#2] ;//r1
                                                            0 ********r0=r0x4**
                                                            *ÔËÐÐ´úÂëµÄµØÖ·****
                                                            *******************
                                                            ***************
   51 000009EE F8DA F484       ldr              pc,nexttimeout
  385 000009F2         ;-------------------------------------------------------
                       ---------------------
  386 000009F2         _55                                  ;   EOR $nn,X
  387 000009F2         ;-------------------------------------------------------
                       ---------------------
  388 000009F2                 doZIXf
  328 000009F2 00000003 
                       _type   SETA             _ZPI
  329 000009F2 F819 CB01       ldrb             addy,[m6502_pc],#1
  330 000009F6 EB06 6C0C       add              addy,m6502_x,addy,lsl#24
  389 000009FA                 opEOR
  405 000009FA                 readmem
  108 000009FA                 [                _type = _ABS
  110                          ]
  111 000009FA                 [                _type = _ZP
  113                          ]
  114 000009FA                 [                _type = _ZPI
  115 000009FA                 readmemzpi
   85 000009FA         ;// ldrb r0,[cpu_zpage,addy,lsr#24]
   86 000009FA EA4F 601C       lsr              r0,addy,#24 ;//¸Ä¹ý£¬¼Ó3ÐÐ
   87 000009FE F81B 0000       ldrb             r0,[cpu_zpage,r0]
   88 00000A02         
  116 00000A02                 ]
  117 00000A02                 [                _type = _IMM
  119                          ]
  406 00000A02 EA85 6500       eor              m6502_a,m6502_a,r0,lsl#24
  407 00000A06 EA4F 6325       mov              m6502_nz,m6502_a,asr#24 ;NZ
  390 00000A0A                 fetch            4
   47 00000A0A F5B8 6880       subs             cycles,cycles,#4*256 ;//CYCLE=2
                                                            56 ;// 3*256 ÕýÊý»ò
                                                            0¾ÍÖ´ÐÐÏÂ2ÌõÖ¸Áî  
   48 00000A0E         ;// subs cycles,cycles,#$count  ;//   r8=r8-#$count
   49 00000A0E BF5C F819 
              0B01             ldrplb           r0,[m6502_pc],#1 ; //´Ó´æ´¢Æ÷ÖÐ
                                                            ¼ÓÔØ×Ö½Úµ½Ò»¸ö¼Ä´æÆ
                                                            ÷ÖÐ  r0=²Ù×÷Âë
   50 00000A14 F85A F020       ldrpl            pc,[m6502_optbl,r0,lsl#2] ;//r1
                                                            0 ********r0=r0x4**
                                                            *ÔËÐÐ´úÂëµÄµØÖ·****
                                                            *******************
                                                            ***************



ARM Macro Assembler    Page 52 


   51 00000A18 F8DA F484       ldr              pc,nexttimeout
  391 00000A1C         ;-------------------------------------------------------
                       ---------------------
  392 00000A1C         _56                                  ;   LSR $nn,X
  393 00000A1C         ;-------------------------------------------------------
                       ---------------------
  394 00000A1C                 doZIXf
  328 00000A1C 00000003 
                       _type   SETA             _ZPI
  329 00000A1C F819 CB01       ldrb             addy,[m6502_pc],#1
  330 00000A20 EB06 6C0C       add              addy,m6502_x,addy,lsl#24
  395 00000A24                 opLSR
  426 00000A24                 [                _type = _ABS
  432                          ]
  433 00000A24                 [                _type = _ZP
  438                          ]
  439 00000A24                 [                _type = _ZPI
  440 00000A24         ;//  ldrb m6502_nz,[cpu_zpage,addy,lsr#24]
  441 00000A24 EA4F 631C       lsr              m6502_nz,addy,#24 
                                                            ;//¸Ä¹ý£¬¼Ó2ÐÐ
  442 00000A28 F81B 3003       ldrb             m6502_nz,[cpu_zpage,m6502_nz]
  443 00000A2C         
  444 00000A2C 085B            movs             m6502_nz,m6502_nz,lsr#1 
                                                            ;Z, (N=0)
  445 00000A2E F048 0801       orr              cycles,cycles,#CYC_C ;Prepare C
                                                            
  446 00000A32         ;//  strb m6502_nz,[cpu_zpage,addy,lsr#24]
  447 00000A32 EA4F 611C       lsr              r1,addy,#24 ;//¸Ä¹ý£¬¼Ó2ÐÐ
  448 00000A36 F80B 3001       strb             m6502_nz,[cpu_zpage,r1]
  449 00000A3A         
  450 00000A3A                 ]
  396 00000A3A                 fetch_c          6
   56 00000A3A F578 68C0       sbcs             cycles,cycles,#6*256 
                                                            ;//CYCLE=256
   57 00000A3E BF5C F819 
              0B01             ldrplb           r0,[m6502_pc],#1
   58 00000A44 F85A F020       ldrpl            pc,[m6502_optbl,r0,lsl#2]
   59 00000A48 F8DA F484       ldr              pc,nexttimeout
  397 00000A4C         ;-------------------------------------------------------
                       ---------------------
  398 00000A4C         _58                                  ;   CLI
  399 00000A4C         ;-------------------------------------------------------
                       ---------------------
  400 00000A4C F028 0804       bic              cycles,cycles,#CYC_I
  401 00000A50                 fetch            2
   47 00000A50 F5B8 7800       subs             cycles,cycles,#2*256 ;//CYCLE=2
                                                            56 ;// 3*256 ÕýÊý»ò
                                                            0¾ÍÖ´ÐÐÏÂ2ÌõÖ¸Áî  
   48 00000A54         ;// subs cycles,cycles,#$count  ;//   r8=r8-#$count
   49 00000A54 BF5C F819 
              0B01             ldrplb           r0,[m6502_pc],#1 ; //´Ó´æ´¢Æ÷ÖÐ
                                                            ¼ÓÔØ×Ö½Úµ½Ò»¸ö¼Ä´æÆ
                                                            ÷ÖÐ  r0=²Ù×÷Âë
   50 00000A5A F85A F020       ldrpl            pc,[m6502_optbl,r0,lsl#2] ;//r1
                                                            0 ********r0=r0x4**
                                                            *ÔËÐÐ´úÂëµÄµØÖ·****
                                                            *******************
                                                            ***************
   51 00000A5E F8DA F484       ldr              pc,nexttimeout



ARM Macro Assembler    Page 53 


  402 00000A62         ;-------------------------------------------------------
                       ---------------------
  403 00000A62         _59                                  ;   EOR $nnnn,Y
  404 00000A62         ;-------------------------------------------------------
                       ---------------------
  405 00000A62                 doAIY
  246 00000A62 00000004 
                       _type   SETA             _ABS
  247 00000A62 F819 CB01       ldrb             addy,[m6502_pc],#1
  248 00000A66 F819 0B01       ldrb             r0,[m6502_pc],#1
  249 00000A6A EA4C 2C00       orr              addy,addy,r0,lsl#8
  250 00000A6E EB0C 6C17       add              addy,addy,m6502_y,lsr#24
  251 00000A72         ; bic addy,addy,#0xff0000 ;Tecmo Bowl needs this
  406 00000A72                 opEOR
  405 00000A72                 readmem
  108 00000A72                 [                _type = _ABS
  109 00000A72                 readmemabs
   69 00000A72 F40C 4160       and              r1,addy,#0xE000
   70 00000A76 F20F 0E0A       adr              lr,%F0
   71 00000A7A         ;// ldr pc,[m6502_rmem,r1,lsr#11] ;//in: addy,r1=addy&0x
                       E000 (for rom_R)
   72 00000A7A EA4F 21D1       lsr              r1,r1,#11   ;//¸Ä¹ý£¬¼Ó2ÐÐ  >>1
                                                            1
   73 00000A7E F854 F001       ldr              pc,[m6502_rmem,r1]
   74 00000A82         
   75 00000A82         0                                    ;//out: r0=val (bit
                                                            s 8-31=0 (LSR,ROR,I
                                                            NC,DEC,ASL)), addy 
                                                            preserved for RMW i
                                                            nstructions
  110 00000A82                 ]
  111 00000A82                 [                _type = _ZP
  113                          ]
  114 00000A82                 [                _type = _ZPI
  116                          ]
  117 00000A82                 [                _type = _IMM
  119                          ]
  406 00000A82 EA85 6500       eor              m6502_a,m6502_a,r0,lsl#24
  407 00000A86 EA4F 6325       mov              m6502_nz,m6502_a,asr#24 ;NZ
  407 00000A8A                 fetch            4
   47 00000A8A F5B8 6880       subs             cycles,cycles,#4*256 ;//CYCLE=2
                                                            56 ;// 3*256 ÕýÊý»ò
                                                            0¾ÍÖ´ÐÐÏÂ2ÌõÖ¸Áî  
   48 00000A8E         ;// subs cycles,cycles,#$count  ;//   r8=r8-#$count
   49 00000A8E BF5C F819 
              0B01             ldrplb           r0,[m6502_pc],#1 ; //´Ó´æ´¢Æ÷ÖÐ
                                                            ¼ÓÔØ×Ö½Úµ½Ò»¸ö¼Ä´æÆ
                                                            ÷ÖÐ  r0=²Ù×÷Âë
   50 00000A94 F85A F020       ldrpl            pc,[m6502_optbl,r0,lsl#2] ;//r1
                                                            0 ********r0=r0x4**
                                                            *ÔËÐÐ´úÂëµÄµØÖ·****
                                                            *******************
                                                            ***************
   51 00000A98 F8DA F484       ldr              pc,nexttimeout
  408 00000A9C         ;-------------------------------------------------------
                       ---------------------
  409 00000A9C         _5D                                  ;   EOR $nnnn,X
  410 00000A9C         ;-------------------------------------------------------
                       ---------------------



ARM Macro Assembler    Page 54 


  411 00000A9C                 doAIX
  236 00000A9C 00000004 
                       _type   SETA             _ABS
  237 00000A9C F819 CB01       ldrb             addy,[m6502_pc],#1
  238 00000AA0 F819 0B01       ldrb             r0,[m6502_pc],#1
  239 00000AA4 EA4C 2C00       orr              addy,addy,r0,lsl#8
  240 00000AA8 EB0C 6C16       add              addy,addy,m6502_x,lsr#24
  241 00000AAC         ; bic addy,addy,#0xff0000 ;Base Wars needs this
  412 00000AAC                 opEOR
  405 00000AAC                 readmem
  108 00000AAC                 [                _type = _ABS
  109 00000AAC                 readmemabs
   69 00000AAC F40C 4160       and              r1,addy,#0xE000
   70 00000AB0 F20F 0E08       adr              lr,%F0
   71 00000AB4         ;// ldr pc,[m6502_rmem,r1,lsr#11] ;//in: addy,r1=addy&0x
                       E000 (for rom_R)
   72 00000AB4 EA4F 21D1       lsr              r1,r1,#11   ;//¸Ä¹ý£¬¼Ó2ÐÐ  >>1
                                                            1
   73 00000AB8 F854 F001       ldr              pc,[m6502_rmem,r1]
   74 00000ABC         
   75 00000ABC         0                                    ;//out: r0=val (bit
                                                            s 8-31=0 (LSR,ROR,I
                                                            NC,DEC,ASL)), addy 
                                                            preserved for RMW i
                                                            nstructions
  110 00000ABC                 ]
  111 00000ABC                 [                _type = _ZP
  113                          ]
  114 00000ABC                 [                _type = _ZPI
  116                          ]
  117 00000ABC                 [                _type = _IMM
  119                          ]
  406 00000ABC EA85 6500       eor              m6502_a,m6502_a,r0,lsl#24
  407 00000AC0 EA4F 6325       mov              m6502_nz,m6502_a,asr#24 ;NZ
  413 00000AC4                 fetch            4
   47 00000AC4 F5B8 6880       subs             cycles,cycles,#4*256 ;//CYCLE=2
                                                            56 ;// 3*256 ÕýÊý»ò
                                                            0¾ÍÖ´ÐÐÏÂ2ÌõÖ¸Áî  
   48 00000AC8         ;// subs cycles,cycles,#$count  ;//   r8=r8-#$count
   49 00000AC8 BF5C F819 
              0B01             ldrplb           r0,[m6502_pc],#1 ; //´Ó´æ´¢Æ÷ÖÐ
                                                            ¼ÓÔØ×Ö½Úµ½Ò»¸ö¼Ä´æÆ
                                                            ÷ÖÐ  r0=²Ù×÷Âë
   50 00000ACE F85A F020       ldrpl            pc,[m6502_optbl,r0,lsl#2] ;//r1
                                                            0 ********r0=r0x4**
                                                            *ÔËÐÐ´úÂëµÄµØÖ·****
                                                            *******************
                                                            ***************
   51 00000AD2 F8DA F484       ldr              pc,nexttimeout
  414 00000AD6         ;-------------------------------------------------------
                       ---------------------
  415 00000AD6         _5E                                  ;   LSR $nnnn,X
  416 00000AD6         ;-------------------------------------------------------
                       ---------------------
  417 00000AD6                 doAIX
  236 00000AD6 00000004 
                       _type   SETA             _ABS
  237 00000AD6 F819 CB01       ldrb             addy,[m6502_pc],#1
  238 00000ADA F819 0B01       ldrb             r0,[m6502_pc],#1



ARM Macro Assembler    Page 55 


  239 00000ADE EA4C 2C00       orr              addy,addy,r0,lsl#8
  240 00000AE2 EB0C 6C16       add              addy,addy,m6502_x,lsr#24
  241 00000AE6         ; bic addy,addy,#0xff0000 ;Base Wars needs this
  418 00000AE6                 opLSR
  426 00000AE6                 [                _type = _ABS
  427 00000AE6                 readmemabs
   69 00000AE6 F40C 4160       and              r1,addy,#0xE000
   70 00000AEA F20F 0E0A       adr              lr,%F0
   71 00000AEE         ;// ldr pc,[m6502_rmem,r1,lsr#11] ;//in: addy,r1=addy&0x
                       E000 (for rom_R)
   72 00000AEE EA4F 21D1       lsr              r1,r1,#11   ;//¸Ä¹ý£¬¼Ó2ÐÐ  >>1
                                                            1
   73 00000AF2 F854 F001       ldr              pc,[m6502_rmem,r1]
   74 00000AF6         
   75 00000AF6         0                                    ;//out: r0=val (bit
                                                            s 8-31=0 (LSR,ROR,I
                                                            NC,DEC,ASL)), addy 
                                                            preserved for RMW i
                                                            nstructions
  428 00000AF6 0840            movs             r0,r0,lsr#1
  429 00000AF8 F048 0801       orr              cycles,cycles,#CYC_C ;Prepare C
                                                            
  430 00000AFC 4603            mov              m6502_nz,r0 ;Z, (N=0)
  431 00000AFE                 writememabs
  139 00000AFE F40C 4160       and              r1,addy,#0xe000
  140 00000B02 F50A 6284       adr              r2,writemem_tbl
  141 00000B06 F20F 0E0A       adr              lr,%F0
  142 00000B0A         ;// ldr pc,[r2,r1,lsr#11] ;//in: addy,r0=val(bits 8-31=?
                       )
  143 00000B0A EA4F 21D1       lsr              r1,r1,#11   ;//¸Ä¹ý£¬¼Ó2ÐÐ >>11
                                                            
  144 00000B0E F852 F001       ldr              pc,[r2,r1]
  145 00000B12         
  146 00000B12         0                                    ;out: r0,r1,r2,addy
                                                            =?
  432 00000B12                 ]
  433 00000B12                 [                _type = _ZP
  438                          ]
  439 00000B12                 [                _type = _ZPI
  450                          ]
  419 00000B12                 fetch_c          7
   56 00000B12 F578 68E0       sbcs             cycles,cycles,#7*256 
                                                            ;//CYCLE=256
   57 00000B16 BF5C F819 
              0B01             ldrplb           r0,[m6502_pc],#1
   58 00000B1C F85A F020       ldrpl            pc,[m6502_optbl,r0,lsl#2]
   59 00000B20 F8DA F484       ldr              pc,nexttimeout
  420 00000B24         ;-------------------------------------------------------
                       ---------------------
  421 00000B24         _60                                  ;   RTS
  422 00000B24         ;-------------------------------------------------------
                       ---------------------
  423 00000B24                 pop16
  196 00000B24 F89A 247C       ldrb             r2,m6502_s
  197 00000B28 F102 0202       add              r2,r2,#2
  198 00000B2C F88A 247C       strb             r2,m6502_s
  199 00000B30 F8DA 247C       ldr              r2,m6502_s
  200 00000B34 F812 0901       ldrb             r0,[r2],#-1
  201 00000B38 F442 7280       orr              r2,r2,#0x100



ARM Macro Assembler    Page 56 


  202 00000B3C F892 9000       ldrb             m6502_pc,[r2]
  203 00000B40 EA49 2900       orr              m6502_pc,m6502_pc,r0,lsl#8
  424 00000B44 F109 0901       add              m6502_pc,m6502_pc,#1
  425 00000B48                 encodePC
   15 00000B48 F409 4160       and              r1,m6502_pc,#0xE000 ;//r9ºÍ0xe0
                                                            00°´Î»ÓëÔËËã
   16 00000B4C F50A 6288       adr              r2,memmap_tbl ;//°Ñ´æ´¢Æ÷Ó³ÏóµØ
                                                            Ö·¼ÓÔØµ½r2
   17 00000B50         ;// ldr r0,[r2,r1,lsr#11]    ;//¸Ä¹ý£¬¼Ó2ÐÐ 
   18 00000B50 EA4F 20D1       lsr              r0,r1,#11   ;//>>11Î»   r1/2048
                                                            
   19 00000B54 5810            ldr              r0,[r2,r0]  ;//¶ÁÈ¡r2µØÖ·+r1Æ«Ò
                                                            ÆµÄÊý¾Ýµ½r0
   20 00000B56         
   21 00000B56         
   22 00000B56 F8CA 0480       str              r0,lastbank ;//±£´æ6502PC´Ó ROM
                                                            µÄ×îºóÆ«ÒÆÁ¿ 
   23 00000B5A 4481            add              m6502_pc,m6502_pc,r0 
                                                            ;//m6502_pc+r0
  426 00000B5C                 fetch            6
   47 00000B5C F5B8 68C0       subs             cycles,cycles,#6*256 ;//CYCLE=2
                                                            56 ;// 3*256 ÕýÊý»ò
                                                            0¾ÍÖ´ÐÐÏÂ2ÌõÖ¸Áî  
   48 00000B60         ;// subs cycles,cycles,#$count  ;//   r8=r8-#$count
   49 00000B60 BF5C F819 
              0B01             ldrplb           r0,[m6502_pc],#1 ; //´Ó´æ´¢Æ÷ÖÐ
                                                            ¼ÓÔØ×Ö½Úµ½Ò»¸ö¼Ä´æÆ
                                                            ÷ÖÐ  r0=²Ù×÷Âë
   50 00000B66 F85A F020       ldrpl            pc,[m6502_optbl,r0,lsl#2] ;//r1
                                                            0 ********r0=r0x4**
                                                            *ÔËÐÐ´úÂëµÄµØÖ·****
                                                            *******************
                                                            ***************
   51 00000B6A F8DA F484       ldr              pc,nexttimeout
  427 00000B6E         ;-------------------------------------------------------
                       ---------------------
  428 00000B6E         _61                                  ;   ADC ($nn,X)
  429 00000B6E         ;-------------------------------------------------------
                       ---------------------
  430 00000B6E                 doIIX
  261 00000B6E 00000004 
                       _type   SETA             _ABS
  262 00000B6E F819 0B01       ldrb             r0,[m6502_pc],#1
  263 00000B72 EB06 6000       add              r0,m6502_x,r0,lsl#24
  264 00000B76         ;//ldrb addy,[cpu_zpage,r0,lsr#24] ;//´íÎó:Ö¸¶¨µÄ×ª±ä²»Ô
                       ÊÐí
  265 00000B76 EA4F 6C10       lsr              addy,r0,#24 ;//¸Ä¹ý£¬¼Ó2ÐÐ >>24
                                                            
  266 00000B7A F81B C00C       ldrb             addy,[cpu_zpage,addy]
  267 00000B7E         
  268 00000B7E F100 7080       add              r0,r0,#0x01000000
  269 00000B82         ;//ldrb r1,[cpu_zpage,r0,lsr#24] ;//R1,LSR#2;½«R1ÖÐµÄÄÚÈ
                       ÝÓÒÒÆ2Î»
  270 00000B82 EA4F 6110       lsr              r1,r0,#24   ;//¸Ä¹ý£¬¼Ó2ÐÐ
  271 00000B86 F81B 1001       ldrb             r1,[cpu_zpage,r1]
  272 00000B8A         
  273 00000B8A EA4C 2C01       orr              addy,addy,r1,lsl#8
  431 00000B8E                 opADC
  352 00000B8E                 readmem



ARM Macro Assembler    Page 57 


  108 00000B8E                 [                _type = _ABS
  109 00000B8E                 readmemabs
   69 00000B8E F40C 4160       and              r1,addy,#0xE000
   70 00000B92 F20F 0E0A       adr              lr,%F0
   71 00000B96         ;// ldr pc,[m6502_rmem,r1,lsr#11] ;//in: addy,r1=addy&0x
                       E000 (for rom_R)
   72 00000B96 EA4F 21D1       lsr              r1,r1,#11   ;//¸Ä¹ý£¬¼Ó2ÐÐ  >>1
                                                            1
   73 00000B9A F854 F001       ldr              pc,[m6502_rmem,r1]
   74 00000B9E         
   75 00000B9E         0                                    ;//out: r0=val (bit
                                                            s 8-31=0 (LSR,ROR,I
                                                            NC,DEC,ASL)), addy 
                                                            preserved for RMW i
                                                            nstructions
  110 00000B9E                 ]
  111 00000B9E                 [                _type = _ZP
  113                          ]
  114 00000B9E                 [                _type = _ZPI
  116                          ]
  117 00000B9E                 [                _type = _IMM
  119                          ]
  353 00000B9E EA5F 0158       movs             r1,cycles,lsr#1 ;get C
  354 00000BA2 BF28 F5A0 
              7080             subcs            r0,r0,#0x00000100
  355 00000BA8 EB55 2530       adcs             m6502_a,m6502_a,r0,ror#8
  356 00000BAC EA4F 6325       mov              m6502_nz,m6502_a,asr#24 ;NZ
  357 00000BB0 F048 0841       orr              cycles,cycles,#CYC_C+CYC_V 
                                                            ;Prepare C & V
  358 00000BB4 BF78 F028 
              0840             bicvc            cycles,cycles,#CYC_V ;V
  432 00000BBA                 fetch_c          6
   56 00000BBA F578 68C0       sbcs             cycles,cycles,#6*256 
                                                            ;//CYCLE=256
   57 00000BBE BF5C F819 
              0B01             ldrplb           r0,[m6502_pc],#1
   58 00000BC4 F85A F020       ldrpl            pc,[m6502_optbl,r0,lsl#2]
   59 00000BC8 F8DA F484       ldr              pc,nexttimeout
  433 00000BCC         ;-------------------------------------------------------
                       ---------------------
  434 00000BCC         _65                                  ;   ADC $nn
  435 00000BCC         ;-------------------------------------------------------
                       ---------------------
  436 00000BCC                 doZ
  308 00000BCC 00000002 
                       _type   SETA             _ZP
  309 00000BCC F819 CB01       ldrb             addy,[m6502_pc],#1
  437 00000BD0                 opADC
  352 00000BD0                 readmem
  108 00000BD0                 [                _type = _ABS
  110                          ]
  111 00000BD0                 [                _type = _ZP
  112 00000BD0                 readmemzp
   80 00000BD0 F81B 000C       ldrb             r0,[cpu_zpage,addy]
  113 00000BD4                 ]
  114 00000BD4                 [                _type = _ZPI
  116                          ]
  117 00000BD4                 [                _type = _IMM
  119                          ]



ARM Macro Assembler    Page 58 


  353 00000BD4 EA5F 0158       movs             r1,cycles,lsr#1 ;get C
  354 00000BD8 BF28 F5A0 
              7080             subcs            r0,r0,#0x00000100
  355 00000BDE EB55 2530       adcs             m6502_a,m6502_a,r0,ror#8
  356 00000BE2 EA4F 6325       mov              m6502_nz,m6502_a,asr#24 ;NZ
  357 00000BE6 F048 0841       orr              cycles,cycles,#CYC_C+CYC_V 
                                                            ;Prepare C & V
  358 00000BEA BF78 F028 
              0840             bicvc            cycles,cycles,#CYC_V ;V
  438 00000BF0                 fetch_c          3
   56 00000BF0 F578 7840       sbcs             cycles,cycles,#3*256 
                                                            ;//CYCLE=256
   57 00000BF4 BF5C F819 
              0B01             ldrplb           r0,[m6502_pc],#1
   58 00000BFA F85A F020       ldrpl            pc,[m6502_optbl,r0,lsl#2]
   59 00000BFE F8DA F484       ldr              pc,nexttimeout
  439 00000C02         ;-------------------------------------------------------
                       ---------------------
  440 00000C02         _66                                  ;   ROR $nn
  441 00000C02         ;-------------------------------------------------------
                       ---------------------
  442 00000C02                 doZ
  308 00000C02 00000002 
                       _type   SETA             _ZP
  309 00000C02 F819 CB01       ldrb             addy,[m6502_pc],#1
  443 00000C06                 opROR
  472 00000C06                 readmem
  108 00000C06                 [                _type = _ABS
  110                          ]
  111 00000C06                 [                _type = _ZP
  112 00000C06                 readmemzp
   80 00000C06 F81B 000C       ldrb             r0,[cpu_zpage,addy]
  113 00000C0A                 ]
  114 00000C0A                 [                _type = _ZPI
  116                          ]
  117 00000C0A                 [                _type = _IMM
  119                          ]
  473 00000C0A EA5F 0858       movs             cycles,cycles,lsr#1 ;get C
  474 00000C0E BF28 F440 
              7080             orrcs            r0,r0,#0x100
  475 00000C14 0840            movs             r0,r0,lsr#1
  476 00000C16 EA40 6300       orr              m6502_nz,r0,r0,lsl#24 ;NZ
  477 00000C1A EB48 0808       adc              cycles,cycles,cycles ;Set C
  478 00000C1E                 writemem
  165 00000C1E                 [                _type = _ABS
  167                          ]
  168 00000C1E                 [                _type = _ZP
  169 00000C1E                 writememzp
  151 00000C1E F80B 000C       strb             r0,[cpu_zpage,addy]
  170 00000C22                 ]
  171 00000C22                 [                _type = _ZPI
  173                          ]
  444 00000C22                 fetch            5
   47 00000C22 F5B8 68A0       subs             cycles,cycles,#5*256 ;//CYCLE=2
                                                            56 ;// 3*256 ÕýÊý»ò
                                                            0¾ÍÖ´ÐÐÏÂ2ÌõÖ¸Áî  
   48 00000C26         ;// subs cycles,cycles,#$count  ;//   r8=r8-#$count
   49 00000C26 BF5C F819 
              0B01             ldrplb           r0,[m6502_pc],#1 ; //´Ó´æ´¢Æ÷ÖÐ



ARM Macro Assembler    Page 59 


                                                            ¼ÓÔØ×Ö½Úµ½Ò»¸ö¼Ä´æÆ
                                                            ÷ÖÐ  r0=²Ù×÷Âë
   50 00000C2C F85A F020       ldrpl            pc,[m6502_optbl,r0,lsl#2] ;//r1
                                                            0 ********r0=r0x4**
                                                            *ÔËÐÐ´úÂëµÄµØÖ·****
                                                            *******************
                                                            ***************
   51 00000C30 F8DA F484       ldr              pc,nexttimeout
  445 00000C34         ;-------------------------------------------------------
                       ---------------------
  446 00000C34         _68                                  ;   PLA
  447 00000C34         ;-------------------------------------------------------
                       ---------------------
  448 00000C34                 pop8             m6502_nz
  208 00000C34 F89A 247C       ldrb             r2,m6502_s
  209 00000C38 F102 0201       add              r2,r2,#1
  210 00000C3C F88A 247C       strb             r2,m6502_s
  211 00000C40 F442 7280       orr              r2,r2,#0x100
  212 00000C44 F91B 3002       ldrsb            m6502_nz,[cpu_zpage,r2] ;signed
                                                             for PLA & PLP
  213 00000C48         
  449 00000C48 EA4F 6503       mov              m6502_a,m6502_nz,lsl#24
  450 00000C4C                 fetch            4
   47 00000C4C F5B8 6880       subs             cycles,cycles,#4*256 ;//CYCLE=2
                                                            56 ;// 3*256 ÕýÊý»ò
                                                            0¾ÍÖ´ÐÐÏÂ2ÌõÖ¸Áî  
   48 00000C50         ;// subs cycles,cycles,#$count  ;//   r8=r8-#$count
   49 00000C50 BF5C F819 
              0B01             ldrplb           r0,[m6502_pc],#1 ; //´Ó´æ´¢Æ÷ÖÐ
                                                            ¼ÓÔØ×Ö½Úµ½Ò»¸ö¼Ä´æÆ
                                                            ÷ÖÐ  r0=²Ù×÷Âë
   50 00000C56 F85A F020       ldrpl            pc,[m6502_optbl,r0,lsl#2] ;//r1
                                                            0 ********r0=r0x4**
                                                            *ÔËÐÐ´úÂëµÄµØÖ·****
                                                            *******************
                                                            ***************
   51 00000C5A F8DA F484       ldr              pc,nexttimeout
  451 00000C5E         ;-------------------------------------------------------
                       ---------------------
  452 00000C5E         _69                                  ;   ADC #$nn
  453 00000C5E         ;-------------------------------------------------------
                       ---------------------
  454 00000C5E                 doIMM
  256 00000C5E 00000001 
                       _type   SETA             _IMM
  455 00000C5E                 opADC
  352 00000C5E                 readmem
  108 00000C5E                 [                _type = _ABS
  110                          ]
  111 00000C5E                 [                _type = _ZP
  113                          ]
  114 00000C5E                 [                _type = _ZPI
  116                          ]
  117 00000C5E                 [                _type = _IMM
  118 00000C5E                 readmemimm
   98 00000C5E F819 0B01       ldrb             r0,[m6502_pc],#1
  119 00000C62                 ]
  353 00000C62 EA5F 0158       movs             r1,cycles,lsr#1 ;get C
  354 00000C66 BF28 F5A0 



ARM Macro Assembler    Page 60 


              7080             subcs            r0,r0,#0x00000100
  355 00000C6C EB55 2530       adcs             m6502_a,m6502_a,r0,ror#8
  356 00000C70 EA4F 6325       mov              m6502_nz,m6502_a,asr#24 ;NZ
  357 00000C74 F048 0841       orr              cycles,cycles,#CYC_C+CYC_V 
                                                            ;Prepare C & V
  358 00000C78 BF78 F028 
              0840             bicvc            cycles,cycles,#CYC_V ;V
  456 00000C7E                 fetch_c          2
   56 00000C7E F578 7800       sbcs             cycles,cycles,#2*256 
                                                            ;//CYCLE=256
   57 00000C82 BF5C F819 
              0B01             ldrplb           r0,[m6502_pc],#1
   58 00000C88 F85A F020       ldrpl            pc,[m6502_optbl,r0,lsl#2]
   59 00000C8C F8DA F484       ldr              pc,nexttimeout
  457 00000C90         ;-------------------------------------------------------
                       ---------------------
  458 00000C90         _6A                                  ;   ROR
  459 00000C90         ;-------------------------------------------------------
                       ---------------------
  460 00000C90 EA5F 0858       movs             cycles,cycles,lsr#1 ;get C
  461 00000C94 EA4F 0535       mov              m6502_a,m6502_a,rrx
  462 00000C98 162B            movs             m6502_nz,m6502_a,asr#24 ;NZ
  463 00000C9A F005 457F       and              m6502_a,m6502_a,#0xff000000
  464 00000C9E EB48 0808       adc              cycles,cycles,cycles ;Set C
  465 00000CA2                 fetch            2
   47 00000CA2 F5B8 7800       subs             cycles,cycles,#2*256 ;//CYCLE=2
                                                            56 ;// 3*256 ÕýÊý»ò
                                                            0¾ÍÖ´ÐÐÏÂ2ÌõÖ¸Áî  
   48 00000CA6         ;// subs cycles,cycles,#$count  ;//   r8=r8-#$count
   49 00000CA6 BF5C F819 
              0B01             ldrplb           r0,[m6502_pc],#1 ; //´Ó´æ´¢Æ÷ÖÐ
                                                            ¼ÓÔØ×Ö½Úµ½Ò»¸ö¼Ä´æÆ
                                                            ÷ÖÐ  r0=²Ù×÷Âë
   50 00000CAC F85A F020       ldrpl            pc,[m6502_optbl,r0,lsl#2] ;//r1
                                                            0 ********r0=r0x4**
                                                            *ÔËÐÐ´úÂëµÄµØÖ·****
                                                            *******************
                                                            ***************
   51 00000CB0 F8DA F484       ldr              pc,nexttimeout
  466 00000CB4         ;-------------------------------------------------------
                       ---------------------
  467 00000CB4         _6C                                  ;   JMP ($nnnn) JMP
                                                             ($data16) ¼ä½ÓÑ°Ö·
                                                             ******************
                                                            ***************
  468 00000CB4         ;-------------------------------------------------------
                       ---------------------  
  469 00000CB4                 doABS
  228 00000CB4 00000004 
                       _type   SETA             _ABS
  229 00000CB4 F819 CB01       ldrb             addy,[m6502_pc],#1
  230 00000CB8 F819 0B01       ldrb             r0,[m6502_pc],#1
  231 00000CBC EA4C 2C00       orr              addy,addy,r0,lsl#8
  470 00000CC0 F50A 6188       adr              r1,memmap_tbl
  471 00000CC4 F40C 4260       and              r2,addy,#0xE000 ;v9°æ ³Ë·¨   
  472 00000CC8         ; ldr r1,[r1,r2,lsr#11]      ;>>11 addr&0x7FF
  473 00000CC8 EA4F 20D2       lsr              r0,r2,#11   ;v9°æ   
  474 00000CCC 5809            ldr              r1,[r1,r0]  ;v9°æ   ;ÔÚÊý¾Ý´«ËÍ
                                                            Ö®Ç°,½«Æ«ÒÆÁ¿¼Óµ½Rn



ARM Macro Assembler    Page 61 


                                                             ÖÐ,Æä½á¹û×÷Îª´«ËÍÊ
                                                            ý¾ÝµÄ´æ´¢µØÖ·
  475 00000CCE         
  476 00000CCE F811 900C       ldrb             m6502_pc,[r1,addy] ;//ÈôÊ¹ÓÃºó×
                                                            º"!",Ôò½á¹ûÐ´»Øµ½Rn
                                                            ÖÐ
  477 00000CD2 4461            add              r1,r1,addy  ;v9°æ
  478 00000CD4         
  479 00000CD4 7848            ldrb             r0,[r1,#1]  ;v9°æ
  480 00000CD6 EA49 2900       orr              m6502_pc,m6502_pc,r0,lsl#8 ;m65
                                                            02_pc=r9Ê¹ÓÃORR Ö¸Á
                                                            î½«½üR9µÄ¸ß8 Î»Êý¾Ý
                                                            ÒÆÈëµ½R0µÍ8Î»
  481 00000CDA                 encodePC
   15 00000CDA F409 4160       and              r1,m6502_pc,#0xE000 ;//r9ºÍ0xe0
                                                            00°´Î»ÓëÔËËã
   16 00000CDE F50A 6288       adr              r2,memmap_tbl ;//°Ñ´æ´¢Æ÷Ó³ÏóµØ
                                                            Ö·¼ÓÔØµ½r2
   17 00000CE2         ;// ldr r0,[r2,r1,lsr#11]    ;//¸Ä¹ý£¬¼Ó2ÐÐ 
   18 00000CE2 EA4F 20D1       lsr              r0,r1,#11   ;//>>11Î»   r1/2048
                                                            
   19 00000CE6 5810            ldr              r0,[r2,r0]  ;//¶ÁÈ¡r2µØÖ·+r1Æ«Ò
                                                            ÆµÄÊý¾Ýµ½r0
   20 00000CE8         
   21 00000CE8         
   22 00000CE8 F8CA 0480       str              r0,lastbank ;//±£´æ6502PC´Ó ROM
                                                            µÄ×îºóÆ«ÒÆÁ¿ 
   23 00000CEC 4481            add              m6502_pc,m6502_pc,r0 
                                                            ;//m6502_pc+r0
  482 00000CEE                 fetch            5
   47 00000CEE F5B8 68A0       subs             cycles,cycles,#5*256 ;//CYCLE=2
                                                            56 ;// 3*256 ÕýÊý»ò
                                                            0¾ÍÖ´ÐÐÏÂ2ÌõÖ¸Áî  
   48 00000CF2         ;// subs cycles,cycles,#$count  ;//   r8=r8-#$count
   49 00000CF2 BF5C F819 
              0B01             ldrplb           r0,[m6502_pc],#1 ; //´Ó´æ´¢Æ÷ÖÐ
                                                            ¼ÓÔØ×Ö½Úµ½Ò»¸ö¼Ä´æÆ
                                                            ÷ÖÐ  r0=²Ù×÷Âë
   50 00000CF8 F85A F020       ldrpl            pc,[m6502_optbl,r0,lsl#2] ;//r1
                                                            0 ********r0=r0x4**
                                                            *ÔËÐÐ´úÂëµÄµØÖ·****
                                                            *******************
                                                            ***************
   51 00000CFC F8DA F484       ldr              pc,nexttimeout
  483 00000D00         ;-------------------------------------------------------
                       ---------------------
  484 00000D00         _6D                                  ;   ADC $nnnn
  485 00000D00         ;-------------------------------------------------------
                       ---------------------
  486 00000D00                 doABS
  228 00000D00 00000004 
                       _type   SETA             _ABS
  229 00000D00 F819 CB01       ldrb             addy,[m6502_pc],#1
  230 00000D04 F819 0B01       ldrb             r0,[m6502_pc],#1
  231 00000D08 EA4C 2C00       orr              addy,addy,r0,lsl#8
  487 00000D0C                 opADC
  352 00000D0C                 readmem
  108 00000D0C                 [                _type = _ABS
  109 00000D0C                 readmemabs



ARM Macro Assembler    Page 62 


   69 00000D0C F40C 4160       and              r1,addy,#0xE000
   70 00000D10 F20F 0E08       adr              lr,%F0
   71 00000D14         ;// ldr pc,[m6502_rmem,r1,lsr#11] ;//in: addy,r1=addy&0x
                       E000 (for rom_R)
   72 00000D14 EA4F 21D1       lsr              r1,r1,#11   ;//¸Ä¹ý£¬¼Ó2ÐÐ  >>1
                                                            1
   73 00000D18 F854 F001       ldr              pc,[m6502_rmem,r1]
   74 00000D1C         
   75 00000D1C         0                                    ;//out: r0=val (bit
                                                            s 8-31=0 (LSR,ROR,I
                                                            NC,DEC,ASL)), addy 
                                                            preserved for RMW i
                                                            nstructions
  110 00000D1C                 ]
  111 00000D1C                 [                _type = _ZP
  113                          ]
  114 00000D1C                 [                _type = _ZPI
  116                          ]
  117 00000D1C                 [                _type = _IMM
  119                          ]
  353 00000D1C EA5F 0158       movs             r1,cycles,lsr#1 ;get C
  354 00000D20 BF28 F5A0 
              7080             subcs            r0,r0,#0x00000100
  355 00000D26 EB55 2530       adcs             m6502_a,m6502_a,r0,ror#8
  356 00000D2A EA4F 6325       mov              m6502_nz,m6502_a,asr#24 ;NZ
  357 00000D2E F048 0841       orr              cycles,cycles,#CYC_C+CYC_V 
                                                            ;Prepare C & V
  358 00000D32 BF78 F028 
              0840             bicvc            cycles,cycles,#CYC_V ;V
  488 00000D38                 fetch_c          4
   56 00000D38 F578 6880       sbcs             cycles,cycles,#4*256 
                                                            ;//CYCLE=256
   57 00000D3C BF5C F819 
              0B01             ldrplb           r0,[m6502_pc],#1
   58 00000D42 F85A F020       ldrpl            pc,[m6502_optbl,r0,lsl#2]
   59 00000D46 F8DA F484       ldr              pc,nexttimeout
  489 00000D4A         ;-------------------------------------------------------
                       ---------------------
  490 00000D4A         _6E                                  ;   ROR $nnnn
  491 00000D4A         ;-------------------------------------------------------
                       ---------------------
  492 00000D4A                 doABS
  228 00000D4A 00000004 
                       _type   SETA             _ABS
  229 00000D4A F819 CB01       ldrb             addy,[m6502_pc],#1
  230 00000D4E F819 0B01       ldrb             r0,[m6502_pc],#1
  231 00000D52 EA4C 2C00       orr              addy,addy,r0,lsl#8
  493 00000D56                 opROR
  472 00000D56                 readmem
  108 00000D56                 [                _type = _ABS
  109 00000D56                 readmemabs
   69 00000D56 F40C 4160       and              r1,addy,#0xE000
   70 00000D5A F20F 0E0A       adr              lr,%F0
   71 00000D5E         ;// ldr pc,[m6502_rmem,r1,lsr#11] ;//in: addy,r1=addy&0x
                       E000 (for rom_R)
   72 00000D5E EA4F 21D1       lsr              r1,r1,#11   ;//¸Ä¹ý£¬¼Ó2ÐÐ  >>1
                                                            1
   73 00000D62 F854 F001       ldr              pc,[m6502_rmem,r1]
   74 00000D66         



ARM Macro Assembler    Page 63 


   75 00000D66         0                                    ;//out: r0=val (bit
                                                            s 8-31=0 (LSR,ROR,I
                                                            NC,DEC,ASL)), addy 
                                                            preserved for RMW i
                                                            nstructions
  110 00000D66                 ]
  111 00000D66                 [                _type = _ZP
  113                          ]
  114 00000D66                 [                _type = _ZPI
  116                          ]
  117 00000D66                 [                _type = _IMM
  119                          ]
  473 00000D66 EA5F 0858       movs             cycles,cycles,lsr#1 ;get C
  474 00000D6A BF28 F440 
              7080             orrcs            r0,r0,#0x100
  475 00000D70 0840            movs             r0,r0,lsr#1
  476 00000D72 EA40 6300       orr              m6502_nz,r0,r0,lsl#24 ;NZ
  477 00000D76 EB48 0808       adc              cycles,cycles,cycles ;Set C
  478 00000D7A                 writemem
  165 00000D7A                 [                _type = _ABS
  166 00000D7A                 writememabs
  139 00000D7A F40C 4160       and              r1,addy,#0xe000
  140 00000D7E F50A 6284       adr              r2,writemem_tbl
  141 00000D82 F20F 0E0A       adr              lr,%F0
  142 00000D86         ;// ldr pc,[r2,r1,lsr#11] ;//in: addy,r0=val(bits 8-31=?
                       )
  143 00000D86 EA4F 21D1       lsr              r1,r1,#11   ;//¸Ä¹ý£¬¼Ó2ÐÐ >>11
                                                            
  144 00000D8A F852 F001       ldr              pc,[r2,r1]
  145 00000D8E         
  146 00000D8E         0                                    ;out: r0,r1,r2,addy
                                                            =?
  167 00000D8E                 ]
  168 00000D8E                 [                _type = _ZP
  170                          ]
  171 00000D8E                 [                _type = _ZPI
  173                          ]
  494 00000D8E                 fetch            6
   47 00000D8E F5B8 68C0       subs             cycles,cycles,#6*256 ;//CYCLE=2
                                                            56 ;// 3*256 ÕýÊý»ò
                                                            0¾ÍÖ´ÐÐÏÂ2ÌõÖ¸Áî  
   48 00000D92         ;// subs cycles,cycles,#$count  ;//   r8=r8-#$count
   49 00000D92 BF5C F819 
              0B01             ldrplb           r0,[m6502_pc],#1 ; //´Ó´æ´¢Æ÷ÖÐ
                                                            ¼ÓÔØ×Ö½Úµ½Ò»¸ö¼Ä´æÆ
                                                            ÷ÖÐ  r0=²Ù×÷Âë
   50 00000D98 F85A F020       ldrpl            pc,[m6502_optbl,r0,lsl#2] ;//r1
                                                            0 ********r0=r0x4**
                                                            *ÔËÐÐ´úÂëµÄµØÖ·****
                                                            *******************
                                                            ***************
   51 00000D9C F8DA F484       ldr              pc,nexttimeout
  495 00000DA0         ;-------------------------------------------------------
                       ---------------------
  496 00000DA0         _70                                  ;   BVS *
  497 00000DA0         ;-------------------------------------------------------
                       ---------------------
  498 00000DA0 F018 0F40       tst              cycles,#CYC_V
  499 00000DA4 F919 0B01       ldrsb            r0,[m6502_pc],#1



ARM Macro Assembler    Page 64 


  500 00000DA8 BF1C 4481       addne            m6502_pc,m6502_pc,r0
  501 00000DAC         ; subne cycles,cycles,#3*CYCLE
  502 00000DAC F5A8 7880       subne            cycles,cycles,#256
  503 00000DB0                 fetch            2
   47 00000DB0 F5B8 7800       subs             cycles,cycles,#2*256 ;//CYCLE=2
                                                            56 ;// 3*256 ÕýÊý»ò
                                                            0¾ÍÖ´ÐÐÏÂ2ÌõÖ¸Áî  
   48 00000DB4         ;// subs cycles,cycles,#$count  ;//   r8=r8-#$count
   49 00000DB4 BF5C F819 
              0B01             ldrplb           r0,[m6502_pc],#1 ; //´Ó´æ´¢Æ÷ÖÐ
                                                            ¼ÓÔØ×Ö½Úµ½Ò»¸ö¼Ä´æÆ
                                                            ÷ÖÐ  r0=²Ù×÷Âë
   50 00000DBA F85A F020       ldrpl            pc,[m6502_optbl,r0,lsl#2] ;//r1
                                                            0 ********r0=r0x4**
                                                            *ÔËÐÐ´úÂëµÄµØÖ·****
                                                            *******************
                                                            ***************
   51 00000DBE F8DA F484       ldr              pc,nexttimeout
  504 00000DC2         ;-------------------------------------------------------
                       ---------------------
  505 00000DC2         _71                                  ;   ADC ($nn),Y
  506 00000DC2         ;-------------------------------------------------------
                       ---------------------
  507 00000DC2                 doIIY
  278 00000DC2 00000004 
                       _type   SETA             _ABS
  279 00000DC2 F819 0B01       ldrb             r0,[m6502_pc],#1
  280 00000DC6         ;// ldrb addy,[r0,cpu_zpage]! ;;ÔÚÊý¾Ý´«ËÍÖ®Ç°,½«Æ«ÒÆÁ¿¼
                       Óµ½Rn ÖÐ,Æä½á¹û×÷Îª´«ËÍÊý¾ÝµÄ´æ´¢µØÖ·
  281 00000DC6         ;//ÈôÊ¹ÓÃºó×º"!",Ôò½á¹ûÐ´»Øµ½RnÖÐ
  282 00000DC6 F810 C00B       ldrb             addy,[r0,cpu_zpage]
  283 00000DCA 4458            add              r0,r0,cpu_zpage ;//////////////
                                                            ///////////////////
                                                            /////
  284 00000DCC         
  285 00000DCC         
  286 00000DCC 7841            ldrb             r1,[r0,#1]
  287 00000DCE EA4C 2C01       orr              addy,addy,r1,lsl#8
  288 00000DD2 EB0C 6C17       add              addy,addy,m6502_y,lsr#24
  289 00000DD6         ; bic addy,addy,#0xff0000 ;Zelda2 needs this
  508 00000DD6                 opADC
  352 00000DD6                 readmem
  108 00000DD6                 [                _type = _ABS
  109 00000DD6                 readmemabs
   69 00000DD6 F40C 4160       and              r1,addy,#0xE000
   70 00000DDA F20F 0E0A       adr              lr,%F0
   71 00000DDE         ;// ldr pc,[m6502_rmem,r1,lsr#11] ;//in: addy,r1=addy&0x
                       E000 (for rom_R)
   72 00000DDE EA4F 21D1       lsr              r1,r1,#11   ;//¸Ä¹ý£¬¼Ó2ÐÐ  >>1
                                                            1
   73 00000DE2 F854 F001       ldr              pc,[m6502_rmem,r1]
   74 00000DE6         
   75 00000DE6         0                                    ;//out: r0=val (bit
                                                            s 8-31=0 (LSR,ROR,I
                                                            NC,DEC,ASL)), addy 
                                                            preserved for RMW i
                                                            nstructions
  110 00000DE6                 ]
  111 00000DE6                 [                _type = _ZP



ARM Macro Assembler    Page 65 


  113                          ]
  114 00000DE6                 [                _type = _ZPI
  116                          ]
  117 00000DE6                 [                _type = _IMM
  119                          ]
  353 00000DE6 EA5F 0158       movs             r1,cycles,lsr#1 ;get C
  354 00000DEA BF28 F5A0 
              7080             subcs            r0,r0,#0x00000100
  355 00000DF0 EB55 2530       adcs             m6502_a,m6502_a,r0,ror#8
  356 00000DF4 EA4F 6325       mov              m6502_nz,m6502_a,asr#24 ;NZ
  357 00000DF8 F048 0841       orr              cycles,cycles,#CYC_C+CYC_V 
                                                            ;Prepare C & V
  358 00000DFC BF78 F028 
              0840             bicvc            cycles,cycles,#CYC_V ;V
  509 00000E02                 fetch_c          5
   56 00000E02 F578 68A0       sbcs             cycles,cycles,#5*256 
                                                            ;//CYCLE=256
   57 00000E06 BF5C F819 
              0B01             ldrplb           r0,[m6502_pc],#1
   58 00000E0C F85A F020       ldrpl            pc,[m6502_optbl,r0,lsl#2]
   59 00000E10 F8DA F484       ldr              pc,nexttimeout
  510 00000E14         ;-------------------------------------------------------
                       ---------------------
  511 00000E14         _75                                  ;   ADC $nn,X
  512 00000E14         ;-------------------------------------------------------
                       ---------------------
  513 00000E14                 doZIXf
  328 00000E14 00000003 
                       _type   SETA             _ZPI
  329 00000E14 F819 CB01       ldrb             addy,[m6502_pc],#1
  330 00000E18 EB06 6C0C       add              addy,m6502_x,addy,lsl#24
  514 00000E1C                 opADC
  352 00000E1C                 readmem
  108 00000E1C                 [                _type = _ABS
  110                          ]
  111 00000E1C                 [                _type = _ZP
  113                          ]
  114 00000E1C                 [                _type = _ZPI
  115 00000E1C                 readmemzpi
   85 00000E1C         ;// ldrb r0,[cpu_zpage,addy,lsr#24]
   86 00000E1C EA4F 601C       lsr              r0,addy,#24 ;//¸Ä¹ý£¬¼Ó3ÐÐ
   87 00000E20 F81B 0000       ldrb             r0,[cpu_zpage,r0]
   88 00000E24         
  116 00000E24                 ]
  117 00000E24                 [                _type = _IMM
  119                          ]
  353 00000E24 EA5F 0158       movs             r1,cycles,lsr#1 ;get C
  354 00000E28 BF28 F5A0 
              7080             subcs            r0,r0,#0x00000100
  355 00000E2E EB55 2530       adcs             m6502_a,m6502_a,r0,ror#8
  356 00000E32 EA4F 6325       mov              m6502_nz,m6502_a,asr#24 ;NZ
  357 00000E36 F048 0841       orr              cycles,cycles,#CYC_C+CYC_V 
                                                            ;Prepare C & V
  358 00000E3A BF78 F028 
              0840             bicvc            cycles,cycles,#CYC_V ;V
  515 00000E40                 fetch_c          4
   56 00000E40 F578 6880       sbcs             cycles,cycles,#4*256 
                                                            ;//CYCLE=256
   57 00000E44 BF5C F819 



ARM Macro Assembler    Page 66 


              0B01             ldrplb           r0,[m6502_pc],#1
   58 00000E4A F85A F020       ldrpl            pc,[m6502_optbl,r0,lsl#2]
   59 00000E4E F8DA F484       ldr              pc,nexttimeout
  516 00000E52         ;-------------------------------------------------------
                       ---------------------
  517 00000E52         _76                                  ;   ROR $nn,X
  518 00000E52         ;-------------------------------------------------------
                       ---------------------
  519 00000E52                 doZIXf
  328 00000E52 00000003 
                       _type   SETA             _ZPI
  329 00000E52 F819 CB01       ldrb             addy,[m6502_pc],#1
  330 00000E56 EB06 6C0C       add              addy,m6502_x,addy,lsl#24
  520 00000E5A                 opROR
  472 00000E5A                 readmem
  108 00000E5A                 [                _type = _ABS
  110                          ]
  111 00000E5A                 [                _type = _ZP
  113                          ]
  114 00000E5A                 [                _type = _ZPI
  115 00000E5A                 readmemzpi
   85 00000E5A         ;// ldrb r0,[cpu_zpage,addy,lsr#24]
   86 00000E5A EA4F 601C       lsr              r0,addy,#24 ;//¸Ä¹ý£¬¼Ó3ÐÐ
   87 00000E5E F81B 0000       ldrb             r0,[cpu_zpage,r0]
   88 00000E62         
  116 00000E62                 ]
  117 00000E62                 [                _type = _IMM
  119                          ]
  473 00000E62 EA5F 0858       movs             cycles,cycles,lsr#1 ;get C
  474 00000E66 BF28 F440 
              7080             orrcs            r0,r0,#0x100
  475 00000E6C 0840            movs             r0,r0,lsr#1
  476 00000E6E EA40 6300       orr              m6502_nz,r0,r0,lsl#24 ;NZ
  477 00000E72 EB48 0808       adc              cycles,cycles,cycles ;Set C
  478 00000E76                 writemem
  165 00000E76                 [                _type = _ABS
  167                          ]
  168 00000E76                 [                _type = _ZP
  170                          ]
  171 00000E76                 [                _type = _ZPI
  172 00000E76                 writememzpi
  156 00000E76         ;// strb r0,[cpu_zpage,addy,lsr#24]
  157 00000E76 EA4F 611C       lsr              r1,addy,#24 ;//¸Ä¹ý£¬¼Ó2ÐÐ  >>2
                                                            4
  158 00000E7A F80B 0001       strb             r0,[cpu_zpage,r1]
  159 00000E7E         
  160 00000E7E         
  173 00000E7E                 ]
  521 00000E7E                 fetch            6
   47 00000E7E F5B8 68C0       subs             cycles,cycles,#6*256 ;//CYCLE=2
                                                            56 ;// 3*256 ÕýÊý»ò
                                                            0¾ÍÖ´ÐÐÏÂ2ÌõÖ¸Áî  
   48 00000E82         ;// subs cycles,cycles,#$count  ;//   r8=r8-#$count
   49 00000E82 BF5C F819 
              0B01             ldrplb           r0,[m6502_pc],#1 ; //´Ó´æ´¢Æ÷ÖÐ
                                                            ¼ÓÔØ×Ö½Úµ½Ò»¸ö¼Ä´æÆ
                                                            ÷ÖÐ  r0=²Ù×÷Âë
   50 00000E88 F85A F020       ldrpl            pc,[m6502_optbl,r0,lsl#2] ;//r1
                                                            0 ********r0=r0x4**



ARM Macro Assembler    Page 67 


                                                            *ÔËÐÐ´úÂëµÄµØÖ·****
                                                            *******************
                                                            ***************
   51 00000E8C F8DA F484       ldr              pc,nexttimeout
  522 00000E90         ;-------------------------------------------------------
                       ---------------------
  523 00000E90         _78                                  ;   SEI
  524 00000E90         ;-------------------------------------------------------
                       ---------------------
  525 00000E90 F048 0804       orr              cycles,cycles,#CYC_I
  526 00000E94                 fetch            2
   47 00000E94 F5B8 7800       subs             cycles,cycles,#2*256 ;//CYCLE=2
                                                            56 ;// 3*256 ÕýÊý»ò
                                                            0¾ÍÖ´ÐÐÏÂ2ÌõÖ¸Áî  
   48 00000E98         ;// subs cycles,cycles,#$count  ;//   r8=r8-#$count
   49 00000E98 BF5C F819 
              0B01             ldrplb           r0,[m6502_pc],#1 ; //´Ó´æ´¢Æ÷ÖÐ
                                                            ¼ÓÔØ×Ö½Úµ½Ò»¸ö¼Ä´æÆ
                                                            ÷ÖÐ  r0=²Ù×÷Âë
   50 00000E9E F85A F020       ldrpl            pc,[m6502_optbl,r0,lsl#2] ;//r1
                                                            0 ********r0=r0x4**
                                                            *ÔËÐÐ´úÂëµÄµØÖ·****
                                                            *******************
                                                            ***************
   51 00000EA2 F8DA F484       ldr              pc,nexttimeout
  527 00000EA6         ;-------------------------------------------------------
                       ---------------------
  528 00000EA6         _79                                  ;   ADC $nnnn,Y
  529 00000EA6         ;-------------------------------------------------------
                       ---------------------
  530 00000EA6                 doAIY
  246 00000EA6 00000004 
                       _type   SETA             _ABS
  247 00000EA6 F819 CB01       ldrb             addy,[m6502_pc],#1
  248 00000EAA F819 0B01       ldrb             r0,[m6502_pc],#1
  249 00000EAE EA4C 2C00       orr              addy,addy,r0,lsl#8
  250 00000EB2 EB0C 6C17       add              addy,addy,m6502_y,lsr#24
  251 00000EB6         ; bic addy,addy,#0xff0000 ;Tecmo Bowl needs this
  531 00000EB6                 opADC
  352 00000EB6                 readmem
  108 00000EB6                 [                _type = _ABS
  109 00000EB6                 readmemabs
   69 00000EB6 F40C 4160       and              r1,addy,#0xE000
   70 00000EBA F20F 0E0A       adr              lr,%F0
   71 00000EBE         ;// ldr pc,[m6502_rmem,r1,lsr#11] ;//in: addy,r1=addy&0x
                       E000 (for rom_R)
   72 00000EBE EA4F 21D1       lsr              r1,r1,#11   ;//¸Ä¹ý£¬¼Ó2ÐÐ  >>1
                                                            1
   73 00000EC2 F854 F001       ldr              pc,[m6502_rmem,r1]
   74 00000EC6         
   75 00000EC6         0                                    ;//out: r0=val (bit
                                                            s 8-31=0 (LSR,ROR,I
                                                            NC,DEC,ASL)), addy 
                                                            preserved for RMW i
                                                            nstructions
  110 00000EC6                 ]
  111 00000EC6                 [                _type = _ZP
  113                          ]
  114 00000EC6                 [                _type = _ZPI



ARM Macro Assembler    Page 68 


  116                          ]
  117 00000EC6                 [                _type = _IMM
  119                          ]
  353 00000EC6 EA5F 0158       movs             r1,cycles,lsr#1 ;get C
  354 00000ECA BF28 F5A0 
              7080             subcs            r0,r0,#0x00000100
  355 00000ED0 EB55 2530       adcs             m6502_a,m6502_a,r0,ror#8
  356 00000ED4 EA4F 6325       mov              m6502_nz,m6502_a,asr#24 ;NZ
  357 00000ED8 F048 0841       orr              cycles,cycles,#CYC_C+CYC_V 
                                                            ;Prepare C & V
  358 00000EDC BF78 F028 
              0840             bicvc            cycles,cycles,#CYC_V ;V
  532 00000EE2                 fetch_c          4
   56 00000EE2 F578 6880       sbcs             cycles,cycles,#4*256 
                                                            ;//CYCLE=256
   57 00000EE6 BF5C F819 
              0B01             ldrplb           r0,[m6502_pc],#1
   58 00000EEC F85A F020       ldrpl            pc,[m6502_optbl,r0,lsl#2]
   59 00000EF0 F8DA F484       ldr              pc,nexttimeout
  533 00000EF4         ;-------------------------------------------------------
                       ---------------------
  534 00000EF4         _7D                                  ;   ADC $nnnn,X
  535 00000EF4         ;-------------------------------------------------------
                       ---------------------
  536 00000EF4                 doAIX
  236 00000EF4 00000004 
                       _type   SETA             _ABS
  237 00000EF4 F819 CB01       ldrb             addy,[m6502_pc],#1
  238 00000EF8 F819 0B01       ldrb             r0,[m6502_pc],#1
  239 00000EFC EA4C 2C00       orr              addy,addy,r0,lsl#8
  240 00000F00 EB0C 6C16       add              addy,addy,m6502_x,lsr#24
  241 00000F04         ; bic addy,addy,#0xff0000 ;Base Wars needs this
  537 00000F04                 opADC
  352 00000F04                 readmem
  108 00000F04                 [                _type = _ABS
  109 00000F04                 readmemabs
   69 00000F04 F40C 4160       and              r1,addy,#0xE000
   70 00000F08 F20F 0E08       adr              lr,%F0
   71 00000F0C         ;// ldr pc,[m6502_rmem,r1,lsr#11] ;//in: addy,r1=addy&0x
                       E000 (for rom_R)
   72 00000F0C EA4F 21D1       lsr              r1,r1,#11   ;//¸Ä¹ý£¬¼Ó2ÐÐ  >>1
                                                            1
   73 00000F10 F854 F001       ldr              pc,[m6502_rmem,r1]
   74 00000F14         
   75 00000F14         0                                    ;//out: r0=val (bit
                                                            s 8-31=0 (LSR,ROR,I
                                                            NC,DEC,ASL)), addy 
                                                            preserved for RMW i
                                                            nstructions
  110 00000F14                 ]
  111 00000F14                 [                _type = _ZP
  113                          ]
  114 00000F14                 [                _type = _ZPI
  116                          ]
  117 00000F14                 [                _type = _IMM
  119                          ]
  353 00000F14 EA5F 0158       movs             r1,cycles,lsr#1 ;get C
  354 00000F18 BF28 F5A0 
              7080             subcs            r0,r0,#0x00000100



ARM Macro Assembler    Page 69 


  355 00000F1E EB55 2530       adcs             m6502_a,m6502_a,r0,ror#8
  356 00000F22 EA4F 6325       mov              m6502_nz,m6502_a,asr#24 ;NZ
  357 00000F26 F048 0841       orr              cycles,cycles,#CYC_C+CYC_V 
                                                            ;Prepare C & V
  358 00000F2A BF78 F028 
              0840             bicvc            cycles,cycles,#CYC_V ;V
  538 00000F30                 fetch_c          4
   56 00000F30 F578 6880       sbcs             cycles,cycles,#4*256 
                                                            ;//CYCLE=256
   57 00000F34 BF5C F819 
              0B01             ldrplb           r0,[m6502_pc],#1
   58 00000F3A F85A F020       ldrpl            pc,[m6502_optbl,r0,lsl#2]
   59 00000F3E F8DA F484       ldr              pc,nexttimeout
  539 00000F42         ;-------------------------------------------------------
                       ---------------------
  540 00000F42         _7E                                  ;   ROR $nnnn,X
  541 00000F42         ;-------------------------------------------------------
                       ---------------------
  542 00000F42                 doAIX
  236 00000F42 00000004 
                       _type   SETA             _ABS
  237 00000F42 F819 CB01       ldrb             addy,[m6502_pc],#1
  238 00000F46 F819 0B01       ldrb             r0,[m6502_pc],#1
  239 00000F4A EA4C 2C00       orr              addy,addy,r0,lsl#8
  240 00000F4E EB0C 6C16       add              addy,addy,m6502_x,lsr#24
  241 00000F52         ; bic addy,addy,#0xff0000 ;Base Wars needs this
  543 00000F52                 opROR
  472 00000F52                 readmem
  108 00000F52                 [                _type = _ABS
  109 00000F52                 readmemabs
   69 00000F52 F40C 4160       and              r1,addy,#0xE000
   70 00000F56 F20F 0E0A       adr              lr,%F0
   71 00000F5A         ;// ldr pc,[m6502_rmem,r1,lsr#11] ;//in: addy,r1=addy&0x
                       E000 (for rom_R)
   72 00000F5A EA4F 21D1       lsr              r1,r1,#11   ;//¸Ä¹ý£¬¼Ó2ÐÐ  >>1
                                                            1
   73 00000F5E F854 F001       ldr              pc,[m6502_rmem,r1]
   74 00000F62         
   75 00000F62         0                                    ;//out: r0=val (bit
                                                            s 8-31=0 (LSR,ROR,I
                                                            NC,DEC,ASL)), addy 
                                                            preserved for RMW i
                                                            nstructions
  110 00000F62                 ]
  111 00000F62                 [                _type = _ZP
  113                          ]
  114 00000F62                 [                _type = _ZPI
  116                          ]
  117 00000F62                 [                _type = _IMM
  119                          ]
  473 00000F62 EA5F 0858       movs             cycles,cycles,lsr#1 ;get C
  474 00000F66 BF28 F440 
              7080             orrcs            r0,r0,#0x100
  475 00000F6C 0840            movs             r0,r0,lsr#1
  476 00000F6E EA40 6300       orr              m6502_nz,r0,r0,lsl#24 ;NZ
  477 00000F72 EB48 0808       adc              cycles,cycles,cycles ;Set C
  478 00000F76                 writemem
  165 00000F76                 [                _type = _ABS
  166 00000F76                 writememabs



ARM Macro Assembler    Page 70 


  139 00000F76 F40C 4160       and              r1,addy,#0xe000
  140 00000F7A F50A 6284       adr              r2,writemem_tbl
  141 00000F7E F20F 0E0A       adr              lr,%F0
  142 00000F82         ;// ldr pc,[r2,r1,lsr#11] ;//in: addy,r0=val(bits 8-31=?
                       )
  143 00000F82 EA4F 21D1       lsr              r1,r1,#11   ;//¸Ä¹ý£¬¼Ó2ÐÐ >>11
                                                            
  144 00000F86 F852 F001       ldr              pc,[r2,r1]
  145 00000F8A         
  146 00000F8A         0                                    ;out: r0,r1,r2,addy
                                                            =?
  167 00000F8A                 ]
  168 00000F8A                 [                _type = _ZP
  170                          ]
  171 00000F8A                 [                _type = _ZPI
  173                          ]
  544 00000F8A                 fetch            7
   47 00000F8A F5B8 68E0       subs             cycles,cycles,#7*256 ;//CYCLE=2
                                                            56 ;// 3*256 ÕýÊý»ò
                                                            0¾ÍÖ´ÐÐÏÂ2ÌõÖ¸Áî  
   48 00000F8E         ;// subs cycles,cycles,#$count  ;//   r8=r8-#$count
   49 00000F8E BF5C F819 
              0B01             ldrplb           r0,[m6502_pc],#1 ; //´Ó´æ´¢Æ÷ÖÐ
                                                            ¼ÓÔØ×Ö½Úµ½Ò»¸ö¼Ä´æÆ
                                                            ÷ÖÐ  r0=²Ù×÷Âë
   50 00000F94 F85A F020       ldrpl            pc,[m6502_optbl,r0,lsl#2] ;//r1
                                                            0 ********r0=r0x4**
                                                            *ÔËÐÐ´úÂëµÄµØÖ·****
                                                            *******************
                                                            ***************
   51 00000F98 F8DA F484       ldr              pc,nexttimeout
  545 00000F9C         ;-------------------------------------------------------
                       ---------------------
  546 00000F9C         _81                                  ;   STA ($nn,X)
  547 00000F9C         ;-------------------------------------------------------
                       ---------------------
  548 00000F9C                 doIIX
  261 00000F9C 00000004 
                       _type   SETA             _ABS
  262 00000F9C F819 0B01       ldrb             r0,[m6502_pc],#1
  263 00000FA0 EB06 6000       add              r0,m6502_x,r0,lsl#24
  264 00000FA4         ;//ldrb addy,[cpu_zpage,r0,lsr#24] ;//´íÎó:Ö¸¶¨µÄ×ª±ä²»Ô
                       ÊÐí
  265 00000FA4 EA4F 6C10       lsr              addy,r0,#24 ;//¸Ä¹ý£¬¼Ó2ÐÐ >>24
                                                            
  266 00000FA8 F81B C00C       ldrb             addy,[cpu_zpage,addy]
  267 00000FAC         
  268 00000FAC F100 7080       add              r0,r0,#0x01000000
  269 00000FB0         ;//ldrb r1,[cpu_zpage,r0,lsr#24] ;//R1,LSR#2;½«R1ÖÐµÄÄÚÈ
                       ÝÓÒÒÆ2Î»
  270 00000FB0 EA4F 6110       lsr              r1,r0,#24   ;//¸Ä¹ý£¬¼Ó2ÐÐ
  271 00000FB4 F81B 1001       ldrb             r1,[cpu_zpage,r1]
  272 00000FB8         
  273 00000FB8 EA4C 2C01       orr              addy,addy,r1,lsl#8
  549 00000FBC                 opSTORE          m6502_a
  494 00000FBC EA4F 6015       mov              r0,m6502_a,lsr#24
  495 00000FC0                 writemem
  165 00000FC0                 [                _type = _ABS
  166 00000FC0                 writememabs



ARM Macro Assembler    Page 71 


  139 00000FC0 F40C 4160       and              r1,addy,#0xe000
  140 00000FC4 F50A 6284       adr              r2,writemem_tbl
  141 00000FC8 F20F 0E08       adr              lr,%F0
  142 00000FCC         ;// ldr pc,[r2,r1,lsr#11] ;//in: addy,r0=val(bits 8-31=?
                       )
  143 00000FCC EA4F 21D1       lsr              r1,r1,#11   ;//¸Ä¹ý£¬¼Ó2ÐÐ >>11
                                                            
  144 00000FD0 F852 F001       ldr              pc,[r2,r1]
  145 00000FD4         
  146 00000FD4         0                                    ;out: r0,r1,r2,addy
                                                            =?
  167 00000FD4                 ]
  168 00000FD4                 [                _type = _ZP
  170                          ]
  171 00000FD4                 [                _type = _ZPI
  173                          ]
  550 00000FD4                 fetch            6
   47 00000FD4 F5B8 68C0       subs             cycles,cycles,#6*256 ;//CYCLE=2
                                                            56 ;// 3*256 ÕýÊý»ò
                                                            0¾ÍÖ´ÐÐÏÂ2ÌõÖ¸Áî  
   48 00000FD8         ;// subs cycles,cycles,#$count  ;//   r8=r8-#$count
   49 00000FD8 BF5C F819 
              0B01             ldrplb           r0,[m6502_pc],#1 ; //´Ó´æ´¢Æ÷ÖÐ
                                                            ¼ÓÔØ×Ö½Úµ½Ò»¸ö¼Ä´æÆ
                                                            ÷ÖÐ  r0=²Ù×÷Âë
   50 00000FDE F85A F020       ldrpl            pc,[m6502_optbl,r0,lsl#2] ;//r1
                                                            0 ********r0=r0x4**
                                                            *ÔËÐÐ´úÂëµÄµØÖ·****
                                                            *******************
                                                            ***************
   51 00000FE2 F8DA F484       ldr              pc,nexttimeout
  551 00000FE6         ;-------------------------------------------------------
                       ---------------------
  552 00000FE6         _84                                  ;   STY $nn
  553 00000FE6         ;-------------------------------------------------------
                       ---------------------
  554 00000FE6                 doZ
  308 00000FE6 00000002 
                       _type   SETA             _ZP
  309 00000FE6 F819 CB01       ldrb             addy,[m6502_pc],#1
  555 00000FEA                 opSTORE          m6502_y
  494 00000FEA EA4F 6017       mov              r0,m6502_y,lsr#24
  495 00000FEE                 writemem
  165 00000FEE                 [                _type = _ABS
  167                          ]
  168 00000FEE                 [                _type = _ZP
  169 00000FEE                 writememzp
  151 00000FEE F80B 000C       strb             r0,[cpu_zpage,addy]
  170 00000FF2                 ]
  171 00000FF2                 [                _type = _ZPI
  173                          ]
  556 00000FF2                 fetch            3
   47 00000FF2 F5B8 7840       subs             cycles,cycles,#3*256 ;//CYCLE=2
                                                            56 ;// 3*256 ÕýÊý»ò
                                                            0¾ÍÖ´ÐÐÏÂ2ÌõÖ¸Áî  
   48 00000FF6         ;// subs cycles,cycles,#$count  ;//   r8=r8-#$count
   49 00000FF6 BF5C F819 
              0B01             ldrplb           r0,[m6502_pc],#1 ; //´Ó´æ´¢Æ÷ÖÐ
                                                            ¼ÓÔØ×Ö½Úµ½Ò»¸ö¼Ä´æÆ



ARM Macro Assembler    Page 72 


                                                            ÷ÖÐ  r0=²Ù×÷Âë
   50 00000FFC F85A F020       ldrpl            pc,[m6502_optbl,r0,lsl#2] ;//r1
                                                            0 ********r0=r0x4**
                                                            *ÔËÐÐ´úÂëµÄµØÖ·****
                                                            *******************
                                                            ***************
   51 00001000 F8DA F484       ldr              pc,nexttimeout
  557 00001004         ;-------------------------------------------------------
                       ---------------------
  558 00001004         _85                                  ;   STA $nn
  559 00001004         ;-------------------------------------------------------
                       ---------------------
  560 00001004                 doZ
  308 00001004 00000002 
                       _type   SETA             _ZP
  309 00001004 F819 CB01       ldrb             addy,[m6502_pc],#1
  561 00001008                 opSTORE          m6502_a
  494 00001008 EA4F 6015       mov              r0,m6502_a,lsr#24
  495 0000100C                 writemem
  165 0000100C                 [                _type = _ABS
  167                          ]
  168 0000100C                 [                _type = _ZP
  169 0000100C                 writememzp
  151 0000100C F80B 000C       strb             r0,[cpu_zpage,addy]
  170 00001010                 ]
  171 00001010                 [                _type = _ZPI
  173                          ]
  562 00001010                 fetch            3
   47 00001010 F5B8 7840       subs             cycles,cycles,#3*256 ;//CYCLE=2
                                                            56 ;// 3*256 ÕýÊý»ò
                                                            0¾ÍÖ´ÐÐÏÂ2ÌõÖ¸Áî  
   48 00001014         ;// subs cycles,cycles,#$count  ;//   r8=r8-#$count
   49 00001014 BF5C F819 
              0B01             ldrplb           r0,[m6502_pc],#1 ; //´Ó´æ´¢Æ÷ÖÐ
                                                            ¼ÓÔØ×Ö½Úµ½Ò»¸ö¼Ä´æÆ
                                                            ÷ÖÐ  r0=²Ù×÷Âë
   50 0000101A F85A F020       ldrpl            pc,[m6502_optbl,r0,lsl#2] ;//r1
                                                            0 ********r0=r0x4**
                                                            *ÔËÐÐ´úÂëµÄµØÖ·****
                                                            *******************
                                                            ***************
   51 0000101E F8DA F484       ldr              pc,nexttimeout
  563 00001022         ;-------------------------------------------------------
                       ---------------------
  564 00001022         _86                                  ;   STX $nn
  565 00001022         ;-------------------------------------------------------
                       ---------------------
  566 00001022                 doZ
  308 00001022 00000002 
                       _type   SETA             _ZP
  309 00001022 F819 CB01       ldrb             addy,[m6502_pc],#1
  567 00001026                 opSTORE          m6502_x
  494 00001026 EA4F 6016       mov              r0,m6502_x,lsr#24
  495 0000102A                 writemem
  165 0000102A                 [                _type = _ABS
  167                          ]
  168 0000102A                 [                _type = _ZP
  169 0000102A                 writememzp
  151 0000102A F80B 000C       strb             r0,[cpu_zpage,addy]



ARM Macro Assembler    Page 73 


  170 0000102E                 ]
  171 0000102E                 [                _type = _ZPI
  173                          ]
  568 0000102E                 fetch            3
   47 0000102E F5B8 7840       subs             cycles,cycles,#3*256 ;//CYCLE=2
                                                            56 ;// 3*256 ÕýÊý»ò
                                                            0¾ÍÖ´ÐÐÏÂ2ÌõÖ¸Áî  
   48 00001032         ;// subs cycles,cycles,#$count  ;//   r8=r8-#$count
   49 00001032 BF5C F819 
              0B01             ldrplb           r0,[m6502_pc],#1 ; //´Ó´æ´¢Æ÷ÖÐ
                                                            ¼ÓÔØ×Ö½Úµ½Ò»¸ö¼Ä´æÆ
                                                            ÷ÖÐ  r0=²Ù×÷Âë
   50 00001038 F85A F020       ldrpl            pc,[m6502_optbl,r0,lsl#2] ;//r1
                                                            0 ********r0=r0x4**
                                                            *ÔËÐÐ´úÂëµÄµØÖ·****
                                                            *******************
                                                            ***************
   51 0000103C F8DA F484       ldr              pc,nexttimeout
  569 00001040         ;-------------------------------------------------------
                       ---------------------
  570 00001040         _88                                  ;   DEY
  571 00001040         ;-------------------------------------------------------
                       ---------------------
  572 00001040 F1A7 7780       sub              m6502_y,m6502_y,#0x01000000
  573 00001044 EA4F 6327       mov              m6502_nz,m6502_y,asr#24
  574 00001048                 fetch            2
   47 00001048 F5B8 7800       subs             cycles,cycles,#2*256 ;//CYCLE=2
                                                            56 ;// 3*256 ÕýÊý»ò
                                                            0¾ÍÖ´ÐÐÏÂ2ÌõÖ¸Áî  
   48 0000104C         ;// subs cycles,cycles,#$count  ;//   r8=r8-#$count
   49 0000104C BF5C F819 
              0B01             ldrplb           r0,[m6502_pc],#1 ; //´Ó´æ´¢Æ÷ÖÐ
                                                            ¼ÓÔØ×Ö½Úµ½Ò»¸ö¼Ä´æÆ
                                                            ÷ÖÐ  r0=²Ù×÷Âë
   50 00001052 F85A F020       ldrpl            pc,[m6502_optbl,r0,lsl#2] ;//r1
                                                            0 ********r0=r0x4**
                                                            *ÔËÐÐ´úÂëµÄµØÖ·****
                                                            *******************
                                                            ***************
   51 00001056 F8DA F484       ldr              pc,nexttimeout
  575 0000105A         ;-------------------------------------------------------
                       ---------------------
  576 0000105A         _8A                                  ;   TXA
  577 0000105A         ;-------------------------------------------------------
                       ---------------------
  578 0000105A 4635            mov              m6502_a,m6502_x
  579 0000105C EA4F 6326       mov              m6502_nz,m6502_x,asr#24
  580 00001060                 fetch            2
   47 00001060 F5B8 7800       subs             cycles,cycles,#2*256 ;//CYCLE=2
                                                            56 ;// 3*256 ÕýÊý»ò
                                                            0¾ÍÖ´ÐÐÏÂ2ÌõÖ¸Áî  
   48 00001064         ;// subs cycles,cycles,#$count  ;//   r8=r8-#$count
   49 00001064 BF5C F819 
              0B01             ldrplb           r0,[m6502_pc],#1 ; //´Ó´æ´¢Æ÷ÖÐ
                                                            ¼ÓÔØ×Ö½Úµ½Ò»¸ö¼Ä´æÆ
                                                            ÷ÖÐ  r0=²Ù×÷Âë
   50 0000106A F85A F020       ldrpl            pc,[m6502_optbl,r0,lsl#2] ;//r1
                                                            0 ********r0=r0x4**
                                                            *ÔËÐÐ´úÂëµÄµØÖ·****



ARM Macro Assembler    Page 74 


                                                            *******************
                                                            ***************
   51 0000106E F8DA F484       ldr              pc,nexttimeout
  581 00001072         ;-------------------------------------------------------
                       ---------------------
  582 00001072         _8C                                  ;   STY $nnnn
  583 00001072         ;-------------------------------------------------------
                       ---------------------
  584 00001072                 doABS
  228 00001072 00000004 
                       _type   SETA             _ABS
  229 00001072 F819 CB01       ldrb             addy,[m6502_pc],#1
  230 00001076 F819 0B01       ldrb             r0,[m6502_pc],#1
  231 0000107A EA4C 2C00       orr              addy,addy,r0,lsl#8
  585 0000107E                 opSTORE          m6502_y
  494 0000107E EA4F 6017       mov              r0,m6502_y,lsr#24
  495 00001082                 writemem
  165 00001082                 [                _type = _ABS
  166 00001082                 writememabs
  139 00001082 F40C 4160       and              r1,addy,#0xe000
  140 00001086 F50A 6284       adr              r2,writemem_tbl
  141 0000108A F20F 0E0A       adr              lr,%F0
  142 0000108E         ;// ldr pc,[r2,r1,lsr#11] ;//in: addy,r0=val(bits 8-31=?
                       )
  143 0000108E EA4F 21D1       lsr              r1,r1,#11   ;//¸Ä¹ý£¬¼Ó2ÐÐ >>11
                                                            
  144 00001092 F852 F001       ldr              pc,[r2,r1]
  145 00001096         
  146 00001096         0                                    ;out: r0,r1,r2,addy
                                                            =?
  167 00001096                 ]
  168 00001096                 [                _type = _ZP
  170                          ]
  171 00001096                 [                _type = _ZPI
  173                          ]
  586 00001096                 fetch            4
   47 00001096 F5B8 6880       subs             cycles,cycles,#4*256 ;//CYCLE=2
                                                            56 ;// 3*256 ÕýÊý»ò
                                                            0¾ÍÖ´ÐÐÏÂ2ÌõÖ¸Áî  
   48 0000109A         ;// subs cycles,cycles,#$count  ;//   r8=r8-#$count
   49 0000109A BF5C F819 
              0B01             ldrplb           r0,[m6502_pc],#1 ; //´Ó´æ´¢Æ÷ÖÐ
                                                            ¼ÓÔØ×Ö½Úµ½Ò»¸ö¼Ä´æÆ
                                                            ÷ÖÐ  r0=²Ù×÷Âë
   50 000010A0 F85A F020       ldrpl            pc,[m6502_optbl,r0,lsl#2] ;//r1
                                                            0 ********r0=r0x4**
                                                            *ÔËÐÐ´úÂëµÄµØÖ·****
                                                            *******************
                                                            ***************
   51 000010A4 F8DA F484       ldr              pc,nexttimeout
  587 000010A8         ;-------------------------------------------------------
                       ---------------------
  588 000010A8         _8D                                  ;   STA $nnnn
  589 000010A8         ;-------------------------------------------------------
                       ---------------------
  590 000010A8                 doABS
  228 000010A8 00000004 
                       _type   SETA             _ABS
  229 000010A8 F819 CB01       ldrb             addy,[m6502_pc],#1



ARM Macro Assembler    Page 75 


  230 000010AC F819 0B01       ldrb             r0,[m6502_pc],#1
  231 000010B0 EA4C 2C00       orr              addy,addy,r0,lsl#8
  591 000010B4                 opSTORE          m6502_a     ;******************
                                                            *******************
                                                            *******************
                                                            ******
  494 000010B4 EA4F 6015       mov              r0,m6502_a,lsr#24
  495 000010B8                 writemem
  165 000010B8                 [                _type = _ABS
  166 000010B8                 writememabs
  139 000010B8 F40C 4160       and              r1,addy,#0xe000
  140 000010BC F50A 6284       adr              r2,writemem_tbl
  141 000010C0 F20F 0E08       adr              lr,%F0
  142 000010C4         ;// ldr pc,[r2,r1,lsr#11] ;//in: addy,r0=val(bits 8-31=?
                       )
  143 000010C4 EA4F 21D1       lsr              r1,r1,#11   ;//¸Ä¹ý£¬¼Ó2ÐÐ >>11
                                                            
  144 000010C8 F852 F001       ldr              pc,[r2,r1]
  145 000010CC         
  146 000010CC         0                                    ;out: r0,r1,r2,addy
                                                            =?
  167 000010CC                 ]
  168 000010CC                 [                _type = _ZP
  170                          ]
  171 000010CC                 [                _type = _ZPI
  173                          ]
  592 000010CC                 fetch            4
   47 000010CC F5B8 6880       subs             cycles,cycles,#4*256 ;//CYCLE=2
                                                            56 ;// 3*256 ÕýÊý»ò
                                                            0¾ÍÖ´ÐÐÏÂ2ÌõÖ¸Áî  
   48 000010D0         ;// subs cycles,cycles,#$count  ;//   r8=r8-#$count
   49 000010D0 BF5C F819 
              0B01             ldrplb           r0,[m6502_pc],#1 ; //´Ó´æ´¢Æ÷ÖÐ
                                                            ¼ÓÔØ×Ö½Úµ½Ò»¸ö¼Ä´æÆ
                                                            ÷ÖÐ  r0=²Ù×÷Âë
   50 000010D6 F85A F020       ldrpl            pc,[m6502_optbl,r0,lsl#2] ;//r1
                                                            0 ********r0=r0x4**
                                                            *ÔËÐÐ´úÂëµÄµØÖ·****
                                                            *******************
                                                            ***************
   51 000010DA F8DA F484       ldr              pc,nexttimeout
  593 000010DE         ;-------------------------------------------------------
                       ---------------------
  594 000010DE         _8E                                  ;   STX $nnnn
  595 000010DE         ;-------------------------------------------------------
                       ---------------------
  596 000010DE                 doABS
  228 000010DE 00000004 
                       _type   SETA             _ABS
  229 000010DE F819 CB01       ldrb             addy,[m6502_pc],#1
  230 000010E2 F819 0B01       ldrb             r0,[m6502_pc],#1
  231 000010E6 EA4C 2C00       orr              addy,addy,r0,lsl#8
  597 000010EA                 opSTORE          m6502_x
  494 000010EA EA4F 6016       mov              r0,m6502_x,lsr#24
  495 000010EE                 writemem
  165 000010EE                 [                _type = _ABS
  166 000010EE                 writememabs
  139 000010EE F40C 4160       and              r1,addy,#0xe000
  140 000010F2 F50A 6284       adr              r2,writemem_tbl



ARM Macro Assembler    Page 76 


  141 000010F6 F20F 0E0A       adr              lr,%F0
  142 000010FA         ;// ldr pc,[r2,r1,lsr#11] ;//in: addy,r0=val(bits 8-31=?
                       )
  143 000010FA EA4F 21D1       lsr              r1,r1,#11   ;//¸Ä¹ý£¬¼Ó2ÐÐ >>11
                                                            
  144 000010FE F852 F001       ldr              pc,[r2,r1]
  145 00001102         
  146 00001102         0                                    ;out: r0,r1,r2,addy
                                                            =?
  167 00001102                 ]
  168 00001102                 [                _type = _ZP
  170                          ]
  171 00001102                 [                _type = _ZPI
  173                          ]
  598 00001102                 fetch            4
   47 00001102 F5B8 6880       subs             cycles,cycles,#4*256 ;//CYCLE=2
                                                            56 ;// 3*256 ÕýÊý»ò
                                                            0¾ÍÖ´ÐÐÏÂ2ÌõÖ¸Áî  
   48 00001106         ;// subs cycles,cycles,#$count  ;//   r8=r8-#$count
   49 00001106 BF5C F819 
              0B01             ldrplb           r0,[m6502_pc],#1 ; //´Ó´æ´¢Æ÷ÖÐ
                                                            ¼ÓÔØ×Ö½Úµ½Ò»¸ö¼Ä´æÆ
                                                            ÷ÖÐ  r0=²Ù×÷Âë
   50 0000110C F85A F020       ldrpl            pc,[m6502_optbl,r0,lsl#2] ;//r1
                                                            0 ********r0=r0x4**
                                                            *ÔËÐÐ´úÂëµÄµØÖ·****
                                                            *******************
                                                            ***************
   51 00001110 F8DA F484       ldr              pc,nexttimeout
  599 00001114         ;-------------------------------------------------------
                       ---------------------
  600 00001114         _90                                  ;   BCC *
  601 00001114         ;-------------------------------------------------------
                       ---------------------
  602 00001114 F018 0F01       tst              cycles,#CYC_C ;Test Carry
  603 00001118 F919 0B01       ldrsb            r0,[m6502_pc],#1
  604 0000111C BF04 4481       addeq            m6502_pc,m6502_pc,r0
  605 00001120         ; subeq cycles,cycles,#3*CYCLE
  606 00001120 F5A8 7880       subeq            cycles,cycles,#256
  607 00001124                 fetch            2
   47 00001124 F5B8 7800       subs             cycles,cycles,#2*256 ;//CYCLE=2
                                                            56 ;// 3*256 ÕýÊý»ò
                                                            0¾ÍÖ´ÐÐÏÂ2ÌõÖ¸Áî  
   48 00001128         ;// subs cycles,cycles,#$count  ;//   r8=r8-#$count
   49 00001128 BF5C F819 
              0B01             ldrplb           r0,[m6502_pc],#1 ; //´Ó´æ´¢Æ÷ÖÐ
                                                            ¼ÓÔØ×Ö½Úµ½Ò»¸ö¼Ä´æÆ
                                                            ÷ÖÐ  r0=²Ù×÷Âë
   50 0000112E F85A F020       ldrpl            pc,[m6502_optbl,r0,lsl#2] ;//r1
                                                            0 ********r0=r0x4**
                                                            *ÔËÐÐ´úÂëµÄµØÖ·****
                                                            *******************
                                                            ***************
   51 00001132 F8DA F484       ldr              pc,nexttimeout
  608 00001136         ;-------------------------------------------------------
                       ---------------------
  609 00001136         _91                                  ;   STA ($nn),Y
  610 00001136         ;-------------------------------------------------------
                       ---------------------



ARM Macro Assembler    Page 77 


  611 00001136                 doIIY
  278 00001136 00000004 
                       _type   SETA             _ABS
  279 00001136 F819 0B01       ldrb             r0,[m6502_pc],#1
  280 0000113A         ;// ldrb addy,[r0,cpu_zpage]! ;;ÔÚÊý¾Ý´«ËÍÖ®Ç°,½«Æ«ÒÆÁ¿¼
                       Óµ½Rn ÖÐ,Æä½á¹û×÷Îª´«ËÍÊý¾ÝµÄ´æ´¢µØÖ·
  281 0000113A         ;//ÈôÊ¹ÓÃºó×º"!",Ôò½á¹ûÐ´»Øµ½RnÖÐ
  282 0000113A F810 C00B       ldrb             addy,[r0,cpu_zpage]
  283 0000113E 4458            add              r0,r0,cpu_zpage ;//////////////
                                                            ///////////////////
                                                            /////
  284 00001140         
  285 00001140         
  286 00001140 7841            ldrb             r1,[r0,#1]
  287 00001142 EA4C 2C01       orr              addy,addy,r1,lsl#8
  288 00001146 EB0C 6C17       add              addy,addy,m6502_y,lsr#24
  289 0000114A         ; bic addy,addy,#0xff0000 ;Zelda2 needs this
  612 0000114A                 opSTORE          m6502_a
  494 0000114A EA4F 6015       mov              r0,m6502_a,lsr#24
  495 0000114E                 writemem
  165 0000114E                 [                _type = _ABS
  166 0000114E                 writememabs
  139 0000114E F40C 4160       and              r1,addy,#0xe000
  140 00001152 F50A 6284       adr              r2,writemem_tbl
  141 00001156 F20F 0E0A       adr              lr,%F0
  142 0000115A         ;// ldr pc,[r2,r1,lsr#11] ;//in: addy,r0=val(bits 8-31=?
                       )
  143 0000115A EA4F 21D1       lsr              r1,r1,#11   ;//¸Ä¹ý£¬¼Ó2ÐÐ >>11
                                                            
  144 0000115E F852 F001       ldr              pc,[r2,r1]
  145 00001162         
  146 00001162         0                                    ;out: r0,r1,r2,addy
                                                            =?
  167 00001162                 ]
  168 00001162                 [                _type = _ZP
  170                          ]
  171 00001162                 [                _type = _ZPI
  173                          ]
  613 00001162                 fetch            6
   47 00001162 F5B8 68C0       subs             cycles,cycles,#6*256 ;//CYCLE=2
                                                            56 ;// 3*256 ÕýÊý»ò
                                                            0¾ÍÖ´ÐÐÏÂ2ÌõÖ¸Áî  
   48 00001166         ;// subs cycles,cycles,#$count  ;//   r8=r8-#$count
   49 00001166 BF5C F819 
              0B01             ldrplb           r0,[m6502_pc],#1 ; //´Ó´æ´¢Æ÷ÖÐ
                                                            ¼ÓÔØ×Ö½Úµ½Ò»¸ö¼Ä´æÆ
                                                            ÷ÖÐ  r0=²Ù×÷Âë
   50 0000116C F85A F020       ldrpl            pc,[m6502_optbl,r0,lsl#2] ;//r1
                                                            0 ********r0=r0x4**
                                                            *ÔËÐÐ´úÂëµÄµØÖ·****
                                                            *******************
                                                            ***************
   51 00001170 F8DA F484       ldr              pc,nexttimeout
  614 00001174         ;-------------------------------------------------------
                       ---------------------
  615 00001174         _94                                  ;   STY $nn,X
  616 00001174         ;-------------------------------------------------------
                       ---------------------
  617 00001174                 doZIXf



ARM Macro Assembler    Page 78 


  328 00001174 00000003 
                       _type   SETA             _ZPI
  329 00001174 F819 CB01       ldrb             addy,[m6502_pc],#1
  330 00001178 EB06 6C0C       add              addy,m6502_x,addy,lsl#24
  618 0000117C                 opSTORE          m6502_y
  494 0000117C EA4F 6017       mov              r0,m6502_y,lsr#24
  495 00001180                 writemem
  165 00001180                 [                _type = _ABS
  167                          ]
  168 00001180                 [                _type = _ZP
  170                          ]
  171 00001180                 [                _type = _ZPI
  172 00001180                 writememzpi
  156 00001180         ;// strb r0,[cpu_zpage,addy,lsr#24]
  157 00001180 EA4F 611C       lsr              r1,addy,#24 ;//¸Ä¹ý£¬¼Ó2ÐÐ  >>2
                                                            4
  158 00001184 F80B 0001       strb             r0,[cpu_zpage,r1]
  159 00001188         
  160 00001188         
  173 00001188                 ]
  619 00001188                 fetch            4
   47 00001188 F5B8 6880       subs             cycles,cycles,#4*256 ;//CYCLE=2
                                                            56 ;// 3*256 ÕýÊý»ò
                                                            0¾ÍÖ´ÐÐÏÂ2ÌõÖ¸Áî  
   48 0000118C         ;// subs cycles,cycles,#$count  ;//   r8=r8-#$count
   49 0000118C BF5C F819 
              0B01             ldrplb           r0,[m6502_pc],#1 ; //´Ó´æ´¢Æ÷ÖÐ
                                                            ¼ÓÔØ×Ö½Úµ½Ò»¸ö¼Ä´æÆ
                                                            ÷ÖÐ  r0=²Ù×÷Âë
   50 00001192 F85A F020       ldrpl            pc,[m6502_optbl,r0,lsl#2] ;//r1
                                                            0 ********r0=r0x4**
                                                            *ÔËÐÐ´úÂëµÄµØÖ·****
                                                            *******************
                                                            ***************
   51 00001196 F8DA F484       ldr              pc,nexttimeout
  620 0000119A         ;-------------------------------------------------------
                       ---------------------
  621 0000119A         _95                                  ;   STA $nn,X
  622 0000119A         ;-------------------------------------------------------
                       ---------------------
  623 0000119A                 doZIXf
  328 0000119A 00000003 
                       _type   SETA             _ZPI
  329 0000119A F819 CB01       ldrb             addy,[m6502_pc],#1
  330 0000119E EB06 6C0C       add              addy,m6502_x,addy,lsl#24
  624 000011A2                 opSTORE          m6502_a
  494 000011A2 EA4F 6015       mov              r0,m6502_a,lsr#24
  495 000011A6                 writemem
  165 000011A6                 [                _type = _ABS
  167                          ]
  168 000011A6                 [                _type = _ZP
  170                          ]
  171 000011A6                 [                _type = _ZPI
  172 000011A6                 writememzpi
  156 000011A6         ;// strb r0,[cpu_zpage,addy,lsr#24]
  157 000011A6 EA4F 611C       lsr              r1,addy,#24 ;//¸Ä¹ý£¬¼Ó2ÐÐ  >>2
                                                            4
  158 000011AA F80B 0001       strb             r0,[cpu_zpage,r1]
  159 000011AE         



ARM Macro Assembler    Page 79 


  160 000011AE         
  173 000011AE                 ]
  625 000011AE                 fetch            4
   47 000011AE F5B8 6880       subs             cycles,cycles,#4*256 ;//CYCLE=2
                                                            56 ;// 3*256 ÕýÊý»ò
                                                            0¾ÍÖ´ÐÐÏÂ2ÌõÖ¸Áî  
   48 000011B2         ;// subs cycles,cycles,#$count  ;//   r8=r8-#$count
   49 000011B2 BF5C F819 
              0B01             ldrplb           r0,[m6502_pc],#1 ; //´Ó´æ´¢Æ÷ÖÐ
                                                            ¼ÓÔØ×Ö½Úµ½Ò»¸ö¼Ä´æÆ
                                                            ÷ÖÐ  r0=²Ù×÷Âë
   50 000011B8 F85A F020       ldrpl            pc,[m6502_optbl,r0,lsl#2] ;//r1
                                                            0 ********r0=r0x4**
                                                            *ÔËÐÐ´úÂëµÄµØÖ·****
                                                            *******************
                                                            ***************
   51 000011BC F8DA F484       ldr              pc,nexttimeout
  626 000011C0         ;-------------------------------------------------------
                       ---------------------
  627 000011C0         _96                                  ;   STX $nn,Y
  628 000011C0         ;-------------------------------------------------------
                       ---------------------
  629 000011C0                 doZIYf
  343 000011C0 00000003 
                       _type   SETA             _ZPI
  344 000011C0 F819 CB01       ldrb             addy,[m6502_pc],#1
  345 000011C4 EB07 6C0C       add              addy,m6502_y,addy,lsl#24
  630 000011C8                 opSTORE          m6502_x
  494 000011C8 EA4F 6016       mov              r0,m6502_x,lsr#24
  495 000011CC                 writemem
  165 000011CC                 [                _type = _ABS
  167                          ]
  168 000011CC                 [                _type = _ZP
  170                          ]
  171 000011CC                 [                _type = _ZPI
  172 000011CC                 writememzpi
  156 000011CC         ;// strb r0,[cpu_zpage,addy,lsr#24]
  157 000011CC EA4F 611C       lsr              r1,addy,#24 ;//¸Ä¹ý£¬¼Ó2ÐÐ  >>2
                                                            4
  158 000011D0 F80B 0001       strb             r0,[cpu_zpage,r1]
  159 000011D4         
  160 000011D4         
  173 000011D4                 ]
  631 000011D4                 fetch            4
   47 000011D4 F5B8 6880       subs             cycles,cycles,#4*256 ;//CYCLE=2
                                                            56 ;// 3*256 ÕýÊý»ò
                                                            0¾ÍÖ´ÐÐÏÂ2ÌõÖ¸Áî  
   48 000011D8         ;// subs cycles,cycles,#$count  ;//   r8=r8-#$count
   49 000011D8 BF5C F819 
              0B01             ldrplb           r0,[m6502_pc],#1 ; //´Ó´æ´¢Æ÷ÖÐ
                                                            ¼ÓÔØ×Ö½Úµ½Ò»¸ö¼Ä´æÆ
                                                            ÷ÖÐ  r0=²Ù×÷Âë
   50 000011DE F85A F020       ldrpl            pc,[m6502_optbl,r0,lsl#2] ;//r1
                                                            0 ********r0=r0x4**
                                                            *ÔËÐÐ´úÂëµÄµØÖ·****
                                                            *******************
                                                            ***************
   51 000011E2 F8DA F484       ldr              pc,nexttimeout
  632 000011E6         ;-------------------------------------------------------



ARM Macro Assembler    Page 80 


                       ---------------------
  633 000011E6         _98                                  ;   TYA
  634 000011E6         ;-------------------------------------------------------
                       ---------------------
  635 000011E6 463D            mov              m6502_a,m6502_y
  636 000011E8 EA4F 6327       mov              m6502_nz,m6502_y,asr#24
  637 000011EC                 fetch            2
   47 000011EC F5B8 7800       subs             cycles,cycles,#2*256 ;//CYCLE=2
                                                            56 ;// 3*256 ÕýÊý»ò
                                                            0¾ÍÖ´ÐÐÏÂ2ÌõÖ¸Áî  
   48 000011F0         ;// subs cycles,cycles,#$count  ;//   r8=r8-#$count
   49 000011F0 BF5C F819 
              0B01             ldrplb           r0,[m6502_pc],#1 ; //´Ó´æ´¢Æ÷ÖÐ
                                                            ¼ÓÔØ×Ö½Úµ½Ò»¸ö¼Ä´æÆ
                                                            ÷ÖÐ  r0=²Ù×÷Âë
   50 000011F6 F85A F020       ldrpl            pc,[m6502_optbl,r0,lsl#2] ;//r1
                                                            0 ********r0=r0x4**
                                                            *ÔËÐÐ´úÂëµÄµØÖ·****
                                                            *******************
                                                            ***************
   51 000011FA F8DA F484       ldr              pc,nexttimeout
  638 000011FE         ;-------------------------------------------------------
                       ---------------------
  639 000011FE         _99                                  ;   STA $nnnn,Y
  640 000011FE         ;-------------------------------------------------------
                       ---------------------
  641 000011FE                 doAIY
  246 000011FE 00000004 
                       _type   SETA             _ABS
  247 000011FE F819 CB01       ldrb             addy,[m6502_pc],#1
  248 00001202 F819 0B01       ldrb             r0,[m6502_pc],#1
  249 00001206 EA4C 2C00       orr              addy,addy,r0,lsl#8
  250 0000120A EB0C 6C17       add              addy,addy,m6502_y,lsr#24
  251 0000120E         ; bic addy,addy,#0xff0000 ;Tecmo Bowl needs this
  642 0000120E                 opSTORE          m6502_a
  494 0000120E EA4F 6015       mov              r0,m6502_a,lsr#24
  495 00001212                 writemem
  165 00001212                 [                _type = _ABS
  166 00001212                 writememabs
  139 00001212 F40C 4160       and              r1,addy,#0xe000
  140 00001216 F50A 6284       adr              r2,writemem_tbl
  141 0000121A F20F 0E0A       adr              lr,%F0
  142 0000121E         ;// ldr pc,[r2,r1,lsr#11] ;//in: addy,r0=val(bits 8-31=?
                       )
  143 0000121E EA4F 21D1       lsr              r1,r1,#11   ;//¸Ä¹ý£¬¼Ó2ÐÐ >>11
                                                            
  144 00001222 F852 F001       ldr              pc,[r2,r1]
  145 00001226         
  146 00001226         0                                    ;out: r0,r1,r2,addy
                                                            =?
  167 00001226                 ]
  168 00001226                 [                _type = _ZP
  170                          ]
  171 00001226                 [                _type = _ZPI
  173                          ]
  643 00001226                 fetch            5
   47 00001226 F5B8 68A0       subs             cycles,cycles,#5*256 ;//CYCLE=2
                                                            56 ;// 3*256 ÕýÊý»ò
                                                            0¾ÍÖ´ÐÐÏÂ2ÌõÖ¸Áî  



ARM Macro Assembler    Page 81 


   48 0000122A         ;// subs cycles,cycles,#$count  ;//   r8=r8-#$count
   49 0000122A BF5C F819 
              0B01             ldrplb           r0,[m6502_pc],#1 ; //´Ó´æ´¢Æ÷ÖÐ
                                                            ¼ÓÔØ×Ö½Úµ½Ò»¸ö¼Ä´æÆ
                                                            ÷ÖÐ  r0=²Ù×÷Âë
   50 00001230 F85A F020       ldrpl            pc,[m6502_optbl,r0,lsl#2] ;//r1
                                                            0 ********r0=r0x4**
                                                            *ÔËÐÐ´úÂëµÄµØÖ·****
                                                            *******************
                                                            ***************
   51 00001234 F8DA F484       ldr              pc,nexttimeout
  644 00001238         ;-------------------------------------------------------
                       ---------------------
  645 00001238         _9A                                  ;   TXS
  646 00001238         ;-------------------------------------------------------
                       ---------------------
  647 00001238 EA4F 6016       mov              r0,m6502_x,lsr#24
  648 0000123C F88A 047C       strb             r0,m6502_s
  649 00001240                 fetch            2
   47 00001240 F5B8 7800       subs             cycles,cycles,#2*256 ;//CYCLE=2
                                                            56 ;// 3*256 ÕýÊý»ò
                                                            0¾ÍÖ´ÐÐÏÂ2ÌõÖ¸Áî  
   48 00001244         ;// subs cycles,cycles,#$count  ;//   r8=r8-#$count
   49 00001244 BF5C F819 
              0B01             ldrplb           r0,[m6502_pc],#1 ; //´Ó´æ´¢Æ÷ÖÐ
                                                            ¼ÓÔØ×Ö½Úµ½Ò»¸ö¼Ä´æÆ
                                                            ÷ÖÐ  r0=²Ù×÷Âë
   50 0000124A F85A F020       ldrpl            pc,[m6502_optbl,r0,lsl#2] ;//r1
                                                            0 ********r0=r0x4**
                                                            *ÔËÐÐ´úÂëµÄµØÖ·****
                                                            *******************
                                                            ***************
   51 0000124E F8DA F484       ldr              pc,nexttimeout
  650 00001252         ;-------------------------------------------------------
                       ---------------------
  651 00001252         _9D                                  ;   STA $nnnn,X
  652 00001252         ;-------------------------------------------------------
                       ---------------------
  653 00001252                 doAIX
  236 00001252 00000004 
                       _type   SETA             _ABS
  237 00001252 F819 CB01       ldrb             addy,[m6502_pc],#1
  238 00001256 F819 0B01       ldrb             r0,[m6502_pc],#1
  239 0000125A EA4C 2C00       orr              addy,addy,r0,lsl#8
  240 0000125E EB0C 6C16       add              addy,addy,m6502_x,lsr#24
  241 00001262         ; bic addy,addy,#0xff0000 ;Base Wars needs this
  654 00001262                 opSTORE          m6502_a
  494 00001262 EA4F 6015       mov              r0,m6502_a,lsr#24
  495 00001266                 writemem
  165 00001266                 [                _type = _ABS
  166 00001266                 writememabs
  139 00001266 F40C 4160       and              r1,addy,#0xe000
  140 0000126A F50A 6284       adr              r2,writemem_tbl
  141 0000126E F20F 0E0A       adr              lr,%F0
  142 00001272         ;// ldr pc,[r2,r1,lsr#11] ;//in: addy,r0=val(bits 8-31=?
                       )
  143 00001272 EA4F 21D1       lsr              r1,r1,#11   ;//¸Ä¹ý£¬¼Ó2ÐÐ >>11
                                                            
  144 00001276 F852 F001       ldr              pc,[r2,r1]



ARM Macro Assembler    Page 82 


  145 0000127A         
  146 0000127A         0                                    ;out: r0,r1,r2,addy
                                                            =?
  167 0000127A                 ]
  168 0000127A                 [                _type = _ZP
  170                          ]
  171 0000127A                 [                _type = _ZPI
  173                          ]
  655 0000127A                 fetch            5
   47 0000127A F5B8 68A0       subs             cycles,cycles,#5*256 ;//CYCLE=2
                                                            56 ;// 3*256 ÕýÊý»ò
                                                            0¾ÍÖ´ÐÐÏÂ2ÌõÖ¸Áî  
   48 0000127E         ;// subs cycles,cycles,#$count  ;//   r8=r8-#$count
   49 0000127E BF5C F819 
              0B01             ldrplb           r0,[m6502_pc],#1 ; //´Ó´æ´¢Æ÷ÖÐ
                                                            ¼ÓÔØ×Ö½Úµ½Ò»¸ö¼Ä´æÆ
                                                            ÷ÖÐ  r0=²Ù×÷Âë
   50 00001284 F85A F020       ldrpl            pc,[m6502_optbl,r0,lsl#2] ;//r1
                                                            0 ********r0=r0x4**
                                                            *ÔËÐÐ´úÂëµÄµØÖ·****
                                                            *******************
                                                            ***************
   51 00001288 F8DA F484       ldr              pc,nexttimeout
  656 0000128C         ;-------------------------------------------------------
                       ---------------------
  657 0000128C         _A0                                  ;   LDY #$nn
  658 0000128C         ;-------------------------------------------------------
                       ---------------------
  659 0000128C                 doIMM
  256 0000128C 00000001 
                       _type   SETA             _IMM
  660 0000128C                 opLOAD           m6502_y
  420 0000128C                 readmems
  124 0000128C                 [                _type = _ABS
  127                          ]
  128 0000128C                 [                _type = _ZP
  130                          ]
  131 0000128C                 [                _type = _IMM
  132 0000128C                 readmemimms
  103 0000128C F919 3B01       ldrsb            m6502_nz,[m6502_pc],#1
  133 00001290                 ]
  421 00001290 EA4F 6703       mov              m6502_y,m6502_nz,lsl#24
  661 00001294                 fetch            2
   47 00001294 F5B8 7800       subs             cycles,cycles,#2*256 ;//CYCLE=2
                                                            56 ;// 3*256 ÕýÊý»ò
                                                            0¾ÍÖ´ÐÐÏÂ2ÌõÖ¸Áî  
   48 00001298         ;// subs cycles,cycles,#$count  ;//   r8=r8-#$count
   49 00001298 BF5C F819 
              0B01             ldrplb           r0,[m6502_pc],#1 ; //´Ó´æ´¢Æ÷ÖÐ
                                                            ¼ÓÔØ×Ö½Úµ½Ò»¸ö¼Ä´æÆ
                                                            ÷ÖÐ  r0=²Ù×÷Âë
   50 0000129E F85A F020       ldrpl            pc,[m6502_optbl,r0,lsl#2] ;//r1
                                                            0 ********r0=r0x4**
                                                            *ÔËÐÐ´úÂëµÄµØÖ·****
                                                            *******************
                                                            ***************
   51 000012A2 F8DA F484       ldr              pc,nexttimeout
  662 000012A6         ;-------------------------------------------------------
                       ---------------------



ARM Macro Assembler    Page 83 


  663 000012A6         _A1                                  ;   LDA ($nn,X)
  664 000012A6         ;-------------------------------------------------------
                       ---------------------
  665 000012A6                 doIIX
  261 000012A6 00000004 
                       _type   SETA             _ABS
  262 000012A6 F819 0B01       ldrb             r0,[m6502_pc],#1
  263 000012AA EB06 6000       add              r0,m6502_x,r0,lsl#24
  264 000012AE         ;//ldrb addy,[cpu_zpage,r0,lsr#24] ;//´íÎó:Ö¸¶¨µÄ×ª±ä²»Ô
                       ÊÐí
  265 000012AE EA4F 6C10       lsr              addy,r0,#24 ;//¸Ä¹ý£¬¼Ó2ÐÐ >>24
                                                            
  266 000012B2 F81B C00C       ldrb             addy,[cpu_zpage,addy]
  267 000012B6         
  268 000012B6 F100 7080       add              r0,r0,#0x01000000
  269 000012BA         ;//ldrb r1,[cpu_zpage,r0,lsr#24] ;//R1,LSR#2;½«R1ÖÐµÄÄÚÈ
                       ÝÓÒÒÆ2Î»
  270 000012BA EA4F 6110       lsr              r1,r0,#24   ;//¸Ä¹ý£¬¼Ó2ÐÐ
  271 000012BE F81B 1001       ldrb             r1,[cpu_zpage,r1]
  272 000012C2         
  273 000012C2 EA4C 2C01       orr              addy,addy,r1,lsl#8
  666 000012C6                 opLOAD           m6502_a
  420 000012C6                 readmems
  124 000012C6                 [                _type = _ABS
  125 000012C6                 readmemabs
   69 000012C6 F40C 4160       and              r1,addy,#0xE000
   70 000012CA F20F 0E0A       adr              lr,%F0
   71 000012CE         ;// ldr pc,[m6502_rmem,r1,lsr#11] ;//in: addy,r1=addy&0x
                       E000 (for rom_R)
   72 000012CE EA4F 21D1       lsr              r1,r1,#11   ;//¸Ä¹ý£¬¼Ó2ÐÐ  >>1
                                                            1
   73 000012D2 F854 F001       ldr              pc,[m6502_rmem,r1]
   74 000012D6         
   75 000012D6         0                                    ;//out: r0=val (bit
                                                            s 8-31=0 (LSR,ROR,I
                                                            NC,DEC,ASL)), addy 
                                                            preserved for RMW i
                                                            nstructions
  126 000012D6 EA40 6300       orr              m6502_nz,r0,r0,lsl#24
  127 000012DA                 ]
  128 000012DA                 [                _type = _ZP
  130                          ]
  131 000012DA                 [                _type = _IMM
  133                          ]
  421 000012DA EA4F 6503       mov              m6502_a,m6502_nz,lsl#24
  667 000012DE                 fetch            6
   47 000012DE F5B8 68C0       subs             cycles,cycles,#6*256 ;//CYCLE=2
                                                            56 ;// 3*256 ÕýÊý»ò
                                                            0¾ÍÖ´ÐÐÏÂ2ÌõÖ¸Áî  
   48 000012E2         ;// subs cycles,cycles,#$count  ;//   r8=r8-#$count
   49 000012E2 BF5C F819 
              0B01             ldrplb           r0,[m6502_pc],#1 ; //´Ó´æ´¢Æ÷ÖÐ
                                                            ¼ÓÔØ×Ö½Úµ½Ò»¸ö¼Ä´æÆ
                                                            ÷ÖÐ  r0=²Ù×÷Âë
   50 000012E8 F85A F020       ldrpl            pc,[m6502_optbl,r0,lsl#2] ;//r1
                                                            0 ********r0=r0x4**
                                                            *ÔËÐÐ´úÂëµÄµØÖ·****
                                                            *******************
                                                            ***************



ARM Macro Assembler    Page 84 


   51 000012EC F8DA F484       ldr              pc,nexttimeout
  668 000012F0         ;-------------------------------------------------------
                       ---------------------
  669 000012F0         _A2                                  ;   LDX #$nn
  670 000012F0         ;-------------------------------------------------------
                       ---------------------
  671 000012F0                 doIMM
  256 000012F0 00000001 
                       _type   SETA             _IMM
  672 000012F0                 opLOAD           m6502_x
  420 000012F0                 readmems
  124 000012F0                 [                _type = _ABS
  127                          ]
  128 000012F0                 [                _type = _ZP
  130                          ]
  131 000012F0                 [                _type = _IMM
  132 000012F0                 readmemimms
  103 000012F0 F919 3B01       ldrsb            m6502_nz,[m6502_pc],#1
  133 000012F4                 ]
  421 000012F4 EA4F 6603       mov              m6502_x,m6502_nz,lsl#24
  673 000012F8                 fetch            2
   47 000012F8 F5B8 7800       subs             cycles,cycles,#2*256 ;//CYCLE=2
                                                            56 ;// 3*256 ÕýÊý»ò
                                                            0¾ÍÖ´ÐÐÏÂ2ÌõÖ¸Áî  
   48 000012FC         ;// subs cycles,cycles,#$count  ;//   r8=r8-#$count
   49 000012FC BF5C F819 
              0B01             ldrplb           r0,[m6502_pc],#1 ; //´Ó´æ´¢Æ÷ÖÐ
                                                            ¼ÓÔØ×Ö½Úµ½Ò»¸ö¼Ä´æÆ
                                                            ÷ÖÐ  r0=²Ù×÷Âë
   50 00001302 F85A F020       ldrpl            pc,[m6502_optbl,r0,lsl#2] ;//r1
                                                            0 ********r0=r0x4**
                                                            *ÔËÐÐ´úÂëµÄµØÖ·****
                                                            *******************
                                                            ***************
   51 00001306 F8DA F484       ldr              pc,nexttimeout
  674 0000130A         ;-------------------------------------------------------
                       ---------------------
  675 0000130A         _A4                                  ;   LDY $nn
  676 0000130A         ;-------------------------------------------------------
                       ---------------------
  677 0000130A                 doZ
  308 0000130A 00000002 
                       _type   SETA             _ZP
  309 0000130A F819 CB01       ldrb             addy,[m6502_pc],#1
  678 0000130E                 opLOAD           m6502_y
  420 0000130E                 readmems
  124 0000130E                 [                _type = _ABS
  127                          ]
  128 0000130E                 [                _type = _ZP
  129 0000130E                 readmemzps
   93 0000130E F91B 300C       ldrsb            m6502_nz,[cpu_zpage,addy]
  130 00001312                 ]
  131 00001312                 [                _type = _IMM
  133                          ]
  421 00001312 EA4F 6703       mov              m6502_y,m6502_nz,lsl#24
  679 00001316                 fetch            3
   47 00001316 F5B8 7840       subs             cycles,cycles,#3*256 ;//CYCLE=2
                                                            56 ;// 3*256 ÕýÊý»ò
                                                            0¾ÍÖ´ÐÐÏÂ2ÌõÖ¸Áî  



ARM Macro Assembler    Page 85 


   48 0000131A         ;// subs cycles,cycles,#$count  ;//   r8=r8-#$count
   49 0000131A BF5C F819 
              0B01             ldrplb           r0,[m6502_pc],#1 ; //´Ó´æ´¢Æ÷ÖÐ
                                                            ¼ÓÔØ×Ö½Úµ½Ò»¸ö¼Ä´æÆ
                                                            ÷ÖÐ  r0=²Ù×÷Âë
   50 00001320 F85A F020       ldrpl            pc,[m6502_optbl,r0,lsl#2] ;//r1
                                                            0 ********r0=r0x4**
                                                            *ÔËÐÐ´úÂëµÄµØÖ·****
                                                            *******************
                                                            ***************
   51 00001324 F8DA F484       ldr              pc,nexttimeout
  680 00001328         ;-------------------------------------------------------
                       ---------------------
  681 00001328         _A5                                  ;   LDA $nn
  682 00001328         ;-------------------------------------------------------
                       ---------------------
  683 00001328                 doZ
  308 00001328 00000002 
                       _type   SETA             _ZP
  309 00001328 F819 CB01       ldrb             addy,[m6502_pc],#1
  684 0000132C                 opLOAD           m6502_a
  420 0000132C                 readmems
  124 0000132C                 [                _type = _ABS
  127                          ]
  128 0000132C                 [                _type = _ZP
  129 0000132C                 readmemzps
   93 0000132C F91B 300C       ldrsb            m6502_nz,[cpu_zpage,addy]
  130 00001330                 ]
  131 00001330                 [                _type = _IMM
  133                          ]
  421 00001330 EA4F 6503       mov              m6502_a,m6502_nz,lsl#24
  685 00001334                 fetch            3
   47 00001334 F5B8 7840       subs             cycles,cycles,#3*256 ;//CYCLE=2
                                                            56 ;// 3*256 ÕýÊý»ò
                                                            0¾ÍÖ´ÐÐÏÂ2ÌõÖ¸Áî  
   48 00001338         ;// subs cycles,cycles,#$count  ;//   r8=r8-#$count
   49 00001338 BF5C F819 
              0B01             ldrplb           r0,[m6502_pc],#1 ; //´Ó´æ´¢Æ÷ÖÐ
                                                            ¼ÓÔØ×Ö½Úµ½Ò»¸ö¼Ä´æÆ
                                                            ÷ÖÐ  r0=²Ù×÷Âë
   50 0000133E F85A F020       ldrpl            pc,[m6502_optbl,r0,lsl#2] ;//r1
                                                            0 ********r0=r0x4**
                                                            *ÔËÐÐ´úÂëµÄµØÖ·****
                                                            *******************
                                                            ***************
   51 00001342 F8DA F484       ldr              pc,nexttimeout
  686 00001346         ;-------------------------------------------------------
                       ---------------------
  687 00001346         _A6                                  ;   LDX $nn
  688 00001346         ;-------------------------------------------------------
                       ---------------------
  689 00001346                 doZ
  308 00001346 00000002 
                       _type   SETA             _ZP
  309 00001346 F819 CB01       ldrb             addy,[m6502_pc],#1
  690 0000134A                 opLOAD           m6502_x
  420 0000134A                 readmems
  124 0000134A                 [                _type = _ABS
  127                          ]



ARM Macro Assembler    Page 86 


  128 0000134A                 [                _type = _ZP
  129 0000134A                 readmemzps
   93 0000134A F91B 300C       ldrsb            m6502_nz,[cpu_zpage,addy]
  130 0000134E                 ]
  131 0000134E                 [                _type = _IMM
  133                          ]
  421 0000134E EA4F 6603       mov              m6502_x,m6502_nz,lsl#24
  691 00001352                 fetch            3
   47 00001352 F5B8 7840       subs             cycles,cycles,#3*256 ;//CYCLE=2
                                                            56 ;// 3*256 ÕýÊý»ò
                                                            0¾ÍÖ´ÐÐÏÂ2ÌõÖ¸Áî  
   48 00001356         ;// subs cycles,cycles,#$count  ;//   r8=r8-#$count
   49 00001356 BF5C F819 
              0B01             ldrplb           r0,[m6502_pc],#1 ; //´Ó´æ´¢Æ÷ÖÐ
                                                            ¼ÓÔØ×Ö½Úµ½Ò»¸ö¼Ä´æÆ
                                                            ÷ÖÐ  r0=²Ù×÷Âë
   50 0000135C F85A F020       ldrpl            pc,[m6502_optbl,r0,lsl#2] ;//r1
                                                            0 ********r0=r0x4**
                                                            *ÔËÐÐ´úÂëµÄµØÖ·****
                                                            *******************
                                                            ***************
   51 00001360 F8DA F484       ldr              pc,nexttimeout
  692 00001364         ;-------------------------------------------------------
                       ---------------------
  693 00001364         _A8                                  ;   TAY
  694 00001364         ;-------------------------------------------------------
                       ---------------------
  695 00001364 462F            mov              m6502_y,m6502_a
  696 00001366 EA4F 6327       mov              m6502_nz,m6502_y,asr#24
  697 0000136A                 fetch            2
   47 0000136A F5B8 7800       subs             cycles,cycles,#2*256 ;//CYCLE=2
                                                            56 ;// 3*256 ÕýÊý»ò
                                                            0¾ÍÖ´ÐÐÏÂ2ÌõÖ¸Áî  
   48 0000136E         ;// subs cycles,cycles,#$count  ;//   r8=r8-#$count
   49 0000136E BF5C F819 
              0B01             ldrplb           r0,[m6502_pc],#1 ; //´Ó´æ´¢Æ÷ÖÐ
                                                            ¼ÓÔØ×Ö½Úµ½Ò»¸ö¼Ä´æÆ
                                                            ÷ÖÐ  r0=²Ù×÷Âë
   50 00001374 F85A F020       ldrpl            pc,[m6502_optbl,r0,lsl#2] ;//r1
                                                            0 ********r0=r0x4**
                                                            *ÔËÐÐ´úÂëµÄµØÖ·****
                                                            *******************
                                                            ***************
   51 00001378 F8DA F484       ldr              pc,nexttimeout
  698 0000137C         ;-------------------------------------------------------
                       ---------------------
  699 0000137C         _A9                                  ;   LDA #$nn
  700 0000137C         ;-------------------------------------------------------
                       ---------------------
  701 0000137C                 doIMM
  256 0000137C 00000001 
                       _type   SETA             _IMM
  702 0000137C                 opLOAD           m6502_a
  420 0000137C                 readmems
  124 0000137C                 [                _type = _ABS
  127                          ]
  128 0000137C                 [                _type = _ZP
  130                          ]
  131 0000137C                 [                _type = _IMM



ARM Macro Assembler    Page 87 


  132 0000137C                 readmemimms
  103 0000137C F919 3B01       ldrsb            m6502_nz,[m6502_pc],#1
  133 00001380                 ]
  421 00001380 EA4F 6503       mov              m6502_a,m6502_nz,lsl#24
  703 00001384                 fetch            2
   47 00001384 F5B8 7800       subs             cycles,cycles,#2*256 ;//CYCLE=2
                                                            56 ;// 3*256 ÕýÊý»ò
                                                            0¾ÍÖ´ÐÐÏÂ2ÌõÖ¸Áî  
   48 00001388         ;// subs cycles,cycles,#$count  ;//   r8=r8-#$count
   49 00001388 BF5C F819 
              0B01             ldrplb           r0,[m6502_pc],#1 ; //´Ó´æ´¢Æ÷ÖÐ
                                                            ¼ÓÔØ×Ö½Úµ½Ò»¸ö¼Ä´æÆ
                                                            ÷ÖÐ  r0=²Ù×÷Âë
   50 0000138E F85A F020       ldrpl            pc,[m6502_optbl,r0,lsl#2] ;//r1
                                                            0 ********r0=r0x4**
                                                            *ÔËÐÐ´úÂëµÄµØÖ·****
                                                            *******************
                                                            ***************
   51 00001392 F8DA F484       ldr              pc,nexttimeout
  704 00001396         ;-------------------------------------------------------
                       ---------------------
  705 00001396         _AA                                  ;   TAX
  706 00001396         ;-------------------------------------------------------
                       ---------------------
  707 00001396 462E            mov              m6502_x,m6502_a
  708 00001398 EA4F 6326       mov              m6502_nz,m6502_x,asr#24
  709 0000139C                 fetch            2
   47 0000139C F5B8 7800       subs             cycles,cycles,#2*256 ;//CYCLE=2
                                                            56 ;// 3*256 ÕýÊý»ò
                                                            0¾ÍÖ´ÐÐÏÂ2ÌõÖ¸Áî  
   48 000013A0         ;// subs cycles,cycles,#$count  ;//   r8=r8-#$count
   49 000013A0 BF5C F819 
              0B01             ldrplb           r0,[m6502_pc],#1 ; //´Ó´æ´¢Æ÷ÖÐ
                                                            ¼ÓÔØ×Ö½Úµ½Ò»¸ö¼Ä´æÆ
                                                            ÷ÖÐ  r0=²Ù×÷Âë
   50 000013A6 F85A F020       ldrpl            pc,[m6502_optbl,r0,lsl#2] ;//r1
                                                            0 ********r0=r0x4**
                                                            *ÔËÐÐ´úÂëµÄµØÖ·****
                                                            *******************
                                                            ***************
   51 000013AA F8DA F484       ldr              pc,nexttimeout
  710 000013AE         ;-------------------------------------------------------
                       ---------------------
  711 000013AE         _AC                                  ;   LDY $nnnn
  712 000013AE         ;-------------------------------------------------------
                       ---------------------
  713 000013AE                 doABS
  228 000013AE 00000004 
                       _type   SETA             _ABS
  229 000013AE F819 CB01       ldrb             addy,[m6502_pc],#1
  230 000013B2 F819 0B01       ldrb             r0,[m6502_pc],#1
  231 000013B6 EA4C 2C00       orr              addy,addy,r0,lsl#8
  714 000013BA                 opLOAD           m6502_y
  420 000013BA                 readmems
  124 000013BA                 [                _type = _ABS
  125 000013BA                 readmemabs
   69 000013BA F40C 4160       and              r1,addy,#0xE000
   70 000013BE F20F 0E0A       adr              lr,%F0
   71 000013C2         ;// ldr pc,[m6502_rmem,r1,lsr#11] ;//in: addy,r1=addy&0x



ARM Macro Assembler    Page 88 


                       E000 (for rom_R)
   72 000013C2 EA4F 21D1       lsr              r1,r1,#11   ;//¸Ä¹ý£¬¼Ó2ÐÐ  >>1
                                                            1
   73 000013C6 F854 F001       ldr              pc,[m6502_rmem,r1]
   74 000013CA         
   75 000013CA         0                                    ;//out: r0=val (bit
                                                            s 8-31=0 (LSR,ROR,I
                                                            NC,DEC,ASL)), addy 
                                                            preserved for RMW i
                                                            nstructions
  126 000013CA EA40 6300       orr              m6502_nz,r0,r0,lsl#24
  127 000013CE                 ]
  128 000013CE                 [                _type = _ZP
  130                          ]
  131 000013CE                 [                _type = _IMM
  133                          ]
  421 000013CE EA4F 6703       mov              m6502_y,m6502_nz,lsl#24
  715 000013D2                 fetch            4
   47 000013D2 F5B8 6880       subs             cycles,cycles,#4*256 ;//CYCLE=2
                                                            56 ;// 3*256 ÕýÊý»ò
                                                            0¾ÍÖ´ÐÐÏÂ2ÌõÖ¸Áî  
   48 000013D6         ;// subs cycles,cycles,#$count  ;//   r8=r8-#$count
   49 000013D6 BF5C F819 
              0B01             ldrplb           r0,[m6502_pc],#1 ; //´Ó´æ´¢Æ÷ÖÐ
                                                            ¼ÓÔØ×Ö½Úµ½Ò»¸ö¼Ä´æÆ
                                                            ÷ÖÐ  r0=²Ù×÷Âë
   50 000013DC F85A F020       ldrpl            pc,[m6502_optbl,r0,lsl#2] ;//r1
                                                            0 ********r0=r0x4**
                                                            *ÔËÐÐ´úÂëµÄµØÖ·****
                                                            *******************
                                                            ***************
   51 000013E0 F8DA F484       ldr              pc,nexttimeout
  716 000013E4         ;-------------------------------------------------------
                       ---------------------
  717 000013E4         _AD                                  ;   LDA $nnnn
  718 000013E4         ;-------------------------------------------------------
                       ---------------------
  719 000013E4                 doABS
  228 000013E4 00000004 
                       _type   SETA             _ABS
  229 000013E4 F819 CB01       ldrb             addy,[m6502_pc],#1
  230 000013E8 F819 0B01       ldrb             r0,[m6502_pc],#1
  231 000013EC EA4C 2C00       orr              addy,addy,r0,lsl#8
  720 000013F0                 opLOAD           m6502_a
  420 000013F0                 readmems
  124 000013F0                 [                _type = _ABS
  125 000013F0                 readmemabs
   69 000013F0 F40C 4160       and              r1,addy,#0xE000
   70 000013F4 F20F 0E08       adr              lr,%F0
   71 000013F8         ;// ldr pc,[m6502_rmem,r1,lsr#11] ;//in: addy,r1=addy&0x
                       E000 (for rom_R)
   72 000013F8 EA4F 21D1       lsr              r1,r1,#11   ;//¸Ä¹ý£¬¼Ó2ÐÐ  >>1
                                                            1
   73 000013FC F854 F001       ldr              pc,[m6502_rmem,r1]
   74 00001400         
   75 00001400         0                                    ;//out: r0=val (bit
                                                            s 8-31=0 (LSR,ROR,I
                                                            NC,DEC,ASL)), addy 
                                                            preserved for RMW i



ARM Macro Assembler    Page 89 


                                                            nstructions
  126 00001400 EA40 6300       orr              m6502_nz,r0,r0,lsl#24
  127 00001404                 ]
  128 00001404                 [                _type = _ZP
  130                          ]
  131 00001404                 [                _type = _IMM
  133                          ]
  421 00001404 EA4F 6503       mov              m6502_a,m6502_nz,lsl#24
  721 00001408                 fetch            4
   47 00001408 F5B8 6880       subs             cycles,cycles,#4*256 ;//CYCLE=2
                                                            56 ;// 3*256 ÕýÊý»ò
                                                            0¾ÍÖ´ÐÐÏÂ2ÌõÖ¸Áî  
   48 0000140C         ;// subs cycles,cycles,#$count  ;//   r8=r8-#$count
   49 0000140C BF5C F819 
              0B01             ldrplb           r0,[m6502_pc],#1 ; //´Ó´æ´¢Æ÷ÖÐ
                                                            ¼ÓÔØ×Ö½Úµ½Ò»¸ö¼Ä´æÆ
                                                            ÷ÖÐ  r0=²Ù×÷Âë
   50 00001412 F85A F020       ldrpl            pc,[m6502_optbl,r0,lsl#2] ;//r1
                                                            0 ********r0=r0x4**
                                                            *ÔËÐÐ´úÂëµÄµØÖ·****
                                                            *******************
                                                            ***************
   51 00001416 F8DA F484       ldr              pc,nexttimeout
  722 0000141A         ;-------------------------------------------------------
                       ---------------------
  723 0000141A         _AE                                  ;   LDX $nnnn
  724 0000141A         ;-------------------------------------------------------
                       ---------------------
  725 0000141A                 doABS
  228 0000141A 00000004 
                       _type   SETA             _ABS
  229 0000141A F819 CB01       ldrb             addy,[m6502_pc],#1
  230 0000141E F819 0B01       ldrb             r0,[m6502_pc],#1
  231 00001422 EA4C 2C00       orr              addy,addy,r0,lsl#8
  726 00001426                 opLOAD           m6502_x
  420 00001426                 readmems
  124 00001426                 [                _type = _ABS
  125 00001426                 readmemabs
   69 00001426 F40C 4160       and              r1,addy,#0xE000
   70 0000142A F20F 0E0A       adr              lr,%F0
   71 0000142E         ;// ldr pc,[m6502_rmem,r1,lsr#11] ;//in: addy,r1=addy&0x
                       E000 (for rom_R)
   72 0000142E EA4F 21D1       lsr              r1,r1,#11   ;//¸Ä¹ý£¬¼Ó2ÐÐ  >>1
                                                            1
   73 00001432 F854 F001       ldr              pc,[m6502_rmem,r1]
   74 00001436         
   75 00001436         0                                    ;//out: r0=val (bit
                                                            s 8-31=0 (LSR,ROR,I
                                                            NC,DEC,ASL)), addy 
                                                            preserved for RMW i
                                                            nstructions
  126 00001436 EA40 6300       orr              m6502_nz,r0,r0,lsl#24
  127 0000143A                 ]
  128 0000143A                 [                _type = _ZP
  130                          ]
  131 0000143A                 [                _type = _IMM
  133                          ]
  421 0000143A EA4F 6603       mov              m6502_x,m6502_nz,lsl#24
  727 0000143E                 fetch            4



ARM Macro Assembler    Page 90 


   47 0000143E F5B8 6880       subs             cycles,cycles,#4*256 ;//CYCLE=2
                                                            56 ;// 3*256 ÕýÊý»ò
                                                            0¾ÍÖ´ÐÐÏÂ2ÌõÖ¸Áî  
   48 00001442         ;// subs cycles,cycles,#$count  ;//   r8=r8-#$count
   49 00001442 BF5C F819 
              0B01             ldrplb           r0,[m6502_pc],#1 ; //´Ó´æ´¢Æ÷ÖÐ
                                                            ¼ÓÔØ×Ö½Úµ½Ò»¸ö¼Ä´æÆ
                                                            ÷ÖÐ  r0=²Ù×÷Âë
   50 00001448 F85A F020       ldrpl            pc,[m6502_optbl,r0,lsl#2] ;//r1
                                                            0 ********r0=r0x4**
                                                            *ÔËÐÐ´úÂëµÄµØÖ·****
                                                            *******************
                                                            ***************
   51 0000144C F8DA F484       ldr              pc,nexttimeout
  728 00001450         ;-------------------------------------------------------
                       ---------------------
  729 00001450         _B0                                  ;   BCS *
  730 00001450         ;-------------------------------------------------------
                       ---------------------
  731 00001450 F018 0F01       tst              cycles,#CYC_C ;Test Carry
  732 00001454 F919 0B01       ldrsb            r0,[m6502_pc],#1
  733 00001458 BF1C 4481       addne            m6502_pc,m6502_pc,r0
  734 0000145C         ; subne cycles,cycles,#3*CYCLE
  735 0000145C F5A8 7880       subne            cycles,cycles,#256
  736 00001460                 fetch            2
   47 00001460 F5B8 7800       subs             cycles,cycles,#2*256 ;//CYCLE=2
                                                            56 ;// 3*256 ÕýÊý»ò
                                                            0¾ÍÖ´ÐÐÏÂ2ÌõÖ¸Áî  
   48 00001464         ;// subs cycles,cycles,#$count  ;//   r8=r8-#$count
   49 00001464 BF5C F819 
              0B01             ldrplb           r0,[m6502_pc],#1 ; //´Ó´æ´¢Æ÷ÖÐ
                                                            ¼ÓÔØ×Ö½Úµ½Ò»¸ö¼Ä´æÆ
                                                            ÷ÖÐ  r0=²Ù×÷Âë
   50 0000146A F85A F020       ldrpl            pc,[m6502_optbl,r0,lsl#2] ;//r1
                                                            0 ********r0=r0x4**
                                                            *ÔËÐÐ´úÂëµÄµØÖ·****
                                                            *******************
                                                            ***************
   51 0000146E F8DA F484       ldr              pc,nexttimeout
  737 00001472         ;-------------------------------------------------------
                       ---------------------
  738 00001472         _B1                                  ;   LDA ($nn),Y
  739 00001472         ;-------------------------------------------------------
                       ---------------------
  740 00001472                 doIIY
  278 00001472 00000004 
                       _type   SETA             _ABS
  279 00001472 F819 0B01       ldrb             r0,[m6502_pc],#1
  280 00001476         ;// ldrb addy,[r0,cpu_zpage]! ;;ÔÚÊý¾Ý´«ËÍÖ®Ç°,½«Æ«ÒÆÁ¿¼
                       Óµ½Rn ÖÐ,Æä½á¹û×÷Îª´«ËÍÊý¾ÝµÄ´æ´¢µØÖ·
  281 00001476         ;//ÈôÊ¹ÓÃºó×º"!",Ôò½á¹ûÐ´»Øµ½RnÖÐ
  282 00001476 F810 C00B       ldrb             addy,[r0,cpu_zpage]
  283 0000147A 4458            add              r0,r0,cpu_zpage ;//////////////
                                                            ///////////////////
                                                            /////
  284 0000147C         
  285 0000147C         
  286 0000147C 7841            ldrb             r1,[r0,#1]
  287 0000147E EA4C 2C01       orr              addy,addy,r1,lsl#8



ARM Macro Assembler    Page 91 


  288 00001482 EB0C 6C17       add              addy,addy,m6502_y,lsr#24
  289 00001486         ; bic addy,addy,#0xff0000 ;Zelda2 needs this
  741 00001486                 opLOAD           m6502_a
  420 00001486                 readmems
  124 00001486                 [                _type = _ABS
  125 00001486                 readmemabs
   69 00001486 F40C 4160       and              r1,addy,#0xE000
   70 0000148A F20F 0E0A       adr              lr,%F0
   71 0000148E         ;// ldr pc,[m6502_rmem,r1,lsr#11] ;//in: addy,r1=addy&0x
                       E000 (for rom_R)
   72 0000148E EA4F 21D1       lsr              r1,r1,#11   ;//¸Ä¹ý£¬¼Ó2ÐÐ  >>1
                                                            1
   73 00001492 F854 F001       ldr              pc,[m6502_rmem,r1]
   74 00001496         
   75 00001496         0                                    ;//out: r0=val (bit
                                                            s 8-31=0 (LSR,ROR,I
                                                            NC,DEC,ASL)), addy 
                                                            preserved for RMW i
                                                            nstructions
  126 00001496 EA40 6300       orr              m6502_nz,r0,r0,lsl#24
  127 0000149A                 ]
  128 0000149A                 [                _type = _ZP
  130                          ]
  131 0000149A                 [                _type = _IMM
  133                          ]
  421 0000149A EA4F 6503       mov              m6502_a,m6502_nz,lsl#24
  742 0000149E                 fetch            5
   47 0000149E F5B8 68A0       subs             cycles,cycles,#5*256 ;//CYCLE=2
                                                            56 ;// 3*256 ÕýÊý»ò
                                                            0¾ÍÖ´ÐÐÏÂ2ÌõÖ¸Áî  
   48 000014A2         ;// subs cycles,cycles,#$count  ;//   r8=r8-#$count
   49 000014A2 BF5C F819 
              0B01             ldrplb           r0,[m6502_pc],#1 ; //´Ó´æ´¢Æ÷ÖÐ
                                                            ¼ÓÔØ×Ö½Úµ½Ò»¸ö¼Ä´æÆ
                                                            ÷ÖÐ  r0=²Ù×÷Âë
   50 000014A8 F85A F020       ldrpl            pc,[m6502_optbl,r0,lsl#2] ;//r1
                                                            0 ********r0=r0x4**
                                                            *ÔËÐÐ´úÂëµÄµØÖ·****
                                                            *******************
                                                            ***************
   51 000014AC F8DA F484       ldr              pc,nexttimeout
  743 000014B0         ;-------------------------------------------------------
                       ---------------------
  744 000014B0         _B4                                  ;   LDY $nn,X
  745 000014B0         ;-------------------------------------------------------
                       ---------------------
  746 000014B0                 doZIX
  320 000014B0 00000002 
                       _type   SETA             _ZP
  321 000014B0 F819 CB01       ldrb             addy,[m6502_pc],#1
  322 000014B4 EB0C 6C16       add              addy,addy,m6502_x,lsr#24
  323 000014B8 F00C 0CFF       and              addy,addy,#0xff 
                                                            ;Rygar needs this
  747 000014BC                 opLOAD           m6502_y
  420 000014BC                 readmems
  124 000014BC                 [                _type = _ABS
  127                          ]
  128 000014BC                 [                _type = _ZP
  129 000014BC                 readmemzps



ARM Macro Assembler    Page 92 


   93 000014BC F91B 300C       ldrsb            m6502_nz,[cpu_zpage,addy]
  130 000014C0                 ]
  131 000014C0                 [                _type = _IMM
  133                          ]
  421 000014C0 EA4F 6703       mov              m6502_y,m6502_nz,lsl#24
  748 000014C4                 fetch            4
   47 000014C4 F5B8 6880       subs             cycles,cycles,#4*256 ;//CYCLE=2
                                                            56 ;// 3*256 ÕýÊý»ò
                                                            0¾ÍÖ´ÐÐÏÂ2ÌõÖ¸Áî  
   48 000014C8         ;// subs cycles,cycles,#$count  ;//   r8=r8-#$count
   49 000014C8 BF5C F819 
              0B01             ldrplb           r0,[m6502_pc],#1 ; //´Ó´æ´¢Æ÷ÖÐ
                                                            ¼ÓÔØ×Ö½Úµ½Ò»¸ö¼Ä´æÆ
                                                            ÷ÖÐ  r0=²Ù×÷Âë
   50 000014CE F85A F020       ldrpl            pc,[m6502_optbl,r0,lsl#2] ;//r1
                                                            0 ********r0=r0x4**
                                                            *ÔËÐÐ´úÂëµÄµØÖ·****
                                                            *******************
                                                            ***************
   51 000014D2 F8DA F484       ldr              pc,nexttimeout
  749 000014D6         ;-------------------------------------------------------
                       ---------------------
  750 000014D6         _B5                                  ;   LDA $nn,X
  751 000014D6         ;-------------------------------------------------------
                       ---------------------
  752 000014D6                 doZIX
  320 000014D6 00000002 
                       _type   SETA             _ZP
  321 000014D6 F819 CB01       ldrb             addy,[m6502_pc],#1
  322 000014DA EB0C 6C16       add              addy,addy,m6502_x,lsr#24
  323 000014DE F00C 0CFF       and              addy,addy,#0xff 
                                                            ;Rygar needs this
  753 000014E2                 opLOAD           m6502_a
  420 000014E2                 readmems
  124 000014E2                 [                _type = _ABS
  127                          ]
  128 000014E2                 [                _type = _ZP
  129 000014E2                 readmemzps
   93 000014E2 F91B 300C       ldrsb            m6502_nz,[cpu_zpage,addy]
  130 000014E6                 ]
  131 000014E6                 [                _type = _IMM
  133                          ]
  421 000014E6 EA4F 6503       mov              m6502_a,m6502_nz,lsl#24
  754 000014EA                 fetch            4
   47 000014EA F5B8 6880       subs             cycles,cycles,#4*256 ;//CYCLE=2
                                                            56 ;// 3*256 ÕýÊý»ò
                                                            0¾ÍÖ´ÐÐÏÂ2ÌõÖ¸Áî  
   48 000014EE         ;// subs cycles,cycles,#$count  ;//   r8=r8-#$count
   49 000014EE BF5C F819 
              0B01             ldrplb           r0,[m6502_pc],#1 ; //´Ó´æ´¢Æ÷ÖÐ
                                                            ¼ÓÔØ×Ö½Úµ½Ò»¸ö¼Ä´æÆ
                                                            ÷ÖÐ  r0=²Ù×÷Âë
   50 000014F4 F85A F020       ldrpl            pc,[m6502_optbl,r0,lsl#2] ;//r1
                                                            0 ********r0=r0x4**
                                                            *ÔËÐÐ´úÂëµÄµØÖ·****
                                                            *******************
                                                            ***************
   51 000014F8 F8DA F484       ldr              pc,nexttimeout
  755 000014FC         ;-------------------------------------------------------



ARM Macro Assembler    Page 93 


                       ---------------------
  756 000014FC         _B6                                  ;   LDX $nn,Y
  757 000014FC         ;-------------------------------------------------------
                       ---------------------
  758 000014FC                 doZIY
  335 000014FC 00000002 
                       _type   SETA             _ZP
  336 000014FC F819 CB01       ldrb             addy,[m6502_pc],#1
  337 00001500 EB0C 6C17       add              addy,addy,m6502_y,lsr#24
  338 00001504 F00C 0CFF       and              addy,addy,#0xff
  759 00001508                 opLOAD           m6502_x
  420 00001508                 readmems
  124 00001508                 [                _type = _ABS
  127                          ]
  128 00001508                 [                _type = _ZP
  129 00001508                 readmemzps
   93 00001508 F91B 300C       ldrsb            m6502_nz,[cpu_zpage,addy]
  130 0000150C                 ]
  131 0000150C                 [                _type = _IMM
  133                          ]
  421 0000150C EA4F 6603       mov              m6502_x,m6502_nz,lsl#24
  760 00001510                 fetch            4
   47 00001510 F5B8 6880       subs             cycles,cycles,#4*256 ;//CYCLE=2
                                                            56 ;// 3*256 ÕýÊý»ò
                                                            0¾ÍÖ´ÐÐÏÂ2ÌõÖ¸Áî  
   48 00001514         ;// subs cycles,cycles,#$count  ;//   r8=r8-#$count
   49 00001514 BF5C F819 
              0B01             ldrplb           r0,[m6502_pc],#1 ; //´Ó´æ´¢Æ÷ÖÐ
                                                            ¼ÓÔØ×Ö½Úµ½Ò»¸ö¼Ä´æÆ
                                                            ÷ÖÐ  r0=²Ù×÷Âë
   50 0000151A F85A F020       ldrpl            pc,[m6502_optbl,r0,lsl#2] ;//r1
                                                            0 ********r0=r0x4**
                                                            *ÔËÐÐ´úÂëµÄµØÖ·****
                                                            *******************
                                                            ***************
   51 0000151E F8DA F484       ldr              pc,nexttimeout
  761 00001522         ;-------------------------------------------------------
                       ---------------------
  762 00001522         _B8                                  ;   CLV
  763 00001522         ;-------------------------------------------------------
                       ---------------------
  764 00001522 F028 0840       bic              cycles,cycles,#CYC_V
  765 00001526                 fetch            2
   47 00001526 F5B8 7800       subs             cycles,cycles,#2*256 ;//CYCLE=2
                                                            56 ;// 3*256 ÕýÊý»ò
                                                            0¾ÍÖ´ÐÐÏÂ2ÌõÖ¸Áî  
   48 0000152A         ;// subs cycles,cycles,#$count  ;//   r8=r8-#$count
   49 0000152A BF5C F819 
              0B01             ldrplb           r0,[m6502_pc],#1 ; //´Ó´æ´¢Æ÷ÖÐ
                                                            ¼ÓÔØ×Ö½Úµ½Ò»¸ö¼Ä´æÆ
                                                            ÷ÖÐ  r0=²Ù×÷Âë
   50 00001530 F85A F020       ldrpl            pc,[m6502_optbl,r0,lsl#2] ;//r1
                                                            0 ********r0=r0x4**
                                                            *ÔËÐÐ´úÂëµÄµØÖ·****
                                                            *******************
                                                            ***************
   51 00001534 F8DA F484       ldr              pc,nexttimeout
  766 00001538         ;-------------------------------------------------------
                       ---------------------



ARM Macro Assembler    Page 94 


  767 00001538         _B9                                  ;   LDA $nnnn,Y
  768 00001538         ;-------------------------------------------------------
                       ---------------------
  769 00001538                 doAIY
  246 00001538 00000004 
                       _type   SETA             _ABS
  247 00001538 F819 CB01       ldrb             addy,[m6502_pc],#1
  248 0000153C F819 0B01       ldrb             r0,[m6502_pc],#1
  249 00001540 EA4C 2C00       orr              addy,addy,r0,lsl#8
  250 00001544 EB0C 6C17       add              addy,addy,m6502_y,lsr#24
  251 00001548         ; bic addy,addy,#0xff0000 ;Tecmo Bowl needs this
  770 00001548                 opLOAD           m6502_a
  420 00001548                 readmems
  124 00001548                 [                _type = _ABS
  125 00001548                 readmemabs
   69 00001548 F40C 4160       and              r1,addy,#0xE000
   70 0000154C F20F 0E08       adr              lr,%F0
   71 00001550         ;// ldr pc,[m6502_rmem,r1,lsr#11] ;//in: addy,r1=addy&0x
                       E000 (for rom_R)
   72 00001550 EA4F 21D1       lsr              r1,r1,#11   ;//¸Ä¹ý£¬¼Ó2ÐÐ  >>1
                                                            1
   73 00001554 F854 F001       ldr              pc,[m6502_rmem,r1]
   74 00001558         
   75 00001558         0                                    ;//out: r0=val (bit
                                                            s 8-31=0 (LSR,ROR,I
                                                            NC,DEC,ASL)), addy 
                                                            preserved for RMW i
                                                            nstructions
  126 00001558 EA40 6300       orr              m6502_nz,r0,r0,lsl#24
  127 0000155C                 ]
  128 0000155C                 [                _type = _ZP
  130                          ]
  131 0000155C                 [                _type = _IMM
  133                          ]
  421 0000155C EA4F 6503       mov              m6502_a,m6502_nz,lsl#24
  771 00001560                 fetch            4
   47 00001560 F5B8 6880       subs             cycles,cycles,#4*256 ;//CYCLE=2
                                                            56 ;// 3*256 ÕýÊý»ò
                                                            0¾ÍÖ´ÐÐÏÂ2ÌõÖ¸Áî  
   48 00001564         ;// subs cycles,cycles,#$count  ;//   r8=r8-#$count
   49 00001564 BF5C F819 
              0B01             ldrplb           r0,[m6502_pc],#1 ; //´Ó´æ´¢Æ÷ÖÐ
                                                            ¼ÓÔØ×Ö½Úµ½Ò»¸ö¼Ä´æÆ
                                                            ÷ÖÐ  r0=²Ù×÷Âë
   50 0000156A F85A F020       ldrpl            pc,[m6502_optbl,r0,lsl#2] ;//r1
                                                            0 ********r0=r0x4**
                                                            *ÔËÐÐ´úÂëµÄµØÖ·****
                                                            *******************
                                                            ***************
   51 0000156E F8DA F484       ldr              pc,nexttimeout
  772 00001572         ;-------------------------------------------------------
                       ---------------------
  773 00001572         _BA                                  ;   TSX
  774 00001572         ;-------------------------------------------------------
                       ---------------------
  775 00001572 F89A 647C       ldrb             m6502_x,m6502_s
  776 00001576 EA4F 6606       mov              m6502_x,m6502_x,lsl#24
  777 0000157A EA4F 6326       mov              m6502_nz,m6502_x,asr#24
  778 0000157E                 fetch            2



ARM Macro Assembler    Page 95 


   47 0000157E F5B8 7800       subs             cycles,cycles,#2*256 ;//CYCLE=2
                                                            56 ;// 3*256 ÕýÊý»ò
                                                            0¾ÍÖ´ÐÐÏÂ2ÌõÖ¸Áî  
   48 00001582         ;// subs cycles,cycles,#$count  ;//   r8=r8-#$count
   49 00001582 BF5C F819 
              0B01             ldrplb           r0,[m6502_pc],#1 ; //´Ó´æ´¢Æ÷ÖÐ
                                                            ¼ÓÔØ×Ö½Úµ½Ò»¸ö¼Ä´æÆ
                                                            ÷ÖÐ  r0=²Ù×÷Âë
   50 00001588 F85A F020       ldrpl            pc,[m6502_optbl,r0,lsl#2] ;//r1
                                                            0 ********r0=r0x4**
                                                            *ÔËÐÐ´úÂëµÄµØÖ·****
                                                            *******************
                                                            ***************
   51 0000158C F8DA F484       ldr              pc,nexttimeout
  779 00001590         ;-------------------------------------------------------
                       ---------------------
  780 00001590         _BC                                  ;   LDY $nnnn,X
  781 00001590         ;-------------------------------------------------------
                       ---------------------
  782 00001590                 doAIX
  236 00001590 00000004 
                       _type   SETA             _ABS
  237 00001590 F819 CB01       ldrb             addy,[m6502_pc],#1
  238 00001594 F819 0B01       ldrb             r0,[m6502_pc],#1
  239 00001598 EA4C 2C00       orr              addy,addy,r0,lsl#8
  240 0000159C EB0C 6C16       add              addy,addy,m6502_x,lsr#24
  241 000015A0         ; bic addy,addy,#0xff0000 ;Base Wars needs this
  783 000015A0                 opLOAD           m6502_y
  420 000015A0                 readmems
  124 000015A0                 [                _type = _ABS
  125 000015A0                 readmemabs
   69 000015A0 F40C 4160       and              r1,addy,#0xE000
   70 000015A4 F20F 0E08       adr              lr,%F0
   71 000015A8         ;// ldr pc,[m6502_rmem,r1,lsr#11] ;//in: addy,r1=addy&0x
                       E000 (for rom_R)
   72 000015A8 EA4F 21D1       lsr              r1,r1,#11   ;//¸Ä¹ý£¬¼Ó2ÐÐ  >>1
                                                            1
   73 000015AC F854 F001       ldr              pc,[m6502_rmem,r1]
   74 000015B0         
   75 000015B0         0                                    ;//out: r0=val (bit
                                                            s 8-31=0 (LSR,ROR,I
                                                            NC,DEC,ASL)), addy 
                                                            preserved for RMW i
                                                            nstructions
  126 000015B0 EA40 6300       orr              m6502_nz,r0,r0,lsl#24
  127 000015B4                 ]
  128 000015B4                 [                _type = _ZP
  130                          ]
  131 000015B4                 [                _type = _IMM
  133                          ]
  421 000015B4 EA4F 6703       mov              m6502_y,m6502_nz,lsl#24
  784 000015B8                 fetch            4
   47 000015B8 F5B8 6880       subs             cycles,cycles,#4*256 ;//CYCLE=2
                                                            56 ;// 3*256 ÕýÊý»ò
                                                            0¾ÍÖ´ÐÐÏÂ2ÌõÖ¸Áî  
   48 000015BC         ;// subs cycles,cycles,#$count  ;//   r8=r8-#$count
   49 000015BC BF5C F819 
              0B01             ldrplb           r0,[m6502_pc],#1 ; //´Ó´æ´¢Æ÷ÖÐ
                                                            ¼ÓÔØ×Ö½Úµ½Ò»¸ö¼Ä´æÆ



ARM Macro Assembler    Page 96 


                                                            ÷ÖÐ  r0=²Ù×÷Âë
   50 000015C2 F85A F020       ldrpl            pc,[m6502_optbl,r0,lsl#2] ;//r1
                                                            0 ********r0=r0x4**
                                                            *ÔËÐÐ´úÂëµÄµØÖ·****
                                                            *******************
                                                            ***************
   51 000015C6 F8DA F484       ldr              pc,nexttimeout
  785 000015CA         ;-------------------------------------------------------
                       ---------------------
  786 000015CA         _BD                                  ;   LDA $nnnn,X
  787 000015CA         ;-------------------------------------------------------
                       ---------------------
  788 000015CA                 doAIX
  236 000015CA 00000004 
                       _type   SETA             _ABS
  237 000015CA F819 CB01       ldrb             addy,[m6502_pc],#1
  238 000015CE F819 0B01       ldrb             r0,[m6502_pc],#1
  239 000015D2 EA4C 2C00       orr              addy,addy,r0,lsl#8
  240 000015D6 EB0C 6C16       add              addy,addy,m6502_x,lsr#24
  241 000015DA         ; bic addy,addy,#0xff0000 ;Base Wars needs this
  789 000015DA                 opLOAD           m6502_a
  420 000015DA                 readmems
  124 000015DA                 [                _type = _ABS
  125 000015DA                 readmemabs
   69 000015DA F40C 4160       and              r1,addy,#0xE000
   70 000015DE F20F 0E0A       adr              lr,%F0
   71 000015E2         ;// ldr pc,[m6502_rmem,r1,lsr#11] ;//in: addy,r1=addy&0x
                       E000 (for rom_R)
   72 000015E2 EA4F 21D1       lsr              r1,r1,#11   ;//¸Ä¹ý£¬¼Ó2ÐÐ  >>1
                                                            1
   73 000015E6 F854 F001       ldr              pc,[m6502_rmem,r1]
   74 000015EA         
   75 000015EA         0                                    ;//out: r0=val (bit
                                                            s 8-31=0 (LSR,ROR,I
                                                            NC,DEC,ASL)), addy 
                                                            preserved for RMW i
                                                            nstructions
  126 000015EA EA40 6300       orr              m6502_nz,r0,r0,lsl#24
  127 000015EE                 ]
  128 000015EE                 [                _type = _ZP
  130                          ]
  131 000015EE                 [                _type = _IMM
  133                          ]
  421 000015EE EA4F 6503       mov              m6502_a,m6502_nz,lsl#24
  790 000015F2                 fetch            4
   47 000015F2 F5B8 6880       subs             cycles,cycles,#4*256 ;//CYCLE=2
                                                            56 ;// 3*256 ÕýÊý»ò
                                                            0¾ÍÖ´ÐÐÏÂ2ÌõÖ¸Áî  
   48 000015F6         ;// subs cycles,cycles,#$count  ;//   r8=r8-#$count
   49 000015F6 BF5C F819 
              0B01             ldrplb           r0,[m6502_pc],#1 ; //´Ó´æ´¢Æ÷ÖÐ
                                                            ¼ÓÔØ×Ö½Úµ½Ò»¸ö¼Ä´æÆ
                                                            ÷ÖÐ  r0=²Ù×÷Âë
   50 000015FC F85A F020       ldrpl            pc,[m6502_optbl,r0,lsl#2] ;//r1
                                                            0 ********r0=r0x4**
                                                            *ÔËÐÐ´úÂëµÄµØÖ·****
                                                            *******************
                                                            ***************
   51 00001600 F8DA F484       ldr              pc,nexttimeout



ARM Macro Assembler    Page 97 


  791 00001604         ;-------------------------------------------------------
                       ---------------------
  792 00001604         _BE                                  ;   LDX $nnnn,Y
  793 00001604         ;-------------------------------------------------------
                       ---------------------
  794 00001604                 doAIY
  246 00001604 00000004 
                       _type   SETA             _ABS
  247 00001604 F819 CB01       ldrb             addy,[m6502_pc],#1
  248 00001608 F819 0B01       ldrb             r0,[m6502_pc],#1
  249 0000160C EA4C 2C00       orr              addy,addy,r0,lsl#8
  250 00001610 EB0C 6C17       add              addy,addy,m6502_y,lsr#24
  251 00001614         ; bic addy,addy,#0xff0000 ;Tecmo Bowl needs this
  795 00001614                 opLOAD           m6502_x
  420 00001614                 readmems
  124 00001614                 [                _type = _ABS
  125 00001614                 readmemabs
   69 00001614 F40C 4160       and              r1,addy,#0xE000
   70 00001618 F20F 0E08       adr              lr,%F0
   71 0000161C         ;// ldr pc,[m6502_rmem,r1,lsr#11] ;//in: addy,r1=addy&0x
                       E000 (for rom_R)
   72 0000161C EA4F 21D1       lsr              r1,r1,#11   ;//¸Ä¹ý£¬¼Ó2ÐÐ  >>1
                                                            1
   73 00001620 F854 F001       ldr              pc,[m6502_rmem,r1]
   74 00001624         
   75 00001624         0                                    ;//out: r0=val (bit
                                                            s 8-31=0 (LSR,ROR,I
                                                            NC,DEC,ASL)), addy 
                                                            preserved for RMW i
                                                            nstructions
  126 00001624 EA40 6300       orr              m6502_nz,r0,r0,lsl#24
  127 00001628                 ]
  128 00001628                 [                _type = _ZP
  130                          ]
  131 00001628                 [                _type = _IMM
  133                          ]
  421 00001628 EA4F 6603       mov              m6502_x,m6502_nz,lsl#24
  796 0000162C                 fetch            4
   47 0000162C F5B8 6880       subs             cycles,cycles,#4*256 ;//CYCLE=2
                                                            56 ;// 3*256 ÕýÊý»ò
                                                            0¾ÍÖ´ÐÐÏÂ2ÌõÖ¸Áî  
   48 00001630         ;// subs cycles,cycles,#$count  ;//   r8=r8-#$count
   49 00001630 BF5C F819 
              0B01             ldrplb           r0,[m6502_pc],#1 ; //´Ó´æ´¢Æ÷ÖÐ
                                                            ¼ÓÔØ×Ö½Úµ½Ò»¸ö¼Ä´æÆ
                                                            ÷ÖÐ  r0=²Ù×÷Âë
   50 00001636 F85A F020       ldrpl            pc,[m6502_optbl,r0,lsl#2] ;//r1
                                                            0 ********r0=r0x4**
                                                            *ÔËÐÐ´úÂëµÄµØÖ·****
                                                            *******************
                                                            ***************
   51 0000163A F8DA F484       ldr              pc,nexttimeout
  797 0000163E         ;-------------------------------------------------------
                       ---------------------
  798 0000163E         _C0                                  ;   CPY #$nn
  799 0000163E         ;-------------------------------------------------------
                       ---------------------
  800 0000163E                 doIMM
  256 0000163E 00000001 



ARM Macro Assembler    Page 98 


                       _type   SETA             _IMM
  801 0000163E                 opCOMP           m6502_y
  389 0000163E                 readmem
  108 0000163E                 [                _type = _ABS
  110                          ]
  111 0000163E                 [                _type = _ZP
  113                          ]
  114 0000163E                 [                _type = _ZPI
  116                          ]
  117 0000163E                 [                _type = _IMM
  118 0000163E                 readmemimm
   98 0000163E F819 0B01       ldrb             r0,[m6502_pc],#1
  119 00001642                 ]
  390 00001642 EBB7 6300       subs             m6502_nz,m6502_y,r0,lsl#24
  391 00001646 EA4F 6323       mov              m6502_nz,m6502_nz,asr#24 ;NZ
  392 0000164A F048 0801       orr              cycles,cycles,#CYC_C ;Prepare C
                                                            
  802 0000164E                 fetch_c          2
   56 0000164E F578 7800       sbcs             cycles,cycles,#2*256 
                                                            ;//CYCLE=256
   57 00001652 BF5C F819 
              0B01             ldrplb           r0,[m6502_pc],#1
   58 00001658 F85A F020       ldrpl            pc,[m6502_optbl,r0,lsl#2]
   59 0000165C F8DA F484       ldr              pc,nexttimeout
  803 00001660         ;-------------------------------------------------------
                       ---------------------
  804 00001660         _C1                                  ;   CMP ($nn,X)
  805 00001660         ;-------------------------------------------------------
                       ---------------------
  806 00001660                 doIIX
  261 00001660 00000004 
                       _type   SETA             _ABS
  262 00001660 F819 0B01       ldrb             r0,[m6502_pc],#1
  263 00001664 EB06 6000       add              r0,m6502_x,r0,lsl#24
  264 00001668         ;//ldrb addy,[cpu_zpage,r0,lsr#24] ;//´íÎó:Ö¸¶¨µÄ×ª±ä²»Ô
                       ÊÐí
  265 00001668 EA4F 6C10       lsr              addy,r0,#24 ;//¸Ä¹ý£¬¼Ó2ÐÐ >>24
                                                            
  266 0000166C F81B C00C       ldrb             addy,[cpu_zpage,addy]
  267 00001670         
  268 00001670 F100 7080       add              r0,r0,#0x01000000
  269 00001674         ;//ldrb r1,[cpu_zpage,r0,lsr#24] ;//R1,LSR#2;½«R1ÖÐµÄÄÚÈ
                       ÝÓÒÒÆ2Î»
  270 00001674 EA4F 6110       lsr              r1,r0,#24   ;//¸Ä¹ý£¬¼Ó2ÐÐ
  271 00001678 F81B 1001       ldrb             r1,[cpu_zpage,r1]
  272 0000167C         
  273 0000167C EA4C 2C01       orr              addy,addy,r1,lsl#8
  807 00001680                 opCOMP           m6502_a
  389 00001680                 readmem
  108 00001680                 [                _type = _ABS
  109 00001680                 readmemabs
   69 00001680 F40C 4160       and              r1,addy,#0xE000
   70 00001684 F20F 0E08       adr              lr,%F0
   71 00001688         ;// ldr pc,[m6502_rmem,r1,lsr#11] ;//in: addy,r1=addy&0x
                       E000 (for rom_R)
   72 00001688 EA4F 21D1       lsr              r1,r1,#11   ;//¸Ä¹ý£¬¼Ó2ÐÐ  >>1
                                                            1
   73 0000168C F854 F001       ldr              pc,[m6502_rmem,r1]
   74 00001690         



ARM Macro Assembler    Page 99 


   75 00001690         0                                    ;//out: r0=val (bit
                                                            s 8-31=0 (LSR,ROR,I
                                                            NC,DEC,ASL)), addy 
                                                            preserved for RMW i
                                                            nstructions
  110 00001690                 ]
  111 00001690                 [                _type = _ZP
  113                          ]
  114 00001690                 [                _type = _ZPI
  116                          ]
  117 00001690                 [                _type = _IMM
  119                          ]
  390 00001690 EBB5 6300       subs             m6502_nz,m6502_a,r0,lsl#24
  391 00001694 EA4F 6323       mov              m6502_nz,m6502_nz,asr#24 ;NZ
  392 00001698 F048 0801       orr              cycles,cycles,#CYC_C ;Prepare C
                                                            
  808 0000169C                 fetch_c          6
   56 0000169C F578 68C0       sbcs             cycles,cycles,#6*256 
                                                            ;//CYCLE=256
   57 000016A0 BF5C F819 
              0B01             ldrplb           r0,[m6502_pc],#1
   58 000016A6 F85A F020       ldrpl            pc,[m6502_optbl,r0,lsl#2]
   59 000016AA F8DA F484       ldr              pc,nexttimeout
  809 000016AE         ;-------------------------------------------------------
                       ---------------------
  810 000016AE         _C4                                  ;   CPY $nn
  811 000016AE         ;-------------------------------------------------------
                       ---------------------
  812 000016AE                 doZ
  308 000016AE 00000002 
                       _type   SETA             _ZP
  309 000016AE F819 CB01       ldrb             addy,[m6502_pc],#1
  813 000016B2                 opCOMP           m6502_y
  389 000016B2                 readmem
  108 000016B2                 [                _type = _ABS
  110                          ]
  111 000016B2                 [                _type = _ZP
  112 000016B2                 readmemzp
   80 000016B2 F81B 000C       ldrb             r0,[cpu_zpage,addy]
  113 000016B6                 ]
  114 000016B6                 [                _type = _ZPI
  116                          ]
  117 000016B6                 [                _type = _IMM
  119                          ]
  390 000016B6 EBB7 6300       subs             m6502_nz,m6502_y,r0,lsl#24
  391 000016BA EA4F 6323       mov              m6502_nz,m6502_nz,asr#24 ;NZ
  392 000016BE F048 0801       orr              cycles,cycles,#CYC_C ;Prepare C
                                                            
  814 000016C2                 fetch_c          3
   56 000016C2 F578 7840       sbcs             cycles,cycles,#3*256 
                                                            ;//CYCLE=256
   57 000016C6 BF5C F819 
              0B01             ldrplb           r0,[m6502_pc],#1
   58 000016CC F85A F020       ldrpl            pc,[m6502_optbl,r0,lsl#2]
   59 000016D0 F8DA F484       ldr              pc,nexttimeout
  815 000016D4         ;-------------------------------------------------------
                       ---------------------
  816 000016D4         _C5                                  ;   CMP $nn
  817 000016D4         ;-------------------------------------------------------



ARM Macro Assembler    Page 100 


                       ---------------------
  818 000016D4                 doZ
  308 000016D4 00000002 
                       _type   SETA             _ZP
  309 000016D4 F819 CB01       ldrb             addy,[m6502_pc],#1
  819 000016D8                 opCOMP           m6502_a
  389 000016D8                 readmem
  108 000016D8                 [                _type = _ABS
  110                          ]
  111 000016D8                 [                _type = _ZP
  112 000016D8                 readmemzp
   80 000016D8 F81B 000C       ldrb             r0,[cpu_zpage,addy]
  113 000016DC                 ]
  114 000016DC                 [                _type = _ZPI
  116                          ]
  117 000016DC                 [                _type = _IMM
  119                          ]
  390 000016DC EBB5 6300       subs             m6502_nz,m6502_a,r0,lsl#24
  391 000016E0 EA4F 6323       mov              m6502_nz,m6502_nz,asr#24 ;NZ
  392 000016E4 F048 0801       orr              cycles,cycles,#CYC_C ;Prepare C
                                                            
  820 000016E8                 fetch_c          3
   56 000016E8 F578 7840       sbcs             cycles,cycles,#3*256 
                                                            ;//CYCLE=256
   57 000016EC BF5C F819 
              0B01             ldrplb           r0,[m6502_pc],#1
   58 000016F2 F85A F020       ldrpl            pc,[m6502_optbl,r0,lsl#2]
   59 000016F6 F8DA F484       ldr              pc,nexttimeout
  821 000016FA         ;-------------------------------------------------------
                       ---------------------
  822 000016FA         _C6                                  ;   DEC $nn
  823 000016FA         ;-------------------------------------------------------
                       ---------------------
  824 000016FA                 doZ
  308 000016FA 00000002 
                       _type   SETA             _ZP
  309 000016FA F819 CB01       ldrb             addy,[m6502_pc],#1
  825 000016FE                 opDEC
  397 000016FE                 readmem
  108 000016FE                 [                _type = _ABS
  110                          ]
  111 000016FE                 [                _type = _ZP
  112 000016FE                 readmemzp
   80 000016FE F81B 000C       ldrb             r0,[cpu_zpage,addy]
  113 00001702                 ]
  114 00001702                 [                _type = _ZPI
  116                          ]
  117 00001702                 [                _type = _IMM
  119                          ]
  398 00001702 F1A0 0001       sub              r0,r0,#1
  399 00001706 EA40 6300       orr              m6502_nz,r0,r0,lsl#24 ;NZ
  400 0000170A                 writemem
  165 0000170A                 [                _type = _ABS
  167                          ]
  168 0000170A                 [                _type = _ZP
  169 0000170A                 writememzp
  151 0000170A F80B 000C       strb             r0,[cpu_zpage,addy]
  170 0000170E                 ]
  171 0000170E                 [                _type = _ZPI



ARM Macro Assembler    Page 101 


  173                          ]
  826 0000170E                 fetch            5
   47 0000170E F5B8 68A0       subs             cycles,cycles,#5*256 ;//CYCLE=2
                                                            56 ;// 3*256 ÕýÊý»ò
                                                            0¾ÍÖ´ÐÐÏÂ2ÌõÖ¸Áî  
   48 00001712         ;// subs cycles,cycles,#$count  ;//   r8=r8-#$count
   49 00001712 BF5C F819 
              0B01             ldrplb           r0,[m6502_pc],#1 ; //´Ó´æ´¢Æ÷ÖÐ
                                                            ¼ÓÔØ×Ö½Úµ½Ò»¸ö¼Ä´æÆ
                                                            ÷ÖÐ  r0=²Ù×÷Âë
   50 00001718 F85A F020       ldrpl            pc,[m6502_optbl,r0,lsl#2] ;//r1
                                                            0 ********r0=r0x4**
                                                            *ÔËÐÐ´úÂëµÄµØÖ·****
                                                            *******************
                                                            ***************
   51 0000171C F8DA F484       ldr              pc,nexttimeout
  827 00001720         ;-------------------------------------------------------
                       ---------------------
  828 00001720         _C8                                  ;   INY
  829 00001720         ;-------------------------------------------------------
                       ---------------------
  830 00001720 F107 7780       add              m6502_y,m6502_y,#0x01000000
  831 00001724 EA4F 6327       mov              m6502_nz,m6502_y,asr#24
  832 00001728                 fetch            2
   47 00001728 F5B8 7800       subs             cycles,cycles,#2*256 ;//CYCLE=2
                                                            56 ;// 3*256 ÕýÊý»ò
                                                            0¾ÍÖ´ÐÐÏÂ2ÌõÖ¸Áî  
   48 0000172C         ;// subs cycles,cycles,#$count  ;//   r8=r8-#$count
   49 0000172C BF5C F819 
              0B01             ldrplb           r0,[m6502_pc],#1 ; //´Ó´æ´¢Æ÷ÖÐ
                                                            ¼ÓÔØ×Ö½Úµ½Ò»¸ö¼Ä´æÆ
                                                            ÷ÖÐ  r0=²Ù×÷Âë
   50 00001732 F85A F020       ldrpl            pc,[m6502_optbl,r0,lsl#2] ;//r1
                                                            0 ********r0=r0x4**
                                                            *ÔËÐÐ´úÂëµÄµØÖ·****
                                                            *******************
                                                            ***************
   51 00001736 F8DA F484       ldr              pc,nexttimeout
  833 0000173A         ;-------------------------------------------------------
                       ---------------------
  834 0000173A         _C9                                  ;   CMP #$nn
  835 0000173A         ;-------------------------------------------------------
                       ---------------------
  836 0000173A                 doIMM
  256 0000173A 00000001 
                       _type   SETA             _IMM
  837 0000173A                 opCOMP           m6502_a
  389 0000173A                 readmem
  108 0000173A                 [                _type = _ABS
  110                          ]
  111 0000173A                 [                _type = _ZP
  113                          ]
  114 0000173A                 [                _type = _ZPI
  116                          ]
  117 0000173A                 [                _type = _IMM
  118 0000173A                 readmemimm
   98 0000173A F819 0B01       ldrb             r0,[m6502_pc],#1
  119 0000173E                 ]
  390 0000173E EBB5 6300       subs             m6502_nz,m6502_a,r0,lsl#24



ARM Macro Assembler    Page 102 


  391 00001742 EA4F 6323       mov              m6502_nz,m6502_nz,asr#24 ;NZ
  392 00001746 F048 0801       orr              cycles,cycles,#CYC_C ;Prepare C
                                                            
  838 0000174A                 fetch_c          2
   56 0000174A F578 7800       sbcs             cycles,cycles,#2*256 
                                                            ;//CYCLE=256
   57 0000174E BF5C F819 
              0B01             ldrplb           r0,[m6502_pc],#1
   58 00001754 F85A F020       ldrpl            pc,[m6502_optbl,r0,lsl#2]
   59 00001758 F8DA F484       ldr              pc,nexttimeout
  839 0000175C         ;-------------------------------------------------------
                       ---------------------
  840 0000175C         _CA                                  ;   DEX
  841 0000175C         ;-------------------------------------------------------
                       ---------------------
  842 0000175C F1A6 7680       sub              m6502_x,m6502_x,#0x01000000
  843 00001760 EA4F 6326       mov              m6502_nz,m6502_x,asr#24
  844 00001764                 fetch            2
   47 00001764 F5B8 7800       subs             cycles,cycles,#2*256 ;//CYCLE=2
                                                            56 ;// 3*256 ÕýÊý»ò
                                                            0¾ÍÖ´ÐÐÏÂ2ÌõÖ¸Áî  
   48 00001768         ;// subs cycles,cycles,#$count  ;//   r8=r8-#$count
   49 00001768 BF5C F819 
              0B01             ldrplb           r0,[m6502_pc],#1 ; //´Ó´æ´¢Æ÷ÖÐ
                                                            ¼ÓÔØ×Ö½Úµ½Ò»¸ö¼Ä´æÆ
                                                            ÷ÖÐ  r0=²Ù×÷Âë
   50 0000176E F85A F020       ldrpl            pc,[m6502_optbl,r0,lsl#2] ;//r1
                                                            0 ********r0=r0x4**
                                                            *ÔËÐÐ´úÂëµÄµØÖ·****
                                                            *******************
                                                            ***************
   51 00001772 F8DA F484       ldr              pc,nexttimeout
  845 00001776         ;-------------------------------------------------------
                       ---------------------
  846 00001776         _CC                                  ;   CPY $nnnn
  847 00001776         ;-------------------------------------------------------
                       ---------------------
  848 00001776                 doABS
  228 00001776 00000004 
                       _type   SETA             _ABS
  229 00001776 F819 CB01       ldrb             addy,[m6502_pc],#1
  230 0000177A F819 0B01       ldrb             r0,[m6502_pc],#1
  231 0000177E EA4C 2C00       orr              addy,addy,r0,lsl#8
  849 00001782                 opCOMP           m6502_y
  389 00001782                 readmem
  108 00001782                 [                _type = _ABS
  109 00001782                 readmemabs
   69 00001782 F40C 4160       and              r1,addy,#0xE000
   70 00001786 F20F 0E0A       adr              lr,%F0
   71 0000178A         ;// ldr pc,[m6502_rmem,r1,lsr#11] ;//in: addy,r1=addy&0x
                       E000 (for rom_R)
   72 0000178A EA4F 21D1       lsr              r1,r1,#11   ;//¸Ä¹ý£¬¼Ó2ÐÐ  >>1
                                                            1
   73 0000178E F854 F001       ldr              pc,[m6502_rmem,r1]
   74 00001792         
   75 00001792         0                                    ;//out: r0=val (bit
                                                            s 8-31=0 (LSR,ROR,I
                                                            NC,DEC,ASL)), addy 
                                                            preserved for RMW i



ARM Macro Assembler    Page 103 


                                                            nstructions
  110 00001792                 ]
  111 00001792                 [                _type = _ZP
  113                          ]
  114 00001792                 [                _type = _ZPI
  116                          ]
  117 00001792                 [                _type = _IMM
  119                          ]
  390 00001792 EBB7 6300       subs             m6502_nz,m6502_y,r0,lsl#24
  391 00001796 EA4F 6323       mov              m6502_nz,m6502_nz,asr#24 ;NZ
  392 0000179A F048 0801       orr              cycles,cycles,#CYC_C ;Prepare C
                                                            
  850 0000179E                 fetch_c          4
   56 0000179E F578 6880       sbcs             cycles,cycles,#4*256 
                                                            ;//CYCLE=256
   57 000017A2 BF5C F819 
              0B01             ldrplb           r0,[m6502_pc],#1
   58 000017A8 F85A F020       ldrpl            pc,[m6502_optbl,r0,lsl#2]
   59 000017AC F8DA F484       ldr              pc,nexttimeout
  851 000017B0         ;-------------------------------------------------------
                       ---------------------
  852 000017B0         _CD                                  ;   CMP $nnnn
  853 000017B0         ;-------------------------------------------------------
                       ---------------------
  854 000017B0                 doABS
  228 000017B0 00000004 
                       _type   SETA             _ABS
  229 000017B0 F819 CB01       ldrb             addy,[m6502_pc],#1
  230 000017B4 F819 0B01       ldrb             r0,[m6502_pc],#1
  231 000017B8 EA4C 2C00       orr              addy,addy,r0,lsl#8
  855 000017BC                 opCOMP           m6502_a
  389 000017BC                 readmem
  108 000017BC                 [                _type = _ABS
  109 000017BC                 readmemabs
   69 000017BC F40C 4160       and              r1,addy,#0xE000
   70 000017C0 F20F 0E08       adr              lr,%F0
   71 000017C4         ;// ldr pc,[m6502_rmem,r1,lsr#11] ;//in: addy,r1=addy&0x
                       E000 (for rom_R)
   72 000017C4 EA4F 21D1       lsr              r1,r1,#11   ;//¸Ä¹ý£¬¼Ó2ÐÐ  >>1
                                                            1
   73 000017C8 F854 F001       ldr              pc,[m6502_rmem,r1]
   74 000017CC         
   75 000017CC         0                                    ;//out: r0=val (bit
                                                            s 8-31=0 (LSR,ROR,I
                                                            NC,DEC,ASL)), addy 
                                                            preserved for RMW i
                                                            nstructions
  110 000017CC                 ]
  111 000017CC                 [                _type = _ZP
  113                          ]
  114 000017CC                 [                _type = _ZPI
  116                          ]
  117 000017CC                 [                _type = _IMM
  119                          ]
  390 000017CC EBB5 6300       subs             m6502_nz,m6502_a,r0,lsl#24
  391 000017D0 EA4F 6323       mov              m6502_nz,m6502_nz,asr#24 ;NZ
  392 000017D4 F048 0801       orr              cycles,cycles,#CYC_C ;Prepare C
                                                            
  856 000017D8                 fetch_c          4



ARM Macro Assembler    Page 104 


   56 000017D8 F578 6880       sbcs             cycles,cycles,#4*256 
                                                            ;//CYCLE=256
   57 000017DC BF5C F819 
              0B01             ldrplb           r0,[m6502_pc],#1
   58 000017E2 F85A F020       ldrpl            pc,[m6502_optbl,r0,lsl#2]
   59 000017E6 F8DA F484       ldr              pc,nexttimeout
  857 000017EA         ;-------------------------------------------------------
                       ---------------------
  858 000017EA         _CE                                  ;   DEC $nnnn
  859 000017EA         ;-------------------------------------------------------
                       ---------------------
  860 000017EA                 doABS
  228 000017EA 00000004 
                       _type   SETA             _ABS
  229 000017EA F819 CB01       ldrb             addy,[m6502_pc],#1
  230 000017EE F819 0B01       ldrb             r0,[m6502_pc],#1
  231 000017F2 EA4C 2C00       orr              addy,addy,r0,lsl#8
  861 000017F6                 opDEC
  397 000017F6                 readmem
  108 000017F6                 [                _type = _ABS
  109 000017F6                 readmemabs
   69 000017F6 F40C 4160       and              r1,addy,#0xE000
   70 000017FA F20F 0E0A       adr              lr,%F0
   71 000017FE         ;// ldr pc,[m6502_rmem,r1,lsr#11] ;//in: addy,r1=addy&0x
                       E000 (for rom_R)
   72 000017FE EA4F 21D1       lsr              r1,r1,#11   ;//¸Ä¹ý£¬¼Ó2ÐÐ  >>1
                                                            1
   73 00001802 F854 F001       ldr              pc,[m6502_rmem,r1]
   74 00001806         
   75 00001806         0                                    ;//out: r0=val (bit
                                                            s 8-31=0 (LSR,ROR,I
                                                            NC,DEC,ASL)), addy 
                                                            preserved for RMW i
                                                            nstructions
  110 00001806                 ]
  111 00001806                 [                _type = _ZP
  113                          ]
  114 00001806                 [                _type = _ZPI
  116                          ]
  117 00001806                 [                _type = _IMM
  119                          ]
  398 00001806 F1A0 0001       sub              r0,r0,#1
  399 0000180A EA40 6300       orr              m6502_nz,r0,r0,lsl#24 ;NZ
  400 0000180E                 writemem
  165 0000180E                 [                _type = _ABS
  166 0000180E                 writememabs
  139 0000180E F40C 4160       and              r1,addy,#0xe000
  140 00001812 F50A 6284       adr              r2,writemem_tbl
  141 00001816 F20F 0E0A       adr              lr,%F0
  142 0000181A         ;// ldr pc,[r2,r1,lsr#11] ;//in: addy,r0=val(bits 8-31=?
                       )
  143 0000181A EA4F 21D1       lsr              r1,r1,#11   ;//¸Ä¹ý£¬¼Ó2ÐÐ >>11
                                                            
  144 0000181E F852 F001       ldr              pc,[r2,r1]
  145 00001822         
  146 00001822         0                                    ;out: r0,r1,r2,addy
                                                            =?
  167 00001822                 ]
  168 00001822                 [                _type = _ZP



ARM Macro Assembler    Page 105 


  170                          ]
  171 00001822                 [                _type = _ZPI
  173                          ]
  862 00001822                 fetch            6
   47 00001822 F5B8 68C0       subs             cycles,cycles,#6*256 ;//CYCLE=2
                                                            56 ;// 3*256 ÕýÊý»ò
                                                            0¾ÍÖ´ÐÐÏÂ2ÌõÖ¸Áî  
   48 00001826         ;// subs cycles,cycles,#$count  ;//   r8=r8-#$count
   49 00001826 BF5C F819 
              0B01             ldrplb           r0,[m6502_pc],#1 ; //´Ó´æ´¢Æ÷ÖÐ
                                                            ¼ÓÔØ×Ö½Úµ½Ò»¸ö¼Ä´æÆ
                                                            ÷ÖÐ  r0=²Ù×÷Âë
   50 0000182C F85A F020       ldrpl            pc,[m6502_optbl,r0,lsl#2] ;//r1
                                                            0 ********r0=r0x4**
                                                            *ÔËÐÐ´úÂëµÄµØÖ·****
                                                            *******************
                                                            ***************
   51 00001830 F8DA F484       ldr              pc,nexttimeout
  863 00001834         ;-------------------------------------------------------
                       ---------------------
  864 00001834         _D0                                  ;   BNE *
  865 00001834         ;-------------------------------------------------------
                       ---------------------
  866 00001834 F013 0FFF       tst              m6502_nz,#0xff
  867 00001838 F919 0B01       ldrsb            r0,[m6502_pc],#1
  868 0000183C BF1C 4481       addne            m6502_pc,m6502_pc,r0
  869 00001840         ; subne cycles,cycles,#3*CYCLE
  870 00001840 F5A8 7880       subne            cycles,cycles,#256
  871 00001844                 fetch            2
   47 00001844 F5B8 7800       subs             cycles,cycles,#2*256 ;//CYCLE=2
                                                            56 ;// 3*256 ÕýÊý»ò
                                                            0¾ÍÖ´ÐÐÏÂ2ÌõÖ¸Áî  
   48 00001848         ;// subs cycles,cycles,#$count  ;//   r8=r8-#$count
   49 00001848 BF5C F819 
              0B01             ldrplb           r0,[m6502_pc],#1 ; //´Ó´æ´¢Æ÷ÖÐ
                                                            ¼ÓÔØ×Ö½Úµ½Ò»¸ö¼Ä´æÆ
                                                            ÷ÖÐ  r0=²Ù×÷Âë
   50 0000184E F85A F020       ldrpl            pc,[m6502_optbl,r0,lsl#2] ;//r1
                                                            0 ********r0=r0x4**
                                                            *ÔËÐÐ´úÂëµÄµØÖ·****
                                                            *******************
                                                            ***************
   51 00001852 F8DA F484       ldr              pc,nexttimeout
  872 00001856         ;-------------------------------------------------------
                       ---------------------
  873 00001856         _D1                                  ;   CMP ($nn),Y
  874 00001856         ;-------------------------------------------------------
                       ---------------------
  875 00001856                 doIIY
  278 00001856 00000004 
                       _type   SETA             _ABS
  279 00001856 F819 0B01       ldrb             r0,[m6502_pc],#1
  280 0000185A         ;// ldrb addy,[r0,cpu_zpage]! ;;ÔÚÊý¾Ý´«ËÍÖ®Ç°,½«Æ«ÒÆÁ¿¼
                       Óµ½Rn ÖÐ,Æä½á¹û×÷Îª´«ËÍÊý¾ÝµÄ´æ´¢µØÖ·
  281 0000185A         ;//ÈôÊ¹ÓÃºó×º"!",Ôò½á¹ûÐ´»Øµ½RnÖÐ
  282 0000185A F810 C00B       ldrb             addy,[r0,cpu_zpage]
  283 0000185E 4458            add              r0,r0,cpu_zpage ;//////////////
                                                            ///////////////////
                                                            /////



ARM Macro Assembler    Page 106 


  284 00001860         
  285 00001860         
  286 00001860 7841            ldrb             r1,[r0,#1]
  287 00001862 EA4C 2C01       orr              addy,addy,r1,lsl#8
  288 00001866 EB0C 6C17       add              addy,addy,m6502_y,lsr#24
  289 0000186A         ; bic addy,addy,#0xff0000 ;Zelda2 needs this
  876 0000186A                 opCOMP           m6502_a
  389 0000186A                 readmem
  108 0000186A                 [                _type = _ABS
  109 0000186A                 readmemabs
   69 0000186A F40C 4160       and              r1,addy,#0xE000
   70 0000186E F20F 0E0A       adr              lr,%F0
   71 00001872         ;// ldr pc,[m6502_rmem,r1,lsr#11] ;//in: addy,r1=addy&0x
                       E000 (for rom_R)
   72 00001872 EA4F 21D1       lsr              r1,r1,#11   ;//¸Ä¹ý£¬¼Ó2ÐÐ  >>1
                                                            1
   73 00001876 F854 F001       ldr              pc,[m6502_rmem,r1]
   74 0000187A         
   75 0000187A         0                                    ;//out: r0=val (bit
                                                            s 8-31=0 (LSR,ROR,I
                                                            NC,DEC,ASL)), addy 
                                                            preserved for RMW i
                                                            nstructions
  110 0000187A                 ]
  111 0000187A                 [                _type = _ZP
  113                          ]
  114 0000187A                 [                _type = _ZPI
  116                          ]
  117 0000187A                 [                _type = _IMM
  119                          ]
  390 0000187A EBB5 6300       subs             m6502_nz,m6502_a,r0,lsl#24
  391 0000187E EA4F 6323       mov              m6502_nz,m6502_nz,asr#24 ;NZ
  392 00001882 F048 0801       orr              cycles,cycles,#CYC_C ;Prepare C
                                                            
  877 00001886                 fetch_c          5
   56 00001886 F578 68A0       sbcs             cycles,cycles,#5*256 
                                                            ;//CYCLE=256
   57 0000188A BF5C F819 
              0B01             ldrplb           r0,[m6502_pc],#1
   58 00001890 F85A F020       ldrpl            pc,[m6502_optbl,r0,lsl#2]
   59 00001894 F8DA F484       ldr              pc,nexttimeout
  878 00001898         ;-------------------------------------------------------
                       ---------------------
  879 00001898         _D5                                  ;   CMP $nn,X
  880 00001898         ;-------------------------------------------------------
                       ---------------------
  881 00001898                 doZIXf
  328 00001898 00000003 
                       _type   SETA             _ZPI
  329 00001898 F819 CB01       ldrb             addy,[m6502_pc],#1
  330 0000189C EB06 6C0C       add              addy,m6502_x,addy,lsl#24
  882 000018A0                 opCOMP           m6502_a
  389 000018A0                 readmem
  108 000018A0                 [                _type = _ABS
  110                          ]
  111 000018A0                 [                _type = _ZP
  113                          ]
  114 000018A0                 [                _type = _ZPI
  115 000018A0                 readmemzpi



ARM Macro Assembler    Page 107 


   85 000018A0         ;// ldrb r0,[cpu_zpage,addy,lsr#24]
   86 000018A0 EA4F 601C       lsr              r0,addy,#24 ;//¸Ä¹ý£¬¼Ó3ÐÐ
   87 000018A4 F81B 0000       ldrb             r0,[cpu_zpage,r0]
   88 000018A8         
  116 000018A8                 ]
  117 000018A8                 [                _type = _IMM
  119                          ]
  390 000018A8 EBB5 6300       subs             m6502_nz,m6502_a,r0,lsl#24
  391 000018AC EA4F 6323       mov              m6502_nz,m6502_nz,asr#24 ;NZ
  392 000018B0 F048 0801       orr              cycles,cycles,#CYC_C ;Prepare C
                                                            
  883 000018B4                 fetch_c          4
   56 000018B4 F578 6880       sbcs             cycles,cycles,#4*256 
                                                            ;//CYCLE=256
   57 000018B8 BF5C F819 
              0B01             ldrplb           r0,[m6502_pc],#1
   58 000018BE F85A F020       ldrpl            pc,[m6502_optbl,r0,lsl#2]
   59 000018C2 F8DA F484       ldr              pc,nexttimeout
  884 000018C6         ;-------------------------------------------------------
                       ---------------------
  885 000018C6         _D6                                  ;   DEC $nn,X
  886 000018C6         ;-------------------------------------------------------
                       ---------------------
  887 000018C6                 doZIXf
  328 000018C6 00000003 
                       _type   SETA             _ZPI
  329 000018C6 F819 CB01       ldrb             addy,[m6502_pc],#1
  330 000018CA EB06 6C0C       add              addy,m6502_x,addy,lsl#24
  888 000018CE                 opDEC
  397 000018CE                 readmem
  108 000018CE                 [                _type = _ABS
  110                          ]
  111 000018CE                 [                _type = _ZP
  113                          ]
  114 000018CE                 [                _type = _ZPI
  115 000018CE                 readmemzpi
   85 000018CE         ;// ldrb r0,[cpu_zpage,addy,lsr#24]
   86 000018CE EA4F 601C       lsr              r0,addy,#24 ;//¸Ä¹ý£¬¼Ó3ÐÐ
   87 000018D2 F81B 0000       ldrb             r0,[cpu_zpage,r0]
   88 000018D6         
  116 000018D6                 ]
  117 000018D6                 [                _type = _IMM
  119                          ]
  398 000018D6 F1A0 0001       sub              r0,r0,#1
  399 000018DA EA40 6300       orr              m6502_nz,r0,r0,lsl#24 ;NZ
  400 000018DE                 writemem
  165 000018DE                 [                _type = _ABS
  167                          ]
  168 000018DE                 [                _type = _ZP
  170                          ]
  171 000018DE                 [                _type = _ZPI
  172 000018DE                 writememzpi
  156 000018DE         ;// strb r0,[cpu_zpage,addy,lsr#24]
  157 000018DE EA4F 611C       lsr              r1,addy,#24 ;//¸Ä¹ý£¬¼Ó2ÐÐ  >>2
                                                            4
  158 000018E2 F80B 0001       strb             r0,[cpu_zpage,r1]
  159 000018E6         
  160 000018E6         
  173 000018E6                 ]



ARM Macro Assembler    Page 108 


  889 000018E6                 fetch            6
   47 000018E6 F5B8 68C0       subs             cycles,cycles,#6*256 ;//CYCLE=2
                                                            56 ;// 3*256 ÕýÊý»ò
                                                            0¾ÍÖ´ÐÐÏÂ2ÌõÖ¸Áî  
   48 000018EA         ;// subs cycles,cycles,#$count  ;//   r8=r8-#$count
   49 000018EA BF5C F819 
              0B01             ldrplb           r0,[m6502_pc],#1 ; //´Ó´æ´¢Æ÷ÖÐ
                                                            ¼ÓÔØ×Ö½Úµ½Ò»¸ö¼Ä´æÆ
                                                            ÷ÖÐ  r0=²Ù×÷Âë
   50 000018F0 F85A F020       ldrpl            pc,[m6502_optbl,r0,lsl#2] ;//r1
                                                            0 ********r0=r0x4**
                                                            *ÔËÐÐ´úÂëµÄµØÖ·****
                                                            *******************
                                                            ***************
   51 000018F4 F8DA F484       ldr              pc,nexttimeout
  890 000018F8         ;-------------------------------------------------------
                       ---------------------
  891 000018F8         _D8                                  ;   CLD
  892 000018F8         ;-------------------------------------------------------
                       ---------------------
  893 000018F8 F028 0808       bic              cycles,cycles,#CYC_D
  894 000018FC                 fetch            2
   47 000018FC F5B8 7800       subs             cycles,cycles,#2*256 ;//CYCLE=2
                                                            56 ;// 3*256 ÕýÊý»ò
                                                            0¾ÍÖ´ÐÐÏÂ2ÌõÖ¸Áî  
   48 00001900         ;// subs cycles,cycles,#$count  ;//   r8=r8-#$count
   49 00001900 BF5C F819 
              0B01             ldrplb           r0,[m6502_pc],#1 ; //´Ó´æ´¢Æ÷ÖÐ
                                                            ¼ÓÔØ×Ö½Úµ½Ò»¸ö¼Ä´æÆ
                                                            ÷ÖÐ  r0=²Ù×÷Âë
   50 00001906 F85A F020       ldrpl            pc,[m6502_optbl,r0,lsl#2] ;//r1
                                                            0 ********r0=r0x4**
                                                            *ÔËÐÐ´úÂëµÄµØÖ·****
                                                            *******************
                                                            ***************
   51 0000190A F8DA F484       ldr              pc,nexttimeout
  895 0000190E         ;-------------------------------------------------------
                       ---------------------
  896 0000190E         _D9                                  ;   CMP $nnnn,Y
  897 0000190E         ;-------------------------------------------------------
                       ---------------------
  898 0000190E                 doAIY
  246 0000190E 00000004 
                       _type   SETA             _ABS
  247 0000190E F819 CB01       ldrb             addy,[m6502_pc],#1
  248 00001912 F819 0B01       ldrb             r0,[m6502_pc],#1
  249 00001916 EA4C 2C00       orr              addy,addy,r0,lsl#8
  250 0000191A EB0C 6C17       add              addy,addy,m6502_y,lsr#24
  251 0000191E         ; bic addy,addy,#0xff0000 ;Tecmo Bowl needs this
  899 0000191E                 opCOMP           m6502_a
  389 0000191E                 readmem
  108 0000191E                 [                _type = _ABS
  109 0000191E                 readmemabs
   69 0000191E F40C 4160       and              r1,addy,#0xE000
   70 00001922 F20F 0E0A       adr              lr,%F0
   71 00001926         ;// ldr pc,[m6502_rmem,r1,lsr#11] ;//in: addy,r1=addy&0x
                       E000 (for rom_R)
   72 00001926 EA4F 21D1       lsr              r1,r1,#11   ;//¸Ä¹ý£¬¼Ó2ÐÐ  >>1
                                                            1



ARM Macro Assembler    Page 109 


   73 0000192A F854 F001       ldr              pc,[m6502_rmem,r1]
   74 0000192E         
   75 0000192E         0                                    ;//out: r0=val (bit
                                                            s 8-31=0 (LSR,ROR,I
                                                            NC,DEC,ASL)), addy 
                                                            preserved for RMW i
                                                            nstructions
  110 0000192E                 ]
  111 0000192E                 [                _type = _ZP
  113                          ]
  114 0000192E                 [                _type = _ZPI
  116                          ]
  117 0000192E                 [                _type = _IMM
  119                          ]
  390 0000192E EBB5 6300       subs             m6502_nz,m6502_a,r0,lsl#24
  391 00001932 EA4F 6323       mov              m6502_nz,m6502_nz,asr#24 ;NZ
  392 00001936 F048 0801       orr              cycles,cycles,#CYC_C ;Prepare C
                                                            
  900 0000193A                 fetch_c          4
   56 0000193A F578 6880       sbcs             cycles,cycles,#4*256 
                                                            ;//CYCLE=256
   57 0000193E BF5C F819 
              0B01             ldrplb           r0,[m6502_pc],#1
   58 00001944 F85A F020       ldrpl            pc,[m6502_optbl,r0,lsl#2]
   59 00001948 F8DA F484       ldr              pc,nexttimeout
  901 0000194C         ;-------------------------------------------------------
                       ---------------------
  902 0000194C         _DD                                  ;   CMP $nnnn,X
  903 0000194C         ;-------------------------------------------------------
                       ---------------------
  904 0000194C                 doAIX
  236 0000194C 00000004 
                       _type   SETA             _ABS
  237 0000194C F819 CB01       ldrb             addy,[m6502_pc],#1
  238 00001950 F819 0B01       ldrb             r0,[m6502_pc],#1
  239 00001954 EA4C 2C00       orr              addy,addy,r0,lsl#8
  240 00001958 EB0C 6C16       add              addy,addy,m6502_x,lsr#24
  241 0000195C         ; bic addy,addy,#0xff0000 ;Base Wars needs this
  905 0000195C                 opCOMP           m6502_a
  389 0000195C                 readmem
  108 0000195C                 [                _type = _ABS
  109 0000195C                 readmemabs
   69 0000195C F40C 4160       and              r1,addy,#0xE000
   70 00001960 F20F 0E08       adr              lr,%F0
   71 00001964         ;// ldr pc,[m6502_rmem,r1,lsr#11] ;//in: addy,r1=addy&0x
                       E000 (for rom_R)
   72 00001964 EA4F 21D1       lsr              r1,r1,#11   ;//¸Ä¹ý£¬¼Ó2ÐÐ  >>1
                                                            1
   73 00001968 F854 F001       ldr              pc,[m6502_rmem,r1]
   74 0000196C         
   75 0000196C         0                                    ;//out: r0=val (bit
                                                            s 8-31=0 (LSR,ROR,I
                                                            NC,DEC,ASL)), addy 
                                                            preserved for RMW i
                                                            nstructions
  110 0000196C                 ]
  111 0000196C                 [                _type = _ZP
  113                          ]
  114 0000196C                 [                _type = _ZPI



ARM Macro Assembler    Page 110 


  116                          ]
  117 0000196C                 [                _type = _IMM
  119                          ]
  390 0000196C EBB5 6300       subs             m6502_nz,m6502_a,r0,lsl#24
  391 00001970 EA4F 6323       mov              m6502_nz,m6502_nz,asr#24 ;NZ
  392 00001974 F048 0801       orr              cycles,cycles,#CYC_C ;Prepare C
                                                            
  906 00001978                 fetch_c          4
   56 00001978 F578 6880       sbcs             cycles,cycles,#4*256 
                                                            ;//CYCLE=256
   57 0000197C BF5C F819 
              0B01             ldrplb           r0,[m6502_pc],#1
   58 00001982 F85A F020       ldrpl            pc,[m6502_optbl,r0,lsl#2]
   59 00001986 F8DA F484       ldr              pc,nexttimeout
  907 0000198A         ;-------------------------------------------------------
                       ---------------------
  908 0000198A         _DE                                  ;   DEC $nnnn,X
  909 0000198A         ;-------------------------------------------------------
                       ---------------------
  910 0000198A                 doAIX
  236 0000198A 00000004 
                       _type   SETA             _ABS
  237 0000198A F819 CB01       ldrb             addy,[m6502_pc],#1
  238 0000198E F819 0B01       ldrb             r0,[m6502_pc],#1
  239 00001992 EA4C 2C00       orr              addy,addy,r0,lsl#8
  240 00001996 EB0C 6C16       add              addy,addy,m6502_x,lsr#24
  241 0000199A         ; bic addy,addy,#0xff0000 ;Base Wars needs this
  911 0000199A                 opDEC
  397 0000199A                 readmem
  108 0000199A                 [                _type = _ABS
  109 0000199A                 readmemabs
   69 0000199A F40C 4160       and              r1,addy,#0xE000
   70 0000199E F20F 0E0A       adr              lr,%F0
   71 000019A2         ;// ldr pc,[m6502_rmem,r1,lsr#11] ;//in: addy,r1=addy&0x
                       E000 (for rom_R)
   72 000019A2 EA4F 21D1       lsr              r1,r1,#11   ;//¸Ä¹ý£¬¼Ó2ÐÐ  >>1
                                                            1
   73 000019A6 F854 F001       ldr              pc,[m6502_rmem,r1]
   74 000019AA         
   75 000019AA         0                                    ;//out: r0=val (bit
                                                            s 8-31=0 (LSR,ROR,I
                                                            NC,DEC,ASL)), addy 
                                                            preserved for RMW i
                                                            nstructions
  110 000019AA                 ]
  111 000019AA                 [                _type = _ZP
  113                          ]
  114 000019AA                 [                _type = _ZPI
  116                          ]
  117 000019AA                 [                _type = _IMM
  119                          ]
  398 000019AA F1A0 0001       sub              r0,r0,#1
  399 000019AE EA40 6300       orr              m6502_nz,r0,r0,lsl#24 ;NZ
  400 000019B2                 writemem
  165 000019B2                 [                _type = _ABS
  166 000019B2                 writememabs
  139 000019B2 F40C 4160       and              r1,addy,#0xe000
  140 000019B6 F50A 6284       adr              r2,writemem_tbl
  141 000019BA F20F 0E0A       adr              lr,%F0



ARM Macro Assembler    Page 111 


  142 000019BE         ;// ldr pc,[r2,r1,lsr#11] ;//in: addy,r0=val(bits 8-31=?
                       )
  143 000019BE EA4F 21D1       lsr              r1,r1,#11   ;//¸Ä¹ý£¬¼Ó2ÐÐ >>11
                                                            
  144 000019C2 F852 F001       ldr              pc,[r2,r1]
  145 000019C6         
  146 000019C6         0                                    ;out: r0,r1,r2,addy
                                                            =?
  167 000019C6                 ]
  168 000019C6                 [                _type = _ZP
  170                          ]
  171 000019C6                 [                _type = _ZPI
  173                          ]
  912 000019C6                 fetch            7
   47 000019C6 F5B8 68E0       subs             cycles,cycles,#7*256 ;//CYCLE=2
                                                            56 ;// 3*256 ÕýÊý»ò
                                                            0¾ÍÖ´ÐÐÏÂ2ÌõÖ¸Áî  
   48 000019CA         ;// subs cycles,cycles,#$count  ;//   r8=r8-#$count
   49 000019CA BF5C F819 
              0B01             ldrplb           r0,[m6502_pc],#1 ; //´Ó´æ´¢Æ÷ÖÐ
                                                            ¼ÓÔØ×Ö½Úµ½Ò»¸ö¼Ä´æÆ
                                                            ÷ÖÐ  r0=²Ù×÷Âë
   50 000019D0 F85A F020       ldrpl            pc,[m6502_optbl,r0,lsl#2] ;//r1
                                                            0 ********r0=r0x4**
                                                            *ÔËÐÐ´úÂëµÄµØÖ·****
                                                            *******************
                                                            ***************
   51 000019D4 F8DA F484       ldr              pc,nexttimeout
  913 000019D8         ;-------------------------------------------------------
                       ---------------------
  914 000019D8         _E0                                  ;   CPX #$nn
  915 000019D8         ;-------------------------------------------------------
                       ---------------------
  916 000019D8                 doIMM
  256 000019D8 00000001 
                       _type   SETA             _IMM
  917 000019D8                 opCOMP           m6502_x
  389 000019D8                 readmem
  108 000019D8                 [                _type = _ABS
  110                          ]
  111 000019D8                 [                _type = _ZP
  113                          ]
  114 000019D8                 [                _type = _ZPI
  116                          ]
  117 000019D8                 [                _type = _IMM
  118 000019D8                 readmemimm
   98 000019D8 F819 0B01       ldrb             r0,[m6502_pc],#1
  119 000019DC                 ]
  390 000019DC EBB6 6300       subs             m6502_nz,m6502_x,r0,lsl#24
  391 000019E0 EA4F 6323       mov              m6502_nz,m6502_nz,asr#24 ;NZ
  392 000019E4 F048 0801       orr              cycles,cycles,#CYC_C ;Prepare C
                                                            
  918 000019E8                 fetch_c          2
   56 000019E8 F578 7800       sbcs             cycles,cycles,#2*256 
                                                            ;//CYCLE=256
   57 000019EC BF5C F819 
              0B01             ldrplb           r0,[m6502_pc],#1
   58 000019F2 F85A F020       ldrpl            pc,[m6502_optbl,r0,lsl#2]
   59 000019F6 F8DA F484       ldr              pc,nexttimeout



ARM Macro Assembler    Page 112 


  919 000019FA         ;-------------------------------------------------------
                       ---------------------
  920 000019FA         _E1                                  ;   SBC ($nn,X)
  921 000019FA         ;-------------------------------------------------------
                       ---------------------
  922 000019FA                 doIIX
  261 000019FA 00000004 
                       _type   SETA             _ABS
  262 000019FA F819 0B01       ldrb             r0,[m6502_pc],#1
  263 000019FE EB06 6000       add              r0,m6502_x,r0,lsl#24
  264 00001A02         ;//ldrb addy,[cpu_zpage,r0,lsr#24] ;//´íÎó:Ö¸¶¨µÄ×ª±ä²»Ô
                       ÊÐí
  265 00001A02 EA4F 6C10       lsr              addy,r0,#24 ;//¸Ä¹ý£¬¼Ó2ÐÐ >>24
                                                            
  266 00001A06 F81B C00C       ldrb             addy,[cpu_zpage,addy]
  267 00001A0A         
  268 00001A0A F100 7080       add              r0,r0,#0x01000000
  269 00001A0E         ;//ldrb r1,[cpu_zpage,r0,lsr#24] ;//R1,LSR#2;½«R1ÖÐµÄÄÚÈ
                       ÝÓÒÒÆ2Î»
  270 00001A0E EA4F 6110       lsr              r1,r0,#24   ;//¸Ä¹ý£¬¼Ó2ÐÐ
  271 00001A12 F81B 1001       ldrb             r1,[cpu_zpage,r1]
  272 00001A16         
  273 00001A16 EA4C 2C01       orr              addy,addy,r1,lsl#8
  923 00001A1A                 opSBC
  483 00001A1A                 readmem
  108 00001A1A                 [                _type = _ABS
  109 00001A1A                 readmemabs
   69 00001A1A F40C 4160       and              r1,addy,#0xE000
   70 00001A1E F20F 0E0A       adr              lr,%F0
   71 00001A22         ;// ldr pc,[m6502_rmem,r1,lsr#11] ;//in: addy,r1=addy&0x
                       E000 (for rom_R)
   72 00001A22 EA4F 21D1       lsr              r1,r1,#11   ;//¸Ä¹ý£¬¼Ó2ÐÐ  >>1
                                                            1
   73 00001A26 F854 F001       ldr              pc,[m6502_rmem,r1]
   74 00001A2A         
   75 00001A2A         0                                    ;//out: r0=val (bit
                                                            s 8-31=0 (LSR,ROR,I
                                                            NC,DEC,ASL)), addy 
                                                            preserved for RMW i
                                                            nstructions
  110 00001A2A                 ]
  111 00001A2A                 [                _type = _ZP
  113                          ]
  114 00001A2A                 [                _type = _ZPI
  116                          ]
  117 00001A2A                 [                _type = _IMM
  119                          ]
  484 00001A2A EA5F 0158       movs             r1,cycles,lsr#1 ;get C
  485 00001A2E EB75 6500       sbcs             m6502_a,m6502_a,r0,lsl#24
  486 00001A32 F005 457F       and              m6502_a,m6502_a,#0xff000000
  487 00001A36 EA4F 6325       mov              m6502_nz,m6502_a,asr#24 ;NZ
  488 00001A3A F048 0841       orr              cycles,cycles,#CYC_C+CYC_V 
                                                            ;Prepare C & V
  489 00001A3E BF78 F028 
              0840             bicvc            cycles,cycles,#CYC_V ;V
  924 00001A44                 fetch_c          6
   56 00001A44 F578 68C0       sbcs             cycles,cycles,#6*256 
                                                            ;//CYCLE=256
   57 00001A48 BF5C F819 



ARM Macro Assembler    Page 113 


              0B01             ldrplb           r0,[m6502_pc],#1
   58 00001A4E F85A F020       ldrpl            pc,[m6502_optbl,r0,lsl#2]
   59 00001A52 F8DA F484       ldr              pc,nexttimeout
  925 00001A56         ;-------------------------------------------------------
                       ---------------------
  926 00001A56         _E4                                  ;   CPX $nn
  927 00001A56         ;-------------------------------------------------------
                       ---------------------
  928 00001A56                 doZ
  308 00001A56 00000002 
                       _type   SETA             _ZP
  309 00001A56 F819 CB01       ldrb             addy,[m6502_pc],#1
  929 00001A5A                 opCOMP           m6502_x
  389 00001A5A                 readmem
  108 00001A5A                 [                _type = _ABS
  110                          ]
  111 00001A5A                 [                _type = _ZP
  112 00001A5A                 readmemzp
   80 00001A5A F81B 000C       ldrb             r0,[cpu_zpage,addy]
  113 00001A5E                 ]
  114 00001A5E                 [                _type = _ZPI
  116                          ]
  117 00001A5E                 [                _type = _IMM
  119                          ]
  390 00001A5E EBB6 6300       subs             m6502_nz,m6502_x,r0,lsl#24
  391 00001A62 EA4F 6323       mov              m6502_nz,m6502_nz,asr#24 ;NZ
  392 00001A66 F048 0801       orr              cycles,cycles,#CYC_C ;Prepare C
                                                            
  930 00001A6A                 fetch_c          3
   56 00001A6A F578 7840       sbcs             cycles,cycles,#3*256 
                                                            ;//CYCLE=256
   57 00001A6E BF5C F819 
              0B01             ldrplb           r0,[m6502_pc],#1
   58 00001A74 F85A F020       ldrpl            pc,[m6502_optbl,r0,lsl#2]
   59 00001A78 F8DA F484       ldr              pc,nexttimeout
  931 00001A7C         ;-------------------------------------------------------
                       ---------------------
  932 00001A7C         _E5                                  ;   SBC $nn
  933 00001A7C         ;-------------------------------------------------------
                       ---------------------
  934 00001A7C                 doZ
  308 00001A7C 00000002 
                       _type   SETA             _ZP
  309 00001A7C F819 CB01       ldrb             addy,[m6502_pc],#1
  935 00001A80                 opSBC
  483 00001A80                 readmem
  108 00001A80                 [                _type = _ABS
  110                          ]
  111 00001A80                 [                _type = _ZP
  112 00001A80                 readmemzp
   80 00001A80 F81B 000C       ldrb             r0,[cpu_zpage,addy]
  113 00001A84                 ]
  114 00001A84                 [                _type = _ZPI
  116                          ]
  117 00001A84                 [                _type = _IMM
  119                          ]
  484 00001A84 EA5F 0158       movs             r1,cycles,lsr#1 ;get C
  485 00001A88 EB75 6500       sbcs             m6502_a,m6502_a,r0,lsl#24
  486 00001A8C F005 457F       and              m6502_a,m6502_a,#0xff000000



ARM Macro Assembler    Page 114 


  487 00001A90 EA4F 6325       mov              m6502_nz,m6502_a,asr#24 ;NZ
  488 00001A94 F048 0841       orr              cycles,cycles,#CYC_C+CYC_V 
                                                            ;Prepare C & V
  489 00001A98 BF78 F028 
              0840             bicvc            cycles,cycles,#CYC_V ;V
  936 00001A9E                 fetch_c          3
   56 00001A9E F578 7840       sbcs             cycles,cycles,#3*256 
                                                            ;//CYCLE=256
   57 00001AA2 BF5C F819 
              0B01             ldrplb           r0,[m6502_pc],#1
   58 00001AA8 F85A F020       ldrpl            pc,[m6502_optbl,r0,lsl#2]
   59 00001AAC F8DA F484       ldr              pc,nexttimeout
  937 00001AB0         ;-------------------------------------------------------
                       ---------------------
  938 00001AB0         _E6                                  ;   INC $nn
  939 00001AB0         ;-------------------------------------------------------
                       ---------------------
  940 00001AB0                 doZ
  308 00001AB0 00000002 
                       _type   SETA             _ZP
  309 00001AB0 F819 CB01       ldrb             addy,[m6502_pc],#1
  941 00001AB4                 opINC
  412 00001AB4                 readmem
  108 00001AB4                 [                _type = _ABS
  110                          ]
  111 00001AB4                 [                _type = _ZP
  112 00001AB4                 readmemzp
   80 00001AB4 F81B 000C       ldrb             r0,[cpu_zpage,addy]
  113 00001AB8                 ]
  114 00001AB8                 [                _type = _ZPI
  116                          ]
  117 00001AB8                 [                _type = _IMM
  119                          ]
  413 00001AB8 F100 0001       add              r0,r0,#1
  414 00001ABC EA40 6300       orr              m6502_nz,r0,r0,lsl#24 ;NZ
  415 00001AC0                 writemem
  165 00001AC0                 [                _type = _ABS
  167                          ]
  168 00001AC0                 [                _type = _ZP
  169 00001AC0                 writememzp
  151 00001AC0 F80B 000C       strb             r0,[cpu_zpage,addy]
  170 00001AC4                 ]
  171 00001AC4                 [                _type = _ZPI
  173                          ]
  942 00001AC4                 fetch            5
   47 00001AC4 F5B8 68A0       subs             cycles,cycles,#5*256 ;//CYCLE=2
                                                            56 ;// 3*256 ÕýÊý»ò
                                                            0¾ÍÖ´ÐÐÏÂ2ÌõÖ¸Áî  
   48 00001AC8         ;// subs cycles,cycles,#$count  ;//   r8=r8-#$count
   49 00001AC8 BF5C F819 
              0B01             ldrplb           r0,[m6502_pc],#1 ; //´Ó´æ´¢Æ÷ÖÐ
                                                            ¼ÓÔØ×Ö½Úµ½Ò»¸ö¼Ä´æÆ
                                                            ÷ÖÐ  r0=²Ù×÷Âë
   50 00001ACE F85A F020       ldrpl            pc,[m6502_optbl,r0,lsl#2] ;//r1
                                                            0 ********r0=r0x4**
                                                            *ÔËÐÐ´úÂëµÄµØÖ·****
                                                            *******************
                                                            ***************
   51 00001AD2 F8DA F484       ldr              pc,nexttimeout



ARM Macro Assembler    Page 115 


  943 00001AD6         ;-------------------------------------------------------
                       ---------------------
  944 00001AD6         _E8                                  ;   INX
  945 00001AD6         ;-------------------------------------------------------
                       ---------------------
  946 00001AD6 F106 7680       add              m6502_x,m6502_x,#0x01000000
  947 00001ADA EA4F 6326       mov              m6502_nz,m6502_x,asr#24
  948 00001ADE                 fetch            2
   47 00001ADE F5B8 7800       subs             cycles,cycles,#2*256 ;//CYCLE=2
                                                            56 ;// 3*256 ÕýÊý»ò
                                                            0¾ÍÖ´ÐÐÏÂ2ÌõÖ¸Áî  
   48 00001AE2         ;// subs cycles,cycles,#$count  ;//   r8=r8-#$count
   49 00001AE2 BF5C F819 
              0B01             ldrplb           r0,[m6502_pc],#1 ; //´Ó´æ´¢Æ÷ÖÐ
                                                            ¼ÓÔØ×Ö½Úµ½Ò»¸ö¼Ä´æÆ
                                                            ÷ÖÐ  r0=²Ù×÷Âë
   50 00001AE8 F85A F020       ldrpl            pc,[m6502_optbl,r0,lsl#2] ;//r1
                                                            0 ********r0=r0x4**
                                                            *ÔËÐÐ´úÂëµÄµØÖ·****
                                                            *******************
                                                            ***************
   51 00001AEC F8DA F484       ldr              pc,nexttimeout
  949 00001AF0         ;-------------------------------------------------------
                       ---------------------
  950 00001AF0         _E9                                  ;   SBC #$nn
  951 00001AF0         ;-------------------------------------------------------
                       ---------------------
  952 00001AF0                 doIMM
  256 00001AF0 00000001 
                       _type   SETA             _IMM
  953 00001AF0                 opSBC
  483 00001AF0                 readmem
  108 00001AF0                 [                _type = _ABS
  110                          ]
  111 00001AF0                 [                _type = _ZP
  113                          ]
  114 00001AF0                 [                _type = _ZPI
  116                          ]
  117 00001AF0                 [                _type = _IMM
  118 00001AF0                 readmemimm
   98 00001AF0 F819 0B01       ldrb             r0,[m6502_pc],#1
  119 00001AF4                 ]
  484 00001AF4 EA5F 0158       movs             r1,cycles,lsr#1 ;get C
  485 00001AF8 EB75 6500       sbcs             m6502_a,m6502_a,r0,lsl#24
  486 00001AFC F005 457F       and              m6502_a,m6502_a,#0xff000000
  487 00001B00 EA4F 6325       mov              m6502_nz,m6502_a,asr#24 ;NZ
  488 00001B04 F048 0841       orr              cycles,cycles,#CYC_C+CYC_V 
                                                            ;Prepare C & V
  489 00001B08 BF78 F028 
              0840             bicvc            cycles,cycles,#CYC_V ;V
  954 00001B0E                 fetch_c          2
   56 00001B0E F578 7800       sbcs             cycles,cycles,#2*256 
                                                            ;//CYCLE=256
   57 00001B12 BF5C F819 
              0B01             ldrplb           r0,[m6502_pc],#1
   58 00001B18 F85A F020       ldrpl            pc,[m6502_optbl,r0,lsl#2]
   59 00001B1C F8DA F484       ldr              pc,nexttimeout
  955 00001B20         ;-------------------------------------------------------
                       ---------------------



ARM Macro Assembler    Page 116 


  956 00001B20         _EA                                  ;   NOP
  957 00001B20         ;-------------------------------------------------------
                       ---------------------
  958 00001B20                 fetch            2
   47 00001B20 F5B8 7800       subs             cycles,cycles,#2*256 ;//CYCLE=2
                                                            56 ;// 3*256 ÕýÊý»ò
                                                            0¾ÍÖ´ÐÐÏÂ2ÌõÖ¸Áî  
   48 00001B24         ;// subs cycles,cycles,#$count  ;//   r8=r8-#$count
   49 00001B24 BF5C F819 
              0B01             ldrplb           r0,[m6502_pc],#1 ; //´Ó´æ´¢Æ÷ÖÐ
                                                            ¼ÓÔØ×Ö½Úµ½Ò»¸ö¼Ä´æÆ
                                                            ÷ÖÐ  r0=²Ù×÷Âë
   50 00001B2A F85A F020       ldrpl            pc,[m6502_optbl,r0,lsl#2] ;//r1
                                                            0 ********r0=r0x4**
                                                            *ÔËÐÐ´úÂëµÄµØÖ·****
                                                            *******************
                                                            ***************
   51 00001B2E F8DA F484       ldr              pc,nexttimeout
  959 00001B32         ;-------------------------------------------------------
                       ---------------------
  960 00001B32         _EC                                  ;   CPX $nnnn
  961 00001B32         ;-------------------------------------------------------
                       ---------------------
  962 00001B32                 doABS
  228 00001B32 00000004 
                       _type   SETA             _ABS
  229 00001B32 F819 CB01       ldrb             addy,[m6502_pc],#1
  230 00001B36 F819 0B01       ldrb             r0,[m6502_pc],#1
  231 00001B3A EA4C 2C00       orr              addy,addy,r0,lsl#8
  963 00001B3E                 opCOMP           m6502_x
  389 00001B3E                 readmem
  108 00001B3E                 [                _type = _ABS
  109 00001B3E                 readmemabs
   69 00001B3E F40C 4160       and              r1,addy,#0xE000
   70 00001B42 F20F 0E0A       adr              lr,%F0
   71 00001B46         ;// ldr pc,[m6502_rmem,r1,lsr#11] ;//in: addy,r1=addy&0x
                       E000 (for rom_R)
   72 00001B46 EA4F 21D1       lsr              r1,r1,#11   ;//¸Ä¹ý£¬¼Ó2ÐÐ  >>1
                                                            1
   73 00001B4A F854 F001       ldr              pc,[m6502_rmem,r1]
   74 00001B4E         
   75 00001B4E         0                                    ;//out: r0=val (bit
                                                            s 8-31=0 (LSR,ROR,I
                                                            NC,DEC,ASL)), addy 
                                                            preserved for RMW i
                                                            nstructions
  110 00001B4E                 ]
  111 00001B4E                 [                _type = _ZP
  113                          ]
  114 00001B4E                 [                _type = _ZPI
  116                          ]
  117 00001B4E                 [                _type = _IMM
  119                          ]
  390 00001B4E EBB6 6300       subs             m6502_nz,m6502_x,r0,lsl#24
  391 00001B52 EA4F 6323       mov              m6502_nz,m6502_nz,asr#24 ;NZ
  392 00001B56 F048 0801       orr              cycles,cycles,#CYC_C ;Prepare C
                                                            
  964 00001B5A                 fetch_c          4
   56 00001B5A F578 6880       sbcs             cycles,cycles,#4*256 



ARM Macro Assembler    Page 117 


                                                            ;//CYCLE=256
   57 00001B5E BF5C F819 
              0B01             ldrplb           r0,[m6502_pc],#1
   58 00001B64 F85A F020       ldrpl            pc,[m6502_optbl,r0,lsl#2]
   59 00001B68 F8DA F484       ldr              pc,nexttimeout
  965 00001B6C         ;-------------------------------------------------------
                       ---------------------
  966 00001B6C         _ED                                  ;   SBC $nnnn
  967 00001B6C         ;-------------------------------------------------------
                       ---------------------
  968 00001B6C                 doABS
  228 00001B6C 00000004 
                       _type   SETA             _ABS
  229 00001B6C F819 CB01       ldrb             addy,[m6502_pc],#1
  230 00001B70 F819 0B01       ldrb             r0,[m6502_pc],#1
  231 00001B74 EA4C 2C00       orr              addy,addy,r0,lsl#8
  969 00001B78                 opSBC
  483 00001B78                 readmem
  108 00001B78                 [                _type = _ABS
  109 00001B78                 readmemabs
   69 00001B78 F40C 4160       and              r1,addy,#0xE000
   70 00001B7C F20F 0E08       adr              lr,%F0
   71 00001B80         ;// ldr pc,[m6502_rmem,r1,lsr#11] ;//in: addy,r1=addy&0x
                       E000 (for rom_R)
   72 00001B80 EA4F 21D1       lsr              r1,r1,#11   ;//¸Ä¹ý£¬¼Ó2ÐÐ  >>1
                                                            1
   73 00001B84 F854 F001       ldr              pc,[m6502_rmem,r1]
   74 00001B88         
   75 00001B88         0                                    ;//out: r0=val (bit
                                                            s 8-31=0 (LSR,ROR,I
                                                            NC,DEC,ASL)), addy 
                                                            preserved for RMW i
                                                            nstructions
  110 00001B88                 ]
  111 00001B88                 [                _type = _ZP
  113                          ]
  114 00001B88                 [                _type = _ZPI
  116                          ]
  117 00001B88                 [                _type = _IMM
  119                          ]
  484 00001B88 EA5F 0158       movs             r1,cycles,lsr#1 ;get C
  485 00001B8C EB75 6500       sbcs             m6502_a,m6502_a,r0,lsl#24
  486 00001B90 F005 457F       and              m6502_a,m6502_a,#0xff000000
  487 00001B94 EA4F 6325       mov              m6502_nz,m6502_a,asr#24 ;NZ
  488 00001B98 F048 0841       orr              cycles,cycles,#CYC_C+CYC_V 
                                                            ;Prepare C & V
  489 00001B9C BF78 F028 
              0840             bicvc            cycles,cycles,#CYC_V ;V
  970 00001BA2                 fetch_c          4
   56 00001BA2 F578 6880       sbcs             cycles,cycles,#4*256 
                                                            ;//CYCLE=256
   57 00001BA6 BF5C F819 
              0B01             ldrplb           r0,[m6502_pc],#1
   58 00001BAC F85A F020       ldrpl            pc,[m6502_optbl,r0,lsl#2]
   59 00001BB0 F8DA F484       ldr              pc,nexttimeout
  971 00001BB4         ;-------------------------------------------------------
                       ---------------------
  972 00001BB4         _EE                                  ;   INC $nnnn
  973 00001BB4         ;-------------------------------------------------------



ARM Macro Assembler    Page 118 


                       ---------------------
  974 00001BB4                 doABS
  228 00001BB4 00000004 
                       _type   SETA             _ABS
  229 00001BB4 F819 CB01       ldrb             addy,[m6502_pc],#1
  230 00001BB8 F819 0B01       ldrb             r0,[m6502_pc],#1
  231 00001BBC EA4C 2C00       orr              addy,addy,r0,lsl#8
  975 00001BC0                 opINC
  412 00001BC0                 readmem
  108 00001BC0                 [                _type = _ABS
  109 00001BC0                 readmemabs
   69 00001BC0 F40C 4160       and              r1,addy,#0xE000
   70 00001BC4 F20F 0E08       adr              lr,%F0
   71 00001BC8         ;// ldr pc,[m6502_rmem,r1,lsr#11] ;//in: addy,r1=addy&0x
                       E000 (for rom_R)
   72 00001BC8 EA4F 21D1       lsr              r1,r1,#11   ;//¸Ä¹ý£¬¼Ó2ÐÐ  >>1
                                                            1
   73 00001BCC F854 F001       ldr              pc,[m6502_rmem,r1]
   74 00001BD0         
   75 00001BD0         0                                    ;//out: r0=val (bit
                                                            s 8-31=0 (LSR,ROR,I
                                                            NC,DEC,ASL)), addy 
                                                            preserved for RMW i
                                                            nstructions
  110 00001BD0                 ]
  111 00001BD0                 [                _type = _ZP
  113                          ]
  114 00001BD0                 [                _type = _ZPI
  116                          ]
  117 00001BD0                 [                _type = _IMM
  119                          ]
  413 00001BD0 F100 0001       add              r0,r0,#1
  414 00001BD4 EA40 6300       orr              m6502_nz,r0,r0,lsl#24 ;NZ
  415 00001BD8                 writemem
  165 00001BD8                 [                _type = _ABS
  166 00001BD8                 writememabs
  139 00001BD8 F40C 4160       and              r1,addy,#0xe000
  140 00001BDC F50A 6284       adr              r2,writemem_tbl
  141 00001BE0 F20F 0E08       adr              lr,%F0
  142 00001BE4         ;// ldr pc,[r2,r1,lsr#11] ;//in: addy,r0=val(bits 8-31=?
                       )
  143 00001BE4 EA4F 21D1       lsr              r1,r1,#11   ;//¸Ä¹ý£¬¼Ó2ÐÐ >>11
                                                            
  144 00001BE8 F852 F001       ldr              pc,[r2,r1]
  145 00001BEC         
  146 00001BEC         0                                    ;out: r0,r1,r2,addy
                                                            =?
  167 00001BEC                 ]
  168 00001BEC                 [                _type = _ZP
  170                          ]
  171 00001BEC                 [                _type = _ZPI
  173                          ]
  976 00001BEC                 fetch            6
   47 00001BEC F5B8 68C0       subs             cycles,cycles,#6*256 ;//CYCLE=2
                                                            56 ;// 3*256 ÕýÊý»ò
                                                            0¾ÍÖ´ÐÐÏÂ2ÌõÖ¸Áî  
   48 00001BF0         ;// subs cycles,cycles,#$count  ;//   r8=r8-#$count
   49 00001BF0 BF5C F819 
              0B01             ldrplb           r0,[m6502_pc],#1 ; //´Ó´æ´¢Æ÷ÖÐ



ARM Macro Assembler    Page 119 


                                                            ¼ÓÔØ×Ö½Úµ½Ò»¸ö¼Ä´æÆ
                                                            ÷ÖÐ  r0=²Ù×÷Âë
   50 00001BF6 F85A F020       ldrpl            pc,[m6502_optbl,r0,lsl#2] ;//r1
                                                            0 ********r0=r0x4**
                                                            *ÔËÐÐ´úÂëµÄµØÖ·****
                                                            *******************
                                                            ***************
   51 00001BFA F8DA F484       ldr              pc,nexttimeout
  977 00001BFE         ;-------------------------------------------------------
                       ---------------------
  978 00001BFE         _F0                                  ;   BEQ *
  979 00001BFE         ;-------------------------------------------------------
                       ---------------------
  980 00001BFE F013 0FFF       tst              m6502_nz,#0xff
  981 00001C02 F919 0B01       ldrsb            r0,[m6502_pc],#1
  982 00001C06 BF04 4481       addeq            m6502_pc,m6502_pc,r0
  983 00001C0A         ; subeq cycles,cycles,#3*CYCLE
  984 00001C0A F5A8 7880       subeq            cycles,cycles,#256
  985 00001C0E                 fetch            2
   47 00001C0E F5B8 7800       subs             cycles,cycles,#2*256 ;//CYCLE=2
                                                            56 ;// 3*256 ÕýÊý»ò
                                                            0¾ÍÖ´ÐÐÏÂ2ÌõÖ¸Áî  
   48 00001C12         ;// subs cycles,cycles,#$count  ;//   r8=r8-#$count
   49 00001C12 BF5C F819 
              0B01             ldrplb           r0,[m6502_pc],#1 ; //´Ó´æ´¢Æ÷ÖÐ
                                                            ¼ÓÔØ×Ö½Úµ½Ò»¸ö¼Ä´æÆ
                                                            ÷ÖÐ  r0=²Ù×÷Âë
   50 00001C18 F85A F020       ldrpl            pc,[m6502_optbl,r0,lsl#2] ;//r1
                                                            0 ********r0=r0x4**
                                                            *ÔËÐÐ´úÂëµÄµØÖ·****
                                                            *******************
                                                            ***************
   51 00001C1C F8DA F484       ldr              pc,nexttimeout
  986 00001C20         ;-------------------------------------------------------
                       ---------------------
  987 00001C20         _F1                                  ;   SBC ($nn),Y
  988 00001C20         ;-------------------------------------------------------
                       ---------------------
  989 00001C20                 doIIY
  278 00001C20 00000004 
                       _type   SETA             _ABS
  279 00001C20 F819 0B01       ldrb             r0,[m6502_pc],#1
  280 00001C24         ;// ldrb addy,[r0,cpu_zpage]! ;;ÔÚÊý¾Ý´«ËÍÖ®Ç°,½«Æ«ÒÆÁ¿¼
                       Óµ½Rn ÖÐ,Æä½á¹û×÷Îª´«ËÍÊý¾ÝµÄ´æ´¢µØÖ·
  281 00001C24         ;//ÈôÊ¹ÓÃºó×º"!",Ôò½á¹ûÐ´»Øµ½RnÖÐ
  282 00001C24 F810 C00B       ldrb             addy,[r0,cpu_zpage]
  283 00001C28 4458            add              r0,r0,cpu_zpage ;//////////////
                                                            ///////////////////
                                                            /////
  284 00001C2A         
  285 00001C2A         
  286 00001C2A 7841            ldrb             r1,[r0,#1]
  287 00001C2C EA4C 2C01       orr              addy,addy,r1,lsl#8
  288 00001C30 EB0C 6C17       add              addy,addy,m6502_y,lsr#24
  289 00001C34         ; bic addy,addy,#0xff0000 ;Zelda2 needs this
  990 00001C34                 opSBC
  483 00001C34                 readmem
  108 00001C34                 [                _type = _ABS
  109 00001C34                 readmemabs



ARM Macro Assembler    Page 120 


   69 00001C34 F40C 4160       and              r1,addy,#0xE000
   70 00001C38 F20F 0E08       adr              lr,%F0
   71 00001C3C         ;// ldr pc,[m6502_rmem,r1,lsr#11] ;//in: addy,r1=addy&0x
                       E000 (for rom_R)
   72 00001C3C EA4F 21D1       lsr              r1,r1,#11   ;//¸Ä¹ý£¬¼Ó2ÐÐ  >>1
                                                            1
   73 00001C40 F854 F001       ldr              pc,[m6502_rmem,r1]
   74 00001C44         
   75 00001C44         0                                    ;//out: r0=val (bit
                                                            s 8-31=0 (LSR,ROR,I
                                                            NC,DEC,ASL)), addy 
                                                            preserved for RMW i
                                                            nstructions
  110 00001C44                 ]
  111 00001C44                 [                _type = _ZP
  113                          ]
  114 00001C44                 [                _type = _ZPI
  116                          ]
  117 00001C44                 [                _type = _IMM
  119                          ]
  484 00001C44 EA5F 0158       movs             r1,cycles,lsr#1 ;get C
  485 00001C48 EB75 6500       sbcs             m6502_a,m6502_a,r0,lsl#24
  486 00001C4C F005 457F       and              m6502_a,m6502_a,#0xff000000
  487 00001C50 EA4F 6325       mov              m6502_nz,m6502_a,asr#24 ;NZ
  488 00001C54 F048 0841       orr              cycles,cycles,#CYC_C+CYC_V 
                                                            ;Prepare C & V
  489 00001C58 BF78 F028 
              0840             bicvc            cycles,cycles,#CYC_V ;V
  991 00001C5E                 fetch_c          5
   56 00001C5E F578 68A0       sbcs             cycles,cycles,#5*256 
                                                            ;//CYCLE=256
   57 00001C62 BF5C F819 
              0B01             ldrplb           r0,[m6502_pc],#1
   58 00001C68 F85A F020       ldrpl            pc,[m6502_optbl,r0,lsl#2]
   59 00001C6C F8DA F484       ldr              pc,nexttimeout
  992 00001C70         ;-------------------------------------------------------
                       ---------------------
  993 00001C70         _F5                                  ;   SBC $nn,X
  994 00001C70         ;-------------------------------------------------------
                       ---------------------
  995 00001C70                 doZIXf
  328 00001C70 00000003 
                       _type   SETA             _ZPI
  329 00001C70 F819 CB01       ldrb             addy,[m6502_pc],#1
  330 00001C74 EB06 6C0C       add              addy,m6502_x,addy,lsl#24
  996 00001C78                 opSBC
  483 00001C78                 readmem
  108 00001C78                 [                _type = _ABS
  110                          ]
  111 00001C78                 [                _type = _ZP
  113                          ]
  114 00001C78                 [                _type = _ZPI
  115 00001C78                 readmemzpi
   85 00001C78         ;// ldrb r0,[cpu_zpage,addy,lsr#24]
   86 00001C78 EA4F 601C       lsr              r0,addy,#24 ;//¸Ä¹ý£¬¼Ó3ÐÐ
   87 00001C7C F81B 0000       ldrb             r0,[cpu_zpage,r0]
   88 00001C80         
  116 00001C80                 ]
  117 00001C80                 [                _type = _IMM



ARM Macro Assembler    Page 121 


  119                          ]
  484 00001C80 EA5F 0158       movs             r1,cycles,lsr#1 ;get C
  485 00001C84 EB75 6500       sbcs             m6502_a,m6502_a,r0,lsl#24
  486 00001C88 F005 457F       and              m6502_a,m6502_a,#0xff000000
  487 00001C8C EA4F 6325       mov              m6502_nz,m6502_a,asr#24 ;NZ
  488 00001C90 F048 0841       orr              cycles,cycles,#CYC_C+CYC_V 
                                                            ;Prepare C & V
  489 00001C94 BF78 F028 
              0840             bicvc            cycles,cycles,#CYC_V ;V
  997 00001C9A                 fetch_c          4
   56 00001C9A F578 6880       sbcs             cycles,cycles,#4*256 
                                                            ;//CYCLE=256
   57 00001C9E BF5C F819 
              0B01             ldrplb           r0,[m6502_pc],#1
   58 00001CA4 F85A F020       ldrpl            pc,[m6502_optbl,r0,lsl#2]
   59 00001CA8 F8DA F484       ldr              pc,nexttimeout
  998 00001CAC         ;-------------------------------------------------------
                       ---------------------
  999 00001CAC         _F6                                  ;   INC $nn,X
 1000 00001CAC         ;-------------------------------------------------------
                       ---------------------
 1001 00001CAC                 doZIXf
  328 00001CAC 00000003 
                       _type   SETA             _ZPI
  329 00001CAC F819 CB01       ldrb             addy,[m6502_pc],#1
  330 00001CB0 EB06 6C0C       add              addy,m6502_x,addy,lsl#24
 1002 00001CB4                 opINC
  412 00001CB4                 readmem
  108 00001CB4                 [                _type = _ABS
  110                          ]
  111 00001CB4                 [                _type = _ZP
  113                          ]
  114 00001CB4                 [                _type = _ZPI
  115 00001CB4                 readmemzpi
   85 00001CB4         ;// ldrb r0,[cpu_zpage,addy,lsr#24]
   86 00001CB4 EA4F 601C       lsr              r0,addy,#24 ;//¸Ä¹ý£¬¼Ó3ÐÐ
   87 00001CB8 F81B 0000       ldrb             r0,[cpu_zpage,r0]
   88 00001CBC         
  116 00001CBC                 ]
  117 00001CBC                 [                _type = _IMM
  119                          ]
  413 00001CBC F100 0001       add              r0,r0,#1
  414 00001CC0 EA40 6300       orr              m6502_nz,r0,r0,lsl#24 ;NZ
  415 00001CC4                 writemem
  165 00001CC4                 [                _type = _ABS
  167                          ]
  168 00001CC4                 [                _type = _ZP
  170                          ]
  171 00001CC4                 [                _type = _ZPI
  172 00001CC4                 writememzpi
  156 00001CC4         ;// strb r0,[cpu_zpage,addy,lsr#24]
  157 00001CC4 EA4F 611C       lsr              r1,addy,#24 ;//¸Ä¹ý£¬¼Ó2ÐÐ  >>2
                                                            4
  158 00001CC8 F80B 0001       strb             r0,[cpu_zpage,r1]
  159 00001CCC         
  160 00001CCC         
  173 00001CCC                 ]
 1003 00001CCC                 fetch            6
   47 00001CCC F5B8 68C0       subs             cycles,cycles,#6*256 ;//CYCLE=2



ARM Macro Assembler    Page 122 


                                                            56 ;// 3*256 ÕýÊý»ò
                                                            0¾ÍÖ´ÐÐÏÂ2ÌõÖ¸Áî  
   48 00001CD0         ;// subs cycles,cycles,#$count  ;//   r8=r8-#$count
   49 00001CD0 BF5C F819 
              0B01             ldrplb           r0,[m6502_pc],#1 ; //´Ó´æ´¢Æ÷ÖÐ
                                                            ¼ÓÔØ×Ö½Úµ½Ò»¸ö¼Ä´æÆ
                                                            ÷ÖÐ  r0=²Ù×÷Âë
   50 00001CD6 F85A F020       ldrpl            pc,[m6502_optbl,r0,lsl#2] ;//r1
                                                            0 ********r0=r0x4**
                                                            *ÔËÐÐ´úÂëµÄµØÖ·****
                                                            *******************
                                                            ***************
   51 00001CDA F8DA F484       ldr              pc,nexttimeout
 1004 00001CDE         ;-------------------------------------------------------
                       ---------------------
 1005 00001CDE         _F8                                  ;   SED
 1006 00001CDE         ;-------------------------------------------------------
                       ---------------------
 1007 00001CDE F048 0808       orr              cycles,cycles,#CYC_D
 1008 00001CE2                 fetch            2
   47 00001CE2 F5B8 7800       subs             cycles,cycles,#2*256 ;//CYCLE=2
                                                            56 ;// 3*256 ÕýÊý»ò
                                                            0¾ÍÖ´ÐÐÏÂ2ÌõÖ¸Áî  
   48 00001CE6         ;// subs cycles,cycles,#$count  ;//   r8=r8-#$count
   49 00001CE6 BF5C F819 
              0B01             ldrplb           r0,[m6502_pc],#1 ; //´Ó´æ´¢Æ÷ÖÐ
                                                            ¼ÓÔØ×Ö½Úµ½Ò»¸ö¼Ä´æÆ
                                                            ÷ÖÐ  r0=²Ù×÷Âë
   50 00001CEC F85A F020       ldrpl            pc,[m6502_optbl,r0,lsl#2] ;//r1
                                                            0 ********r0=r0x4**
                                                            *ÔËÐÐ´úÂëµÄµØÖ·****
                                                            *******************
                                                            ***************
   51 00001CF0 F8DA F484       ldr              pc,nexttimeout
 1009 00001CF4         ;-------------------------------------------------------
                       ---------------------
 1010 00001CF4         _F9                                  ;   SBC $nnnn,Y
 1011 00001CF4         ;-------------------------------------------------------
                       ---------------------
 1012 00001CF4                 doAIY
  246 00001CF4 00000004 
                       _type   SETA             _ABS
  247 00001CF4 F819 CB01       ldrb             addy,[m6502_pc],#1
  248 00001CF8 F819 0B01       ldrb             r0,[m6502_pc],#1
  249 00001CFC EA4C 2C00       orr              addy,addy,r0,lsl#8
  250 00001D00 EB0C 6C17       add              addy,addy,m6502_y,lsr#24
  251 00001D04         ; bic addy,addy,#0xff0000 ;Tecmo Bowl needs this
 1013 00001D04                 opSBC
  483 00001D04                 readmem
  108 00001D04                 [                _type = _ABS
  109 00001D04                 readmemabs
   69 00001D04 F40C 4160       and              r1,addy,#0xE000
   70 00001D08 F20F 0E08       adr              lr,%F0
   71 00001D0C         ;// ldr pc,[m6502_rmem,r1,lsr#11] ;//in: addy,r1=addy&0x
                       E000 (for rom_R)
   72 00001D0C EA4F 21D1       lsr              r1,r1,#11   ;//¸Ä¹ý£¬¼Ó2ÐÐ  >>1
                                                            1
   73 00001D10 F854 F001       ldr              pc,[m6502_rmem,r1]
   74 00001D14         



ARM Macro Assembler    Page 123 


   75 00001D14         0                                    ;//out: r0=val (bit
                                                            s 8-31=0 (LSR,ROR,I
                                                            NC,DEC,ASL)), addy 
                                                            preserved for RMW i
                                                            nstructions
  110 00001D14                 ]
  111 00001D14                 [                _type = _ZP
  113                          ]
  114 00001D14                 [                _type = _ZPI
  116                          ]
  117 00001D14                 [                _type = _IMM
  119                          ]
  484 00001D14 EA5F 0158       movs             r1,cycles,lsr#1 ;get C
  485 00001D18 EB75 6500       sbcs             m6502_a,m6502_a,r0,lsl#24
  486 00001D1C F005 457F       and              m6502_a,m6502_a,#0xff000000
  487 00001D20 EA4F 6325       mov              m6502_nz,m6502_a,asr#24 ;NZ
  488 00001D24 F048 0841       orr              cycles,cycles,#CYC_C+CYC_V 
                                                            ;Prepare C & V
  489 00001D28 BF78 F028 
              0840             bicvc            cycles,cycles,#CYC_V ;V
 1014 00001D2E                 fetch_c          4
   56 00001D2E F578 6880       sbcs             cycles,cycles,#4*256 
                                                            ;//CYCLE=256
   57 00001D32 BF5C F819 
              0B01             ldrplb           r0,[m6502_pc],#1
   58 00001D38 F85A F020       ldrpl            pc,[m6502_optbl,r0,lsl#2]
   59 00001D3C F8DA F484       ldr              pc,nexttimeout
 1015 00001D40         ;-------------------------------------------------------
                       ---------------------
 1016 00001D40         _FD                                  ;   SBC $nnnn,X
 1017 00001D40         ;-------------------------------------------------------
                       ---------------------
 1018 00001D40                 doAIX
  236 00001D40 00000004 
                       _type   SETA             _ABS
  237 00001D40 F819 CB01       ldrb             addy,[m6502_pc],#1
  238 00001D44 F819 0B01       ldrb             r0,[m6502_pc],#1
  239 00001D48 EA4C 2C00       orr              addy,addy,r0,lsl#8
  240 00001D4C EB0C 6C16       add              addy,addy,m6502_x,lsr#24
  241 00001D50         ; bic addy,addy,#0xff0000 ;Base Wars needs this
 1019 00001D50                 opSBC
  483 00001D50                 readmem
  108 00001D50                 [                _type = _ABS
  109 00001D50                 readmemabs
   69 00001D50 F40C 4160       and              r1,addy,#0xE000
   70 00001D54 F20F 0E08       adr              lr,%F0
   71 00001D58         ;// ldr pc,[m6502_rmem,r1,lsr#11] ;//in: addy,r1=addy&0x
                       E000 (for rom_R)
   72 00001D58 EA4F 21D1       lsr              r1,r1,#11   ;//¸Ä¹ý£¬¼Ó2ÐÐ  >>1
                                                            1
   73 00001D5C F854 F001       ldr              pc,[m6502_rmem,r1]
   74 00001D60         
   75 00001D60         0                                    ;//out: r0=val (bit
                                                            s 8-31=0 (LSR,ROR,I
                                                            NC,DEC,ASL)), addy 
                                                            preserved for RMW i
                                                            nstructions
  110 00001D60                 ]
  111 00001D60                 [                _type = _ZP



ARM Macro Assembler    Page 124 


  113                          ]
  114 00001D60                 [                _type = _ZPI
  116                          ]
  117 00001D60                 [                _type = _IMM
  119                          ]
  484 00001D60 EA5F 0158       movs             r1,cycles,lsr#1 ;get C
  485 00001D64 EB75 6500       sbcs             m6502_a,m6502_a,r0,lsl#24
  486 00001D68 F005 457F       and              m6502_a,m6502_a,#0xff000000
  487 00001D6C EA4F 6325       mov              m6502_nz,m6502_a,asr#24 ;NZ
  488 00001D70 F048 0841       orr              cycles,cycles,#CYC_C+CYC_V 
                                                            ;Prepare C & V
  489 00001D74 BF78 F028 
              0840             bicvc            cycles,cycles,#CYC_V ;V
 1020 00001D7A                 fetch_c          4
   56 00001D7A F578 6880       sbcs             cycles,cycles,#4*256 
                                                            ;//CYCLE=256
   57 00001D7E BF5C F819 
              0B01             ldrplb           r0,[m6502_pc],#1
   58 00001D84 F85A F020       ldrpl            pc,[m6502_optbl,r0,lsl#2]
   59 00001D88 F8DA F484       ldr              pc,nexttimeout
 1021 00001D8C         ;-------------------------------------------------------
                       ---------------------
 1022 00001D8C         _FE                                  ;   INC $nnnn,X
 1023 00001D8C         ;-------------------------------------------------------
                       ---------------------
 1024 00001D8C                 doAIX
  236 00001D8C 00000004 
                       _type   SETA             _ABS
  237 00001D8C F819 CB01       ldrb             addy,[m6502_pc],#1
  238 00001D90 F819 0B01       ldrb             r0,[m6502_pc],#1
  239 00001D94 EA4C 2C00       orr              addy,addy,r0,lsl#8
  240 00001D98 EB0C 6C16       add              addy,addy,m6502_x,lsr#24
  241 00001D9C         ; bic addy,addy,#0xff0000 ;Base Wars needs this
 1025 00001D9C                 opINC
  412 00001D9C                 readmem
  108 00001D9C                 [                _type = _ABS
  109 00001D9C                 readmemabs
   69 00001D9C F40C 4160       and              r1,addy,#0xE000
   70 00001DA0 F20F 0E08       adr              lr,%F0
   71 00001DA4         ;// ldr pc,[m6502_rmem,r1,lsr#11] ;//in: addy,r1=addy&0x
                       E000 (for rom_R)
   72 00001DA4 EA4F 21D1       lsr              r1,r1,#11   ;//¸Ä¹ý£¬¼Ó2ÐÐ  >>1
                                                            1
   73 00001DA8 F854 F001       ldr              pc,[m6502_rmem,r1]
   74 00001DAC         
   75 00001DAC         0                                    ;//out: r0=val (bit
                                                            s 8-31=0 (LSR,ROR,I
                                                            NC,DEC,ASL)), addy 
                                                            preserved for RMW i
                                                            nstructions
  110 00001DAC                 ]
  111 00001DAC                 [                _type = _ZP
  113                          ]
  114 00001DAC                 [                _type = _ZPI
  116                          ]
  117 00001DAC                 [                _type = _IMM
  119                          ]
  413 00001DAC F100 0001       add              r0,r0,#1
  414 00001DB0 EA40 6300       orr              m6502_nz,r0,r0,lsl#24 ;NZ



ARM Macro Assembler    Page 125 


  415 00001DB4                 writemem
  165 00001DB4                 [                _type = _ABS
  166 00001DB4                 writememabs
  139 00001DB4 F40C 4160       and              r1,addy,#0xe000
  140 00001DB8 F50A 6284       adr              r2,writemem_tbl
  141 00001DBC F20F 0E08       adr              lr,%F0
  142 00001DC0         ;// ldr pc,[r2,r1,lsr#11] ;//in: addy,r0=val(bits 8-31=?
                       )
  143 00001DC0 EA4F 21D1       lsr              r1,r1,#11   ;//¸Ä¹ý£¬¼Ó2ÐÐ >>11
                                                            
  144 00001DC4 F852 F001       ldr              pc,[r2,r1]
  145 00001DC8         
  146 00001DC8         0                                    ;out: r0,r1,r2,addy
                                                            =?
  167 00001DC8                 ]
  168 00001DC8                 [                _type = _ZP
  170                          ]
  171 00001DC8                 [                _type = _ZPI
  173                          ]
 1026 00001DC8                 fetch            7
   47 00001DC8 F5B8 68E0       subs             cycles,cycles,#7*256 ;//CYCLE=2
                                                            56 ;// 3*256 ÕýÊý»ò
                                                            0¾ÍÖ´ÐÐÏÂ2ÌõÖ¸Áî  
   48 00001DCC         ;// subs cycles,cycles,#$count  ;//   r8=r8-#$count
   49 00001DCC BF5C F819 
              0B01             ldrplb           r0,[m6502_pc],#1 ; //´Ó´æ´¢Æ÷ÖÐ
                                                            ¼ÓÔØ×Ö½Úµ½Ò»¸ö¼Ä´æÆ
                                                            ÷ÖÐ  r0=²Ù×÷Âë
   50 00001DD2 F85A F020       ldrpl            pc,[m6502_optbl,r0,lsl#2] ;//r1
                                                            0 ********r0=r0x4**
                                                            *ÔËÐÐ´úÂëµÄµØÖ·****
                                                            *******************
                                                            ***************
   51 00001DD6 F8DA F484       ldr              pc,nexttimeout
 1027 00001DDA         ;-------------------------------------------------------
                       ---------------------
 1028 00001DDA         
 1029 00001DDA                 AREA             cpu_run, CODE, READONLY
 1030 00000000         run     PROC                         ;r0=ÒªÔËÐÐµÄcpuÖÜÆÚ
                                                            *256
 1031 00000000         ;-------------------------------------------------------
                       ---------------------
 1032 00000000         
 1033 00000000 E92D 4FF0       stmfd            sp!,{r4-r11,lr} ;½«Õâ¼¸¸ö¼Ä´æÆ÷
                                                            ÖÐµÄÖµ±£´æµ½¶ÑÕ»ÖÐ
 1034 00000004         
 1035 00000004 F8DF A14C       ldr              globalptr,=op_table ;r10   wram
                                                            _globals:´úÂëÌø×ª±í
                                                              ¶ÁÈ¡´úÂëÌø×ª±íµØÖ
                                                            ·
 1036 00000008 F8DF B14C       ldr              cpu_zpage,=NES_RAM ;r11
 1037 0000000C         
 1038 0000000C         ;****************************** ²âÊÔÓÃµÄ 
 1039 0000000C         ; ldr r0,=prg_rombank0
 1040 0000000C         ; ldr r0,[r0]
 1041 0000000C         ; ldr r1,=prg_rombank1
 1042 0000000C         ; ldr r1,[r1]
 1043 0000000C         ; ldr r2,memmap_tbl+16
 1044 0000000C         ; ldr r3,memmap_tbl+20



ARM Macro Assembler    Page 126 


 1045 0000000C         ; ldr r4,memmap_tbl+24
 1046 0000000C         ; ldr r5,memmap_tbl+28
 1047 0000000C         ;***********************************
 1048 0000000C         
 1049 0000000C F50A 618C       adr              r1,cpuregs
 1050 00000010 E891 03F8       ldmia            r1,{m6502_nz-m6502_pc} ;restore
                                                             6502 state»Ö¸´6502
                                                            ×´Ì¬  r3-r9
 1051 00000014 4480            add              cycles,cycles,r0
 1052 00000016                 fetch            0           ;//ÌáÈ¡²Ù×÷Âë²¢ÔËÐÐ
                                                            
   47 00000016 F1B8 0800       subs             cycles,cycles,#0*256 ;//CYCLE=2
                                                            56 ;// 3*256 ÕýÊý»ò
                                                            0¾ÍÖ´ÐÐÏÂ2ÌõÖ¸Áî  
   48 0000001A         ;// subs cycles,cycles,#$count  ;//   r8=r8-#$count
   49 0000001A BF5C F819 
              0B01             ldrplb           r0,[m6502_pc],#1 ; //´Ó´æ´¢Æ÷ÖÐ
                                                            ¼ÓÔØ×Ö½Úµ½Ò»¸ö¼Ä´æÆ
                                                            ÷ÖÐ  r0=²Ù×÷Âë
   50 00000020 F85A F020       ldrpl            pc,[m6502_optbl,r0,lsl#2] ;//r1
                                                            0 ********r0=r0x4**
                                                            *ÔËÐÐ´úÂëµÄµØÖ·****
                                                            *******************
                                                            ***************
   51 00000024 F8DA F484       ldr              pc,nexttimeout
 1053 00000028         
 1054 00000028         exit_run
 1055 00000028 F50A 608C       adr              r0,cpuregs
 1056 0000002C E880 03F8       stmia            r0,{m6502_nz-m6502_pc} ;±£´æ650
                                                            2×´Ì¬   r3-r9
 1057 00000030         
 1058 00000030 E8BD 8FF0       ldmfd            sp!,{r4-r11,pc} ;exit 
 1059 00000034         ; bx lr      
 1060 00000034                 ENDP
 1061 00000034         
 1062 00000034         ;*******************************************************
                       ********************************
 1063 00000034         line242NMI
                               PROC                         ;------------------
                                                            ---------
 1064 00000034 E92D 4FF0       stmfd            sp!,{r4-r11,lr}
 1065 00000038 F8DF A118       ldr              globalptr,=op_table
 1066 0000003C F8DF B118       ldr              cpu_zpage,=NES_RAM ;r11
 1067 00000040         
 1068 00000040 F50A 608C       adr              r0,cpuregs
 1069 00000044 E890 03F8       ldmia            r0,{m6502_nz-m6502_pc} ;restore
                                                             6502 state»Ö¸´6502
                                                            ×´Ì¬
 1070 00000048         
 1071 00000048 F64F 7CFA       ldr              r12,=NMI_VECTOR ;NMI?  addy
 1072 0000004C F000 F821       bl               Vec6502
 1073 00000050 F5A8 68E0       sub              cycles,cycles,#7*256 ;CYCLE=256
                                                              6502µÄÖÐ¶ÏÇ±·üÆÚÎ
                                                            ªÆß (7) ¸öÖÜ
 1074 00000054         ; ÆÚ; ÕâÒ²¾ÍÊÇËµÐèÒªÐèÒªÆß (7) ¸öÖÜÆÚÀ´ÒÆÈëºÍÒÆ³öÒ»¸öÖÐ¶
                       Ï.
 1075 00000054         
 1076 00000054 F50A 608C       adr              r0,cpuregs
 1077 00000058 E880 03F8       stmia            r0,{m6502_nz-m6502_pc} 



ARM Macro Assembler    Page 127 


                                                            ;±£´æ6502×´Ì¬
 1078 0000005C         
 1079 0000005C E8BD 8FF0       ldmfd            sp!,{r4-r11,pc} ;
 1080 00000060         ; bx lr      ;return 
 1081 00000060                 ENDP
 1082 00000060         ;-------------------------------------------------------
                       ---------------------
 1083 00000060         
 1084 00000060         default_scanlinehook
 1085 00000060                 fetch            0
   47 00000060 F1B8 0800       subs             cycles,cycles,#0*256 ;//CYCLE=2
                                                            56 ;// 3*256 ÕýÊý»ò
                                                            0¾ÍÖ´ÐÐÏÂ2ÌõÖ¸Áî  
   48 00000064         ;// subs cycles,cycles,#$count  ;//   r8=r8-#$count
   49 00000064 BF5C F819 
              0B01             ldrplb           r0,[m6502_pc],#1 ; //´Ó´æ´¢Æ÷ÖÐ
                                                            ¼ÓÔØ×Ö½Úµ½Ò»¸ö¼Ä´æÆ
                                                            ÷ÖÐ  r0=²Ù×÷Âë
   50 0000006A F85A F020       ldrpl            pc,[m6502_optbl,r0,lsl#2] ;//r1
                                                            0 ********r0=r0x4**
                                                            *ÔËÐÐ´úÂëµÄµØÖ·****
                                                            *******************
                                                            ***************
   51 0000006E F8DA F484       ldr              pc,nexttimeout
 1086 00000072         ;-------------------------------------------------------
                       ---
 1087 00000072         CheckI                               ;Check Interrupt Di
                                                            sable ¼ì²éÖÐ¶Ï½ûÓÃ
 1088 00000072         ;-------------------------------------------------------
                       ---
 1089 00000072 F018 0F04       tst              cycles,#CYC_I
 1090 00000076 D1F3            bne              default_scanlinehook ;we dont w
                                                            ant no stinkin irqs
                                                             ÎÒÃÇ²»Ï£ÍûÃ»ÓÐ·¢³ô
                                                            µÄIRQ
 1091 00000078         ;-------------------------------------------------------
                       ---
 1092 00000078         irq6502
 1093 00000078         ;-------------------------------------------------------
                       ---
 1094 00000078 F64F 7CFE       ldr              r12,=IRQ_VECTOR
 1095 0000007C F000 F809       bl               Vec6502
 1096 00000080                 fetch            7
   47 00000080 F5B8 68E0       subs             cycles,cycles,#7*256 ;//CYCLE=2
                                                            56 ;// 3*256 ÕýÊý»ò
                                                            0¾ÍÖ´ÐÐÏÂ2ÌõÖ¸Áî  
   48 00000084         ;// subs cycles,cycles,#$count  ;//   r8=r8-#$count
   49 00000084 BF5C F819 
              0B01             ldrplb           r0,[m6502_pc],#1 ; //´Ó´æ´¢Æ÷ÖÐ
                                                            ¼ÓÔØ×Ö½Úµ½Ò»¸ö¼Ä´æÆ
                                                            ÷ÖÐ  r0=²Ù×÷Âë
   50 0000008A F85A F020       ldrpl            pc,[m6502_optbl,r0,lsl#2] ;//r1
                                                            0 ********r0=r0x4**
                                                            *ÔËÐÐ´úÂëµÄµØÖ·****
                                                            *******************
                                                            ***************
   51 0000008E F8DA F484       ldr              pc,nexttimeout
 1097 00000092         ;-------------------------------------------------------
                       ---



ARM Macro Assembler    Page 128 


 1098 00000092         Vec6502
 1099 00000092         ;-------------------------------------------------------
                       ---
 1100 00000092 F8DA 0480       ldr              r0,lastbank
 1101 00000096 EBA9 0000       sub              r0,m6502_pc,r0
 1102 0000009A                 push16                       ;save PC
  179 0000009A EA4F 2110       mov              r1,r0,lsr#8
  180 0000009E F8DA 247C       ldr              r2,m6502_s
  181 000000A2 F802 1901       strb             r1,[r2],#-1
  182 000000A6 F442 7280       orr              r2,r2,#0x100
  183 000000AA F802 0901       strb             r0,[r2],#-1
  184 000000AE F88A 247C       strb             r2,m6502_s
 1103 000000B2         
 1104 000000B2                 encodeP          (R)         ;save P
   28 000000B2 F008 004D       and              r0,cycles,#CYC_V+CYC_D+CYC_I+CY
C_C
   29 000000B6 F013 4F00       tst              m6502_nz,#0x80000000 ;//PSR_N
   30 000000BA BF18 F040 
              0080             orrne            r0,r0,#N    ;N
   31 000000C0 F013 0FFF       tst              m6502_nz,#0xff
   32 000000C4 BF08 F040 
              0002             orreq            r0,r0,#Z    ;Z
   33 000000CA F040 0020       orr              r0,r0,#(R)  ;R(&B)
 1105 000000CE         VecCont
 1106 000000CE                 push8            r0
  189 000000CE F8DA 247C       ldr              r2,m6502_s
  190 000000D2 F802 0901       strb             r0,[r2],#-1
  191 000000D6 F88A 247C       strb             r2,m6502_s
 1107 000000DA         
 1108 000000DA F048 0804       orr              cycles,cycles,#CYC_I ;disable I
                                                            RQ ½ûÓÃIRQ
 1109 000000DE         
 1110 000000DE F8DA 045C       ldr              r0,memmap_tbl+7*4 ;7*4
 1111 000000E2         ; ldrb m6502_pc,[r0,r12]!
 1112 000000E2 F810 900C       ldrb             m6502_pc,[r0,r12] ;ÔÚÊý¾Ý´«ËÍÖ®
                                                            Ç°,½«Æ«ÒÆÁ¿¼Óµ½Rn Ö
                                                            Ð,Æä½á¹û×÷Îª´«ËÍÊý¾
                                                            ÝµÄ´æ´¢µØÖ·
 1113 000000E6         ;ÈôÊ¹ÓÃºó×º"!",Ôò½á¹ûÐ´»Øµ½RnÖÐ
 1114 000000E6 4460            add              r0,r0,r12   ;R12=0xfffc ;// ¸´Î
                                                            »ÖÐ¶ÏÏòÁ¿µØÖ·
 1115 000000E8         
 1116 000000E8 7842            ldrb             r2,[r0,#1]
 1117 000000EA EA49 2902       orr              m6502_pc,m6502_pc,r2,lsl#8
 1118 000000EE                 encodePC                     ;get IRQ vectorµÃµ½
                                                            6502 PC ROMµÄÆ«ÒÆÁ¿
                                                            
   15 000000EE F409 4160       and              r1,m6502_pc,#0xE000 ;//r9ºÍ0xe0
                                                            00°´Î»ÓëÔËËã
   16 000000F2 F50A 6288       adr              r2,memmap_tbl ;//°Ñ´æ´¢Æ÷Ó³ÏóµØ
                                                            Ö·¼ÓÔØµ½r2
   17 000000F6         ;// ldr r0,[r2,r1,lsr#11]    ;//¸Ä¹ý£¬¼Ó2ÐÐ 
   18 000000F6 EA4F 20D1       lsr              r0,r1,#11   ;//>>11Î»   r1/2048
                                                            
   19 000000FA 5810            ldr              r0,[r2,r0]  ;//¶ÁÈ¡r2µØÖ·+r1Æ«Ò
                                                            ÆµÄÊý¾Ýµ½r0
   20 000000FC         
   21 000000FC         
   22 000000FC F8CA 0480       str              r0,lastbank ;//±£´æ6502PC´Ó ROM



ARM Macro Assembler    Page 129 


                                                            µÄ×îºóÆ«ÒÆÁ¿ 
   23 00000100 4481            add              m6502_pc,m6502_pc,r0 
                                                            ;//m6502_pc+r0
 1119 00000102         
 1120 00000102 4770            bx               lr          ; º¯Êý·µ»Ø
 1121 00000104 BF00            nop
 1122 00000106         ;-------------------------------------------------------
                       ---------------------
 1123 00000106         _xx                                  ; ???     ;invalid 
                                                            opcode ÎÞÐ§µÄ²Ù×÷Âë
                                                            
 1124 00000106         ;-------------------------------------------------------
                       ---------------------
 1125 00000106         ; [ DEBUG
 1126 00000106         ;  adr r0,_xx
 1127 00000106         ;  mov r1,#0
 1128 00000106         ;  b _xx
 1129 00000106         ; ]
 1130 00000106                 fetch            2
   47 00000106 F5B8 7800       subs             cycles,cycles,#2*256 ;//CYCLE=2
                                                            56 ;// 3*256 ÕýÊý»ò
                                                            0¾ÍÖ´ÐÐÏÂ2ÌõÖ¸Áî  
   48 0000010A         ;// subs cycles,cycles,#$count  ;//   r8=r8-#$count
   49 0000010A BF5C F819 
              0B01             ldrplb           r0,[m6502_pc],#1 ; //´Ó´æ´¢Æ÷ÖÐ
                                                            ¼ÓÔØ×Ö½Úµ½Ò»¸ö¼Ä´æÆ
                                                            ÷ÖÐ  r0=²Ù×÷Âë
   50 00000110 F85A F020       ldrpl            pc,[m6502_optbl,r0,lsl#2] ;//r1
                                                            0 ********r0=r0x4**
                                                            *ÔËÐÐ´úÂëµÄµØÖ·****
                                                            *******************
                                                            ***************
   51 00000114 F8DA F484       ldr              pc,nexttimeout
 1131 00000118         ;-------------------------------------------------------
                       ---------------------
 1132 00000118         
 1133 00000118         ;-------------------------------------------------------
                       ---------------------
 1134 00000118         CPU_reset
                               PROC                         ;called by loadcart
                                                             (r0-r9 are free to
                                                             use)
 1135 00000118         ;-------------------------------------------------------
                       ---------------------
 1136 00000118 F84D ED04       str              lr,[sp,#-4]!
 1137 0000011C F04F 0500       mov              m6502_a,#0
 1138 00000120 F04F 0600       mov              m6502_x,#0
 1139 00000124 F04F 0700       mov              m6502_y,#0
 1140 00000128 F04F 0300       mov              m6502_nz,#0
 1141 0000012C F50A 6480       adr              m6502_rmem,readmem_tbl ;°Ñreadm
                                                            em_tblµÄµØÖ·¼ÓÔØµ½m
                                                            6502_rmem
 1142 00000130 480B            ldr              r0,=NES_RAM+0x100 ;256
 1143 00000132 F8CA 047C       str              r0,m6502_s  ;S=0xFD (0x100-3)  
                                                             °ÑÒ»¸ö¼Ä´æÆ÷°´×Ö´æ
                                                            ´¢µ½´æ´¢Æ÷ÖÐ
 1144 00000136 F04F 0800       mov              cycles,#0   ;D=0, C=0, V=0, I=1
                                                             disable IRQ.
 1145 0000013A         



ARM Macro Assembler    Page 130 


 1146 0000013A F64F 7CFC       ldr              r12,=RES_VECTOR ;// ¸´Î»ÖÐ¶ÏÏòÁ
                                                            ¿µØÖ·
 1147 0000013E F7FF FFA8       bl               Vec6502
 1148 00000142         
 1149 00000142 F50A 608C       adr              r0,cpuregs  ;¶ÁÈ¡µØÖ·
 1150 00000146 E880 03F8       stmia            r0,{m6502_nz-m6502_pc} 
                                                            ;±£´æ6502×´Ì¬
 1151 0000014A         
 1152 0000014A 4906            ldr              r1,=exit_run ;
 1153 0000014C F8CA 1484       str              r1,nexttimeout ;±£´æÖ¸ÁîÖ´ÐÐÍêº
                                                            óÏÂÒ»²½µÄPCµØÖ·
 1154 00000150         
 1155 00000150 F85D FB04       ldr              pc,[sp],#4
 1156 00000154                 ENDP
 1157 00000154         ; nop
 1158 00000154         ;-------------------------------------------------------
                       ------------------
 1159 00000154         
 1160 00000154 00000000 
              00000000 
              00000000 
              00000100 
              00000000         AREA             rwram_code, CODE, READONLY ;REA
                                                            DWRITE*************
                                                            *******************
                                                            ******
 1161 00000000         ;-------------------------------------------------------
                       ---------------------
 1162 00000000         ;memory
 1163 00000000         ;-------------------------------------------------------
                       -----------------
 1164 00000000         empty_R                              ;¶ÁµØÖ·²»ÕýÈ·read b
                                                            ad address (error)
 1165 00000000         ;-------------------------------------------------------
                       ---------------------
 1166 00000000         ; [ DEBUG
 1167 00000000         ;  mov r0,r12
 1168 00000000         ;  mov r1,#0
 1169 00000000 E7FE            b                empty_R
 1170 00000002         ; ]
 1171 00000002         void                                 ;- - - - - - - - -¿
                                                            Õº¯Êý
 1172 00000002         ; mov r0,#0 ;VS excitebike likes this
 1173 00000002 F04E 0E01       orr              lr,#0x01    ;lr×îµÍÎ»ÖÃ1·ÀÖ¹½øÈ
                                                            ëarm×´Ì¬
 1174 00000006 4770            bx               lr
 1175 00000008         
 1176 00000008         
 1177 00000008         ;-------------------------------------------------------
                       ---------------------
 1178 00000008         ram_R                                ;ram read ($0000-$1
                                                            FFF)
 1179 00000008         ;-------------------------------------------------------
                       ---------------------
 1180 00000008 F42C 3CFC       bic              addy,addy,#0x1f800 
                                                            ;only 0x07FF is RAM
                                                            
 1181 0000000C F81B 000C       ldrb             r0,[cpu_zpage,addy]
 1182 00000010 F04E 0E01       orr              lr,#0x01    ;lr×îµÍÎ»ÖÃ1·ÀÖ¹½øÈ



ARM Macro Assembler    Page 131 


                                                            ëarm×´Ì¬
 1183 00000014 4770            bx               lr
 1184 00000016         ;-------------------------------------------------------
                       ---------------------
 1185 00000016         ram_W                                ;ram write ($0000-$
                                                            1FFF)
 1186 00000016         ;-------------------------------------------------------
                       ---------------------
 1187 00000016 F42C 3CFC       bic              addy,addy,#0x1f800 
                                                            ;only 0x07FF is RAM
                                                            
 1188 0000001A F80B 000C       strb             r0,[cpu_zpage,addy] ; cpu_zpage
                                                             RN r11 ;=CPU_RAM
 1189 0000001E F04E 0E01       orr              lr,#0x01    ;lr×îµÍÎ»ÖÃ1·ÀÖ¹½øÈ
                                                            ëarm×´Ì¬
 1190 00000022 4770            bx               lr
 1191 00000024         ;-------------------------------------------------------
                       ---------------------
 1192 00000024         
 1193 00000024         ;-------------------------------------------------------
                       ---------------------
 1194 00000024         rom_R60                              ;rom read ($6000-$7
                                                            FFF)
 1195 00000024         ;-------------------------------------------------------
                       ---------------------
 1196 00000024 F8DA 144C       ldr              r1,memmap_tbl+12
 1197 00000028 F811 000C       ldrb             r0,[r1,addy]
 1198 0000002C F04E 0E01       orr              lr,#0x01    ;lr×îµÍÎ»ÖÃ1·ÀÖ¹½øÈ
                                                            ëarm×´Ì¬
 1199 00000030 4770            bx               lr
 1200 00000032         ;-------------------------------------------------------
                       ---------------------
 1201 00000032         rom_R80                              ;rom read ($8000-$9
                                                            FFF)
 1202 00000032         ;-------------------------------------------------------
                       ---------------------
 1203 00000032 F8DA 1450       ldr              r1,memmap_tbl+16
 1204 00000036 F811 000C       ldrb             r0,[r1,addy]
 1205 0000003A F04E 0E01       orr              lr,#0x01    ;lr×îµÍÎ»ÖÃ1·ÀÖ¹½øÈ
                                                            ëarm×´Ì¬
 1206 0000003E 4770            bx               lr
 1207 00000040         ;-------------------------------------------------------
                       ---------------------
 1208 00000040         rom_RA0                              ;rom read ($A000-$B
                                                            FFF)
 1209 00000040         ;-------------------------------------------------------
                       ---------------------
 1210 00000040 F8DA 1454       ldr              r1,memmap_tbl+20
 1211 00000044 F811 000C       ldrb             r0,[r1,addy]
 1212 00000048 F04E 0E01       orr              lr,#0x01    ;lr×îµÍÎ»ÖÃ1·ÀÖ¹½øÈ
                                                            ëarm×´Ì¬
 1213 0000004C 4770            bx               lr
 1214 0000004E         ;-------------------------------------------------------
                       ---------------------
 1215 0000004E         rom_RC0                              ;rom read ($C000-$D
                                                            FFF)
 1216 0000004E         ;-------------------------------------------------------
                       ---------------------
 1217 0000004E F8DA 1458       ldr              r1,memmap_tbl+24



ARM Macro Assembler    Page 132 


 1218 00000052 F811 000C       ldrb             r0,[r1,addy]
 1219 00000056 F04E 0E01       orr              lr,#0x01    ;lr×îµÍÎ»ÖÃ1·ÀÖ¹½øÈ
                                                            ëarm×´Ì¬
 1220 0000005A 4770            bx               lr
 1221 0000005C         ;-------------------------------------------------------
                       ---------------------
 1222 0000005C         rom_RE0                              ;rom read ($E000-$F
                                                            FFF)
 1223 0000005C         ;-------------------------------------------------------
                       ---------------------
 1224 0000005C F8DA 145C       ldr              r1,memmap_tbl+28
 1225 00000060 F811 000C       ldrb             r0,[r1,addy]
 1226 00000064 F04E 0E01       orr              lr,#0x01    ;lr×îµÍÎ»ÖÃ1·ÀÖ¹½øÈ
                                                            ëarm×´Ì¬
 1227 00000068 4770            bx               lr
 1228 0000006A         ;-------------------------------------------------------
                       ---------------------
 1229 0000006A         ;filler_ ;r0=0data r1=NES_RAMdestÄ¿µÄ r2=2560word count×
                       ÖÊýÍ³¼Æ    ÌîÁÏ
 1230 0000006A         ; exit with r0 unchanged    ÍË³öR0²»±ä
 1231 0000006A         ;-------------------------------------------------------
                       ---------------------
 1232 0000006A         ; subs r2,r2,#1    ;-1
 1233 0000006A         ; ldr r0,[r3,r2,lsl#2]
 1234 0000006A         ; str r0,[r1,r2,lsl#2]  ;<<2
 1235 0000006A         ; bne filler_
 1236 0000006A         ; orr lr,#0x01  ;lr×îµÍÎ»ÖÃ1·ÀÖ¹½øÈëarm×´Ì¬
 1237 0000006A         ; bx lr
 1238 0000006A BF00            nop
 1239 0000006C         ;-------------------------------------------------------
                       ---------------------
 1240 0000006C         ;IO
 1241 0000006C                 AREA             io_code, CODE, READONLY ;--
 1242 00000000         ;-------------------------------------------------------
                       ---------------------
 1243 00000000         
 1244 00000000         ;-------------------------------------------------------
                       ---------------------
 1245 00000000         IO_R                                 ;I/O read
 1246 00000000         ;-------------------------------------------------------
                       ---------------------
 1247 00000000 F5AC 4280       sub              r2,r12,#0x4000 ;addy=r12
 1248 00000004 3A15            subs             r2,r2,#0x15
 1249 00000006         
 1250 00000006         ; orr lr,#0x01  ;lr×îµÍÎ»ÖÃ1·ÀÖ¹½øÈëarm×´Ì¬
 1251 00000006         ; bx lr     ;ÔÝÊ±²»¶Á£¬Ö±½Ó·µ»Ø
 1252 00000006         
 1253 00000006 F53F AFFE       bmi              empty_R     ;¶ÁµØÖ·²»ÕýÈ·
 1254 0000000A 2A03            cmp              r2,#3
 1255 0000000C         ; ldrmi pc,[pc,r2,lsl#2]
 1256 0000000C 494C            ldr              r1,=io_read_tbl ;//¸Ä¹ý£¬¼Ó3ÐÐ
 1257 0000000E EB01 0182       add              r1,r1,r2,lsl#2 ;<<2
 1258 00000012 BF48 F8D1 
              F000             ldrmi            pc,[r1]     ;//Ö±½Ó²Ù×÷pcÌ«ËûÂè
                                                            Î£ÏÕÁË
 1259 00000018 F7FF BFFE       b                empty_R     ;¶ÁµØÖ·²»ÕýÈ·
 1260 0000001C         ; nop
 1261 0000001C         
 1262 0000001C         io_read_tbl



ARM Macro Assembler    Page 133 


 1263 0000001C 00000000        DCD              void        ;_4015r ;4015 (soun
                                                            d)
 1264 00000020 00000000        DCD              joy0_R      ;4016: controller 1
                                                            
 1265 00000024 00000000        DCD              void        ;joy1_R ;4017: cont
                                                            roller 2
 1266 00000028         ;-------------------------------------------------------
                       ---------------------
 1267 00000028         IO_W                                 ;I/O write
 1268 00000028         ;-------------------------------------------------------
                       ---------------------
 1269 00000028 F5AC 4280       sub              r2,r12,#0x4000 ;addy=r12
 1270 0000002C 2A18            cmp              r2,#0x18
 1271 0000002E         
 1272 0000002E         ; ldrmi pc,[pc,r2,lsl#2]
 1273 0000002E 4945            ldr              r1,=io_write_tbl ;//¸Ä¹ý£¬¼Ó3ÐÐ
                                                            
 1274 00000030 EB01 0182       add              r1,r1,r2,lsl#2 ;<<2
 1275 00000034         ; ldrmi pc,[r1]   ;//Ö±½Ó²Ù×÷pcÌ«ËûÂèÎ£ÏÕÁË
 1276 00000034 F8D1 F000       ldr              pc,[r1]
 1277 00000038         ; b empty_R
 1278 00000038         ;   nop
 1279 00000038         io_write_tbl
 1280 00000038 00000000        DCD              void        ;_4000w
 1281 0000003C 00000000        DCD              void        ;_4001w
 1282 00000040 00000000        DCD              void        ;_4002w
 1283 00000044 00000000        DCD              void        ;_4003w
 1284 00000048 00000000        DCD              void        ;_4004w
 1285 0000004C 00000000        DCD              void        ;_4005w
 1286 00000050 00000000        DCD              void        ;_4006w
 1287 00000054 00000000        DCD              void        ;_4007w
 1288 00000058 00000000        DCD              void        ;_4008w
 1289 0000005C 00000000        DCD              void        ;
 1290 00000060 00000000        DCD              void        ;_400aw
 1291 00000064 00000000        DCD              void        ;_400bw
 1292 00000068 00000000        DCD              void        ;_400cw
 1293 0000006C 00000000        DCD              void
 1294 00000070 00000000        DCD              void        ;_400ew
 1295 00000074 00000000        DCD              void        ;_400fw
 1296 00000078 00000000        DCD              void        ;_4010w
 1297 0000007C 00000000        DCD              void        ;_4011w
 1298 00000080 00000000        DCD              void        ;_4012w
 1299 00000084 00000000        DCD              void        ;_4013w
 1300 00000088 00000000        DCD              dma_W       ;$4014: Sprite DMA 
                                                            transfer
 1301 0000008C 00000000        DCD              void        ;_4015w   ; ÉùÒôÍ¨µ
                                                            ÀÇÐ»» 
 1302 00000090         joypad_write_ptr
 1303 00000090 00000000        DCD              joy0_W      ;$4016: Joypad 0 wr
                                                            ite
 1304 00000094 00000000        DCD              void        ;$4017: ?
 1305 00000098         
 1306 00000098         ;-------------------------------------------------------
                       ---------------------
 1307 00000098         dma_W                                ;(4014)  sprite DMA
                                                             transfer ¾«ÁéDMA´«
                                                            Êä DMA·ÃÎÊ¾«ÁéRAM£º
                                                            
 1308 00000098         ;Í¨¹ýÐ´Ò»¸öÖµxxµ½Õâ¸ö¶Ë¿Ú£¬ÒýÆðCPUÄÚ´æµØÖ·Îª$xx00£­$xxFF



ARM Macro Assembler    Page 134 


                       µÄÇøÓò´«ËÍµ½¾«ÁéÄÚ´æ 
 1309 00000098         ;-------------------------------------------------------
                       ---------------------
 1310 00000098         
 1311 00000098 F5A8 3800       sub              cycles,cycles,#512*256
 1312 0000009C B508            stmfd            sp!,{r3,lr}
 1313 0000009E         
 1314 0000009E F000 01E0       and              r1,r0,#0xe0
 1315 000000A2 F50A 6288       adr              r2,memmap_tbl
 1316 000000A6 EA4F 01D1       lsr              r1,r1,#3
 1317 000000AA 5852            ldr              r2,[r2,r1]
 1318 000000AC F000 00FF       and              r0,r0,#0xff
 1319 000000B0 EB02 2200       add              r2,r2,r0,lsl#8 ;addy  r2=DMA so
                                                            urce Ô´
 1320 000000B4 4924            ldr              r1,=spr_ram ;r1     DMAµÄ Ä¿µÄµ
                                                            Ø
 1321 000000B6 F04F 0040       mov              r0,#64
 1322 000000BA         copy_
 1323 000000BA 1E40            subs             r0,r0,#1    ;-1
 1324 000000BC F852 3020       ldr              r3,[r2,r0,lsl#2]
 1325 000000C0 F841 3020       str              r3,[r1,r0,lsl#2] ;<<2    *4
 1326 000000C4 D1F9            bne              copy_
 1327 000000C6         
 1328 000000C6 E8BD 4008       ldmfd            sp!,{r3,lr}
 1329 000000CA F04E 0E01       orr              lr,#0x01    ;lr×îµÍÎ»ÖÃ1·ÀÖ¹½øÈ
                                                            ëarm×´Ì¬
 1330 000000CE 4770            bx               lr
 1331 000000D0         ;-------------------------------------------------------
                       ---------------------
 1332 000000D0         ;---------------------------------------------
 1333 000000D0         
 1334 000000D0         joy0_W                               ;4016  ÊÖ±ú1£«Ñ¡Í¨ 
                                                            
 1335 000000D0         ;-------------------------------------------------------
                       ---------------------
 1336 000000D0 F010 0F01       tst              r0,#1
 1337 000000D4 F04E 0E01       orr              lr,#0x01    ;lr×îµÍÎ»ÖÃ1·ÀÖ¹½øÈ
                                                            ëarm×´Ì¬
 1338 000000D8 BF18 4770       bxne             lr
 1339 000000DC         
 1340 000000DC 481B            ldr              r0,=0x40011408 ; ¶Ë¿ÚÊäÈëÊý¾Ý¼Ä
                                                            ´æÆ÷(GPIOD_IDR)0x40
                                                            011408 °´¼ü¶Ë¿Ú
 1341 000000DE 6800            ldr              r0,[r0]     ;  PD9    11     12
                                                                13    14    15É
                                                            èÖÃ³ÉµÄÊäÈë    °´ÏÂ
                                                            Îª0
 1342 000000E0         ;   key 6     1      2   3     4   5
 1343 000000E0         
 1344 000000E0         ; ((ÓÒ  <<7)|(×ó  <<6)|(ÏÂ  <<5)|(ÉÏ  <<4)|Start<<3)|Sel
                       ect<<2)|(B  <<1)| A   )
 1345 000000E0         ;     5    3        1     2   4 °´¼ü±àºÅ
 1346 000000E0         
 1347 000000E0 EA4F 2010       lsr              r0,r0,#8    ;>>8  Ö»Òª¸ß8Î»
 1348 000000E4 F1C0 00FF       rsb              r0,r0,#0xff ; R0 = #0xff-R0    
                                                              ·´Ïò¼õ·¨?   È¡·´ 
                                                               °´ÏÂÎª1
 1349 000000E8         ;    76543210
 1350 000000E8         ;    54321 6   °´¼ü±àºÅ



ARM Macro Assembler    Page 135 


 1351 000000E8         ;    11111010   8Î»Êý¾Ý
 1352 000000E8         
 1353 000000E8 F000 0280       and              r2,r0,#0x80 ;°´¼ü5 ÔÚ¶ÔÓ¦Î»
 1354 000000EC         
 1355 000000EC F000 0120       and              r1,r0,#0x20 ;°´¼ü3
 1356 000000F0 EA42 0241       orr              r2,r1,lsl#1 ;   <<1
 1357 000000F4         
 1358 000000F4 F000 0108       and              r1,r0,#0x8  ;°´¼ü1
 1359 000000F8 EA42 0201       orr              r2,r1       ;°´¼ü1 ÔÚ¶ÔÓ¦Î»
 1360 000000FC         
 1361 000000FC F000 0110       and              r1,r0,#0x10 ;°´¼ü2
 1362 00000100 EA42 0291       orr              r2,r1,lsr#2 ;        >>2
 1363 00000104         
 1364 00000104 F000 0140       and              r1,r0,#0x40 ;°´¼ü4
 1365 00000108 EA42 1291       orr              r2,r1,lsr#6 ;    >>6    r2ÊÇ¼üÖ
                                                            µ
 1366 0000010C F442 1280       orr              r2,r2,#0x100000 
                                                            ;20Î»±íÊ¾¿ØÖÆÆ÷ÔÚÎ»
                                                            
 1367 00000110         
 1368 00000110 F8CA 2494       str              r2,joy0serial
 1369 00000114         ; orr lr,#0x01  ;lr×îµÍÎ»ÖÃ1·ÀÖ¹½øÈëarm×´Ì¬
 1370 00000114 4770            bx               lr
 1371 00000116         ;-------------------------------------------------------
                       ---------------------
 1372 00000116         joy0_R                               ;4016
 1373 00000116         ;-------------------------------------------------------
                       --------------------- 
 1374 00000116         
 1375 00000116 F8DA 0494       ldr              r0,joy0serial ;´®ÐÐÊý¾Ý  µ±Ç°¶Á
                                                            È¡Î»
 1376 0000011A EA4F 0150       mov              r1,r0,lsr#1
 1377 0000011E F8CA 1494       str              r1,joy0serial
 1378 00000122 F000 0001       and              r0,r0,#1
 1379 00000126 F040 0040       orr              r0,r0,#0x40
 1380 0000012A         
 1381 0000012A F04E 0E01       orr              lr,#0x01    ;lr×îµÍÎ»ÖÃ1·ÀÖ¹½øÈ
                                                            ëarm×´Ì¬
 1382 0000012E 4770            bx               lr
 1383 00000130         ;-------------------------------------------------------
                       ---------------------
 1384 00000130         joy1_R                               ;4017
 1385 00000130         ;-------------------------------------------------------
                       ---------------------
 1386 00000130 F04F 0000       mov              r0,#0x00    ;ÊÖ±ú1´æÔÚ
 1387 00000134 F040 00F8       orr              r0,r0,#0xf8
 1388 00000138 F04E 0E01       orr              lr,#0x01    ;lr×îµÍÎ»ÖÃ1·ÀÖ¹½øÈ
                                                            ëarm×´Ì¬
 1389 0000013C 4770            bx               lr
 1390 0000013E BF00            nop
 1391 00000140         ;----------------------------
 1392 00000140         ;ppu_io
 1393 00000140 00000000 
              00000000 
              00000000 
              40011408         AREA             CPU_GPU, CODE, READONLY
 1394 00000000         
 1395 00000000                 IMPORT           PPU_RegWrite ;PPU.c
 1396 00000000                 IMPORT           PPU_RegRead ;PPU.c



ARM Macro Assembler    Page 136 


 1397 00000000         ;-------------------------------------------------------
                       -----------------------------
 1398 00000000         PPU_W
 1399 00000000 B500            stmfd            sp!,{lr}    ;LR ¼Ä´æÆ÷·ÅÕ»     
                                                             
 1400 00000002 F00C 0107       and              r1,r12,#7   ;addy RN r12
 1401 00000006         ; »ã±àÒªºô½ÐCº¯Êý£¬Ôò¿¼ÂÇÎÊÌâµÄ·½Ê½¾ÍÓÐËù²»Í¬ 
 1402 00000006         ;±ØÐëÒâÊ¶µ½×Ó³ÌÐò¿ÉÒÔËæÐÄËùÓûµØ¸ÄÐ´R0©\R3,?R12£¬È´¾ö²» 
 1403 00000006         ;»á¸Ä±äR4©\R11
 1404 00000006         
 1405 00000006 F7FF FFFE       bl               PPU_RegWrite
 1406 0000000A F85D EB04       ldmfd            sp!,{lr}
 1407 0000000E F04E 0E01       orr              lr,#0x01    ;lr×îµÍÎ»ÖÃ1·ÀÖ¹½øÈ
                                                            ëarm×´Ì¬
 1408 00000012 4770            bx               lr
 1409 00000014         ;-------------------------------------------------------
                       -------------------------------
 1410 00000014         PPU_R
 1411 00000014 B510            stmfd            sp!,{r4,lr} ;LR ¼Ä´æÆ÷·ÅÕ»    »
                                                            á¸Ä±äR4  
 1412 00000016 F00C 0007       and              r0,r12,#7   ;addy RN r12
 1413 0000001A F7FF FFFE       bl               PPU_RegRead
 1414 0000001E E8BD 4010       ldmfd            sp!,{r4,lr}
 1415 00000022 F04E 0E01       orr              lr,#0x01
 1416 00000026 4770            bx               lr
 1417 00000028         ;-------------------------------------------------------
                       ---------------------------------
 1418 00000028         
 1419 00000028         ;-------------------------------------------------------
                       ---
 1420 00000028                 AREA             wram_globals0, DATA, READWRITE 
                                                            ;*
 1421 00000000         op_table                             ;DCD ÓÃÓÚ·ÖÅäÒ»¶Î×Ö
                                                            ÄÚ´æµ¥Ôª op_tableÄÚ
                                                            ´æ¿éÆðÊ¼µØÖ·±êºÅ
 1422 00000000 00000000 
              00000000 
              00000000 
              00000000 
              00000000 
              00000000 
              00000000 
              00000000 
              00000000 
              00000000 
              00000000 
              00000000 
              00000000 
              00000000 
              00000000 
              00000000         DCD              _00,_01,_xx,_xx,_xx,_05,_06,_xx
,_08,_09,_0A,_xx,_xx,_0D,_0E,_xx
 1423 00000040 00000000 
              00000000 
              00000000 
              00000000 
              00000000 
              00000000 
              00000000 



ARM Macro Assembler    Page 137 


              00000000 
              00000000 
              00000000 
              00000000 
              00000000 
              00000000 
              00000000 
              00000000 
              00000000         DCD              _10,_11,_xx,_xx,_xx,_15,_16,_xx
,_18,_19,_xx,_xx,_xx,_1D,_1E,_xx
 1424 00000080 00000000 
              00000000 
              00000000 
              00000000 
              00000000 
              00000000 
              00000000 
              00000000 
              00000000 
              00000000 
              00000000 
              00000000 
              00000000 
              00000000 
              00000000 
              00000000         DCD              _20,_21,_xx,_xx,_24,_25,_26,_xx
,_28,_29,_2A,_xx,_2C,_2D,_2E,_xx
 1425 000000C0 00000000 
              00000000 
              00000000 
              00000000 
              00000000 
              00000000 
              00000000 
              00000000 
              00000000 
              00000000 
              00000000 
              00000000 
              00000000 
              00000000 
              00000000 
              00000000         DCD              _30,_31,_xx,_xx,_xx,_35,_36,_xx
,_38,_39,_xx,_xx,_xx,_3D,_3E,_xx
 1426 00000100 00000000 
              00000000 
              00000000 
              00000000 
              00000000 
              00000000 
              00000000 
              00000000 
              00000000 
              00000000 
              00000000 
              00000000 
              00000000 
              00000000 
              00000000 



ARM Macro Assembler    Page 138 


              00000000         DCD              _40,_41,_xx,_xx,_xx,_45,_46,_xx
,_48,_49,_4A,_xx,_4C,_4D,_4E,_xx
 1427 00000140 00000000 
              00000000 
              00000000 
              00000000 
              00000000 
              00000000 
              00000000 
              00000000 
              00000000 
              00000000 
              00000000 
              00000000 
              00000000 
              00000000 
              00000000 
              00000000         DCD              _50,_51,_xx,_xx,_xx,_55,_56,_xx
,_58,_59,_xx,_xx,_xx,_5D,_5E,_xx
 1428 00000180 00000000 
              00000000 
              00000000 
              00000000 
              00000000 
              00000000 
              00000000 
              00000000 
              00000000 
              00000000 
              00000000 
              00000000 
              00000000 
              00000000 
              00000000 
              00000000         DCD              _60,_61,_xx,_xx,_xx,_65,_66,_xx
,_68,_69,_6A,_xx,_6C,_6D,_6E,_xx
 1429 000001C0 00000000 
              00000000 
              00000000 
              00000000 
              00000000 
              00000000 
              00000000 
              00000000 
              00000000 
              00000000 
              00000000 
              00000000 
              00000000 
              00000000 
              00000000 
              00000000         DCD              _70,_71,_xx,_xx,_xx,_75,_76,_xx
,_78,_79,_xx,_xx,_xx,_7D,_7E,_xx
 1430 00000200 00000000 
              00000000 
              00000000 
              00000000 
              00000000 
              00000000 



ARM Macro Assembler    Page 139 


              00000000 
              00000000 
              00000000 
              00000000 
              00000000 
              00000000 
              00000000 
              00000000 
              00000000 
              00000000         DCD              _xx,_81,_xx,_xx,_84,_85,_86,_xx
,_88,_xx,_8A,_xx,_8C,_8D,_8E,_xx
 1431 00000240 00000000 
              00000000 
              00000000 
              00000000 
              00000000 
              00000000 
              00000000 
              00000000 
              00000000 
              00000000 
              00000000 
              00000000 
              00000000 
              00000000 
              00000000 
              00000000         DCD              _90,_91,_xx,_xx,_94,_95,_96,_xx
,_98,_99,_9A,_xx,_xx,_9D,_xx,_xx
 1432 00000280 00000000 
              00000000 
              00000000 
              00000000 
              00000000 
              00000000 
              00000000 
              00000000 
              00000000 
              00000000 
              00000000 
              00000000 
              00000000 
              00000000 
              00000000 
              00000000         DCD              _A0,_A1,_A2,_xx,_A4,_A5,_A6,_xx
,_A8,_A9,_AA,_xx,_AC,_AD,_AE,_xx
 1433 000002C0 00000000 
              00000000 
              00000000 
              00000000 
              00000000 
              00000000 
              00000000 
              00000000 
              00000000 
              00000000 
              00000000 
              00000000 
              00000000 
              00000000 



ARM Macro Assembler    Page 140 


              00000000 
              00000000         DCD              _B0,_B1,_xx,_xx,_B4,_B5,_B6,_xx
,_B8,_B9,_BA,_xx,_BC,_BD,_BE,_xx
 1434 00000300 00000000 
              00000000 
              00000000 
              00000000 
              00000000 
              00000000 
              00000000 
              00000000 
              00000000 
              00000000 
              00000000 
              00000000 
              00000000 
              00000000 
              00000000 
              00000000         DCD              _C0,_C1,_xx,_xx,_C4,_C5,_C6,_xx
,_C8,_C9,_CA,_xx,_CC,_CD,_CE,_xx
 1435 00000340 00000000 
              00000000 
              00000000 
              00000000 
              00000000 
              00000000 
              00000000 
              00000000 
              00000000 
              00000000 
              00000000 
              00000000 
              00000000 
              00000000 
              00000000 
              00000000         DCD              _D0,_D1,_xx,_xx,_xx,_D5,_D6,_xx
,_D8,_D9,_xx,_xx,_xx,_DD,_DE,_xx
 1436 00000380 00000000 
              00000000 
              00000000 
              00000000 
              00000000 
              00000000 
              00000000 
              00000000 
              00000000 
              00000000 
              00000000 
              00000000 
              00000000 
              00000000 
              00000000 
              00000000         DCD              _E0,_E1,_xx,_xx,_E4,_E5,_E6,_xx
,_E8,_E9,_EA,_xx,_EC,_ED,_EE,_xx
 1437 000003C0 00000000 
              00000000 
              00000000 
              00000000 
              00000000 



ARM Macro Assembler    Page 141 


              00000000 
              00000000 
              00000000 
              00000000 
              00000000 
              00000000 
              00000000 
              00000000 
              00000000 
              00000000 
              00000000         DCD              _F0,_F1,_xx,_xx,_xx,_F5,_F6,_xx
,_F8,_F9,_xx,_xx,_xx,_FD,_FE,_xx
 1438 00000400         ;readmem_tbl             254 255
 1439 00000400 00000000        DCD              ram_R       ;$0000    256
 1440 00000404 00000000        DCD              PPU_R       ;$2000
 1441 00000408 00000000        DCD              IO_R        ;$4000
 1442 0000040C 00000000        DCD              void        ;sram_R ;$6000
 1443 00000410 00000000        DCD              rom_R80     ;$8000
 1444 00000414 00000000        DCD              rom_RA0     ;$A000
 1445 00000418 00000000        DCD              rom_RC0     ;$C000
 1446 0000041C 00000000        DCD              rom_RE0     ;$E000
 1447 00000420         ;writemem_tbl
 1448 00000420 00000000        DCD              ram_W       ;$0000     264*4=10
                                                            56  0X420
 1449 00000424 00000000        DCD              PPU_W       ;$2000   r0´«²ÎÊý
 1450 00000428 00000000        DCD              IO_W        ;$4000
 1451 0000042C 00000000        DCD              void        ;sram_W ;$6000
 1452 00000430 00000000        DCD              void        ;$8000
 1453 00000434 00000000        DCD              void        ;$A000
 1454 00000438 00000000        DCD              void        ;$C000
 1455 0000043C 00000000        DCD              void        ;$E000
 1456 00000440         ;memmap_tbl  ´æ´¢Æ÷Ó³Ïó
 1457 00000440 00000000        DCD              NES_RAM     ;$0000   0000-7fff 
                                                             keep $400 byte ali
                                                            gned for 6502 stack
                                                             shit
 1458 00000444 00000000        DCD              NES_RAM     ;$2000    should   
                                                            ±£³Ö400×Ö½Ú6502¹·Êº
                                                            ¶Ñ¶ÔÆë
 1459 00000448 00000000        DCD              NES_RAM     ;$4000     never
 1460 0000044C 00000000        DCD              NES_RAM     ;-0x5800;void;   NE
                                                            S_RAM-0x5800 ;$6000
                                                                  change¸Ä±ä
 1461 00000450 00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00       rommap  %                4*4         ;$8000-FFFF  memmap
                                                            _tbl+16
 1462 00000460         
 1463 00000460         cpustate
 1464 00000460         ;group these together for save/loadstate
 1465 00000460 00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 



ARM Macro Assembler    Page 142 


              00 00 00 
              00 00 00 
              00 00 00 
              00               %                7*4         ;cpuregs (nz,c,a,x,
                                                            y,cycles,pc)
 1466 0000047C 00000000        DCD              0           ;m6502_s:
 1467 00000480 00000000        DCD              0           ;lastbank: ×îºóMEMM
                                                            APÌí¼Óµ½PC £¨ÓÃÓÚ¼Æ
                                                            Ëãµ±Ç°µÄPC £©
 1468 00000484         
 1469 00000484 00000000        DCD              0           ;nexttimeout:  jump
                                                             here when cycles r
                                                            uns out Ìøµ½ÏÂÒ»¸öÊ
                                                            ±ÖÓÖÜÆÚÔËÐÐ
 1470 00000488         
 1471 00000488 00000000        DCD              0           ;rombase # 4   ;//R
                                                            OM¿ªÊ¼µØÖ·
 1472 0000048C 00000000        DCD              0           ;romnumber # 4   ;/
                                                            / 
 1473 00000490 00000000        DCD              0           ;rommask # 4     ;/
                                                            /ROMÑÚÄ¤ rommask=ro
                                                            msize-1
 1474 00000494         
 1475 00000494 00000000        DCD              0           ;joy0serial # 4    
                                                            ;//´®ÐÐÊý¾Ý
 1476 00000498         
 1477 00000498         
 1478 00000498         ;-------------------------------------------------------
                       ---------------------
 1479 00000498         ; ALIGN           ;Í¨¹ýÓÃÁã»ò¿ÕÖ¸ÁîNOPÌî³ä£¬À´Ê¹µ±Ç°Î»ÖÃ
                       ÓëÒ»¸öÖ¸¶¨µÄ±ß½ç¶ÔÆë
 1480 00000498                 END
Command Line: --debug --xref --cpu=Cortex-M3 --apcs=interwork --depend=..\OBJ\6
502.d -o..\OBJ\6502.o -IC:\Keil\ARM\RV31\INC -IC:\Keil\ARM\CMSIS\Include -IC:\K
eil\ARM\Inc\ST\STM32F10x --list=.\6502.lst ..\HARDWARE\NES\6502.s



ARM Macro Assembler    Page 1 Alphabetic symbol ordering
Relocatable symbols

 0000008A

Symbol: 
   Definitions
      None
   Uses
      None
Warning:  undefinedComment:  unused
 0000017E

Symbol: 
   Definitions
      None
   Uses
      None
Warning:  undefinedComment:  unused
 000001B4

Symbol: 
   Definitions
      None
   Uses
      None
Warning:  undefinedComment:  unused
 000001D2

Symbol: 
   Definitions
      None
   Uses
      None
Warning:  undefinedComment:  unused
 0000022A

Symbol: 
   Definitions
      None
   Uses
      None
Warning:  undefinedComment:  unused
 000002D8

Symbol: 
   Definitions
      None
   Uses
      None
Warning:  undefinedComment:  unused
 00000312

Symbol: 
   Definitions
      None
   Uses
      None
Warning:  undefinedComment:  unused
 0000034C

Symbol: 



ARM Macro Assembler    Page 2 Alphabetic symbol ordering
Relocatable symbols

   Definitions
      None
   Uses
      None
Warning:  undefinedComment:  unused
 0000036A

Symbol: 
   Definitions
      None
   Uses
      None
Warning:  undefinedComment:  unused
 000003FE

Symbol: 
   Definitions
      None
   Uses
      None
Warning:  undefinedComment:  unused
 00000532

Symbol: 
   Definitions
      None
   Uses
      None
Warning:  undefinedComment:  unused
 00000576

Symbol: 
   Definitions
      None
   Uses
      None
Warning:  undefinedComment:  unused
 000005AC

Symbol: 
   Definitions
      None
   Uses
      None
Warning:  undefinedComment:  unused
 000005D0

Symbol: 
   Definitions
      None
   Uses
      None
Warning:  undefinedComment:  unused
 00000628

Symbol: 
   Definitions
      None
   Uses



ARM Macro Assembler    Page 3 Alphabetic symbol ordering
Relocatable symbols

      None
Warning:  undefinedComment:  unused
 000006DC

Symbol: 
   Definitions
      None
   Uses
      None
Warning:  undefinedComment:  unused
 00000716

Symbol: 
   Definitions
      None
   Uses
      None
Warning:  undefinedComment:  unused
 00000750

Symbol: 
   Definitions
      None
   Uses
      None
Warning:  undefinedComment:  unused
 00000774

Symbol: 
   Definitions
      None
   Uses
      None
Warning:  undefinedComment:  unused
 00000824

Symbol: 
   Definitions
      None
   Uses
      None
Warning:  undefinedComment:  unused
 0000092E

Symbol: 
   Definitions
      None
   Uses
      None
Warning:  undefinedComment:  unused
 00000964

Symbol: 
   Definitions
      None
   Uses
      None
Warning:  undefinedComment:  unused
 00000980



ARM Macro Assembler    Page 4 Alphabetic symbol ordering
Relocatable symbols


Symbol: 
   Definitions
      None
   Uses
      None
Warning:  undefinedComment:  unused
 000009D8

Symbol: 
   Definitions
      None
   Uses
      None
Warning:  undefinedComment:  unused
 00000A82

Symbol: 
   Definitions
      None
   Uses
      None
Warning:  undefinedComment:  unused
 00000ABC

Symbol: 
   Definitions
      None
   Uses
      None
Warning:  undefinedComment:  unused
 00000AF6

Symbol: 
   Definitions
      None
   Uses
      None
Warning:  undefinedComment:  unused
 00000B12

Symbol: 
   Definitions
      None
   Uses
      None
Warning:  undefinedComment:  unused
 00000B9E

Symbol: 
   Definitions
      None
   Uses
      None
Warning:  undefinedComment:  unused
 00000D1C

Symbol: 
   Definitions



ARM Macro Assembler    Page 5 Alphabetic symbol ordering
Relocatable symbols

      None
   Uses
      None
Warning:  undefinedComment:  unused
 00000D66

Symbol: 
   Definitions
      None
   Uses
      None
Warning:  undefinedComment:  unused
 00000D8E

Symbol: 
   Definitions
      None
   Uses
      None
Warning:  undefinedComment:  unused
 00000DE6

Symbol: 
   Definitions
      None
   Uses
      None
Warning:  undefinedComment:  unused
 00000EC6

Symbol: 
   Definitions
      None
   Uses
      None
Warning:  undefinedComment:  unused
 00000F14

Symbol: 
   Definitions
      None
   Uses
      None
Warning:  undefinedComment:  unused
 00000F62

Symbol: 
   Definitions
      None
   Uses
      None
Warning:  undefinedComment:  unused
 00000F8A

Symbol: 
   Definitions
      None
   Uses
      None



ARM Macro Assembler    Page 6 Alphabetic symbol ordering
Relocatable symbols

Warning:  undefinedComment:  unused
 00000FD4

Symbol: 
   Definitions
      None
   Uses
      None
Warning:  undefinedComment:  unused
 00001096

Symbol: 
   Definitions
      None
   Uses
      None
Warning:  undefinedComment:  unused
 000010CC

Symbol: 
   Definitions
      None
   Uses
      None
Warning:  undefinedComment:  unused
 00001102

Symbol: 
   Definitions
      None
   Uses
      None
Warning:  undefinedComment:  unused
 00001162

Symbol: 
   Definitions
      None
   Uses
      None
Warning:  undefinedComment:  unused
 00001226

Symbol: 
   Definitions
      None
   Uses
      None
Warning:  undefinedComment:  unused
 0000127A

Symbol: 
   Definitions
      None
   Uses
      None
Warning:  undefinedComment:  unused
 000012D6




ARM Macro Assembler    Page 7 Alphabetic symbol ordering
Relocatable symbols

Symbol: 
   Definitions
      None
   Uses
      None
Warning:  undefinedComment:  unused
 000013CA

Symbol: 
   Definitions
      None
   Uses
      None
Warning:  undefinedComment:  unused
 00001400

Symbol: 
   Definitions
      None
   Uses
      None
Warning:  undefinedComment:  unused
 00001436

Symbol: 
   Definitions
      None
   Uses
      None
Warning:  undefinedComment:  unused
 00001496

Symbol: 
   Definitions
      None
   Uses
      None
Warning:  undefinedComment:  unused
 00001558

Symbol: 
   Definitions
      None
   Uses
      None
Warning:  undefinedComment:  unused
 000015B0

Symbol: 
   Definitions
      None
   Uses
      None
Warning:  undefinedComment:  unused
 000015EA

Symbol: 
   Definitions
      None



ARM Macro Assembler    Page 8 Alphabetic symbol ordering
Relocatable symbols

   Uses
      None
Warning:  undefinedComment:  unused
 00001624

Symbol: 
   Definitions
      None
   Uses
      None
Warning:  undefinedComment:  unused
 00001690

Symbol: 
   Definitions
      None
   Uses
      None
Warning:  undefinedComment:  unused
 00001792

Symbol: 
   Definitions
      None
   Uses
      None
Warning:  undefinedComment:  unused
 000017CC

Symbol: 
   Definitions
      None
   Uses
      None
Warning:  undefinedComment:  unused
 00001806

Symbol: 
   Definitions
      None
   Uses
      None
Warning:  undefinedComment:  unused
 00001822

Symbol: 
   Definitions
      None
   Uses
      None
Warning:  undefinedComment:  unused
 0000187A

Symbol: 
   Definitions
      None
   Uses
      None
Warning:  undefinedComment:  unused



ARM Macro Assembler    Page 9 Alphabetic symbol ordering
Relocatable symbols

 0000192E

Symbol: 
   Definitions
      None
   Uses
      None
Warning:  undefinedComment:  unused
 0000196C

Symbol: 
   Definitions
      None
   Uses
      None
Warning:  undefinedComment:  unused
 000019AA

Symbol: 
   Definitions
      None
   Uses
      None
Warning:  undefinedComment:  unused
 000019C6

Symbol: 
   Definitions
      None
   Uses
      None
Warning:  undefinedComment:  unused
 00001A2A

Symbol: 
   Definitions
      None
   Uses
      None
Warning:  undefinedComment:  unused
 00001B4E

Symbol: 
   Definitions
      None
   Uses
      None
Warning:  undefinedComment:  unused
 00001B88

Symbol: 
   Definitions
      None
   Uses
      None
Warning:  undefinedComment:  unused
 00001BD0

Symbol: 



ARM Macro Assembler    Page 10 Alphabetic symbol ordering
Relocatable symbols

   Definitions
      None
   Uses
      None
Warning:  undefinedComment:  unused
 00001BEC

Symbol: 
   Definitions
      None
   Uses
      None
Warning:  undefinedComment:  unused
 00001C44

Symbol: 
   Definitions
      None
   Uses
      None
Warning:  undefinedComment:  unused
 00001D14

Symbol: 
   Definitions
      None
   Uses
      None
Warning:  undefinedComment:  unused
 00001D60

Symbol: 
   Definitions
      None
   Uses
      None
Warning:  undefinedComment:  unused
 00001DAC

Symbol: 
   Definitions
      None
   Uses
      None
Warning:  undefinedComment:  unused
 00001DC8

Symbol: 
   Definitions
      None
   Uses
      None
Warning:  undefinedComment:  unused
_00 00000000

Symbol: _00
   Definitions
      At line 67 in file ..\HARDWARE\NES\6502.s
   Uses



ARM Macro Assembler    Page 11 Alphabetic symbol ordering
Relocatable symbols

      At line 1422 in file ..\HARDWARE\NES\6502.s
Comment: _00 used once
_01 0000005A

Symbol: _01
   Definitions
      At line 83 in file ..\HARDWARE\NES\6502.s
   Uses
      At line 1422 in file ..\HARDWARE\NES\6502.s
Comment: _01 used once
_05 000000A4

Symbol: _05
   Definitions
      At line 89 in file ..\HARDWARE\NES\6502.s
   Uses
      At line 1422 in file ..\HARDWARE\NES\6502.s
Comment: _05 used once
_06 000000C6

Symbol: _06
   Definitions
      At line 95 in file ..\HARDWARE\NES\6502.s
   Uses
      At line 1422 in file ..\HARDWARE\NES\6502.s
Comment: _06 used once
_08 000000EE

Symbol: _08
   Definitions
      At line 101 in file ..\HARDWARE\NES\6502.s
   Uses
      At line 1422 in file ..\HARDWARE\NES\6502.s
Comment: _08 used once
_09 00000128

Symbol: _09
   Definitions
      At line 107 in file ..\HARDWARE\NES\6502.s
   Uses
      At line 1422 in file ..\HARDWARE\NES\6502.s
Comment: _09 used once
_0A 00000146

Symbol: _0A
   Definitions
      At line 113 in file ..\HARDWARE\NES\6502.s
   Uses
      At line 1422 in file ..\HARDWARE\NES\6502.s
Comment: _0A used once
_0D 00000162

Symbol: _0D
   Definitions
      At line 120 in file ..\HARDWARE\NES\6502.s
   Uses
      At line 1422 in file ..\HARDWARE\NES\6502.s
Comment: _0D used once
_0E 00000198



ARM Macro Assembler    Page 12 Alphabetic symbol ordering
Relocatable symbols


Symbol: _0E
   Definitions
      At line 126 in file ..\HARDWARE\NES\6502.s
   Uses
      At line 1422 in file ..\HARDWARE\NES\6502.s
Comment: _0E used once
_10 000001E4

Symbol: _10
   Definitions
      At line 132 in file ..\HARDWARE\NES\6502.s
   Uses
      At line 1423 in file ..\HARDWARE\NES\6502.s
Comment: _10 used once
_11 00000206

Symbol: _11
   Definitions
      At line 141 in file ..\HARDWARE\NES\6502.s
   Uses
      At line 1423 in file ..\HARDWARE\NES\6502.s
Comment: _11 used once
_15 00000244

Symbol: _15
   Definitions
      At line 147 in file ..\HARDWARE\NES\6502.s
   Uses
      At line 1423 in file ..\HARDWARE\NES\6502.s
Comment: _15 used once
_16 0000026E

Symbol: _16
   Definitions
      At line 153 in file ..\HARDWARE\NES\6502.s
   Uses
      At line 1423 in file ..\HARDWARE\NES\6502.s
Comment: _16 used once
_18 000002A2

Symbol: _18
   Definitions
      At line 159 in file ..\HARDWARE\NES\6502.s
   Uses
      At line 1423 in file ..\HARDWARE\NES\6502.s
Comment: _18 used once
_19 000002B8

Symbol: _19
   Definitions
      At line 164 in file ..\HARDWARE\NES\6502.s
   Uses
      At line 1423 in file ..\HARDWARE\NES\6502.s
Comment: _19 used once
_1D 000002F2

Symbol: _1D
   Definitions



ARM Macro Assembler    Page 13 Alphabetic symbol ordering
Relocatable symbols

      At line 170 in file ..\HARDWARE\NES\6502.s
   Uses
      At line 1423 in file ..\HARDWARE\NES\6502.s
Comment: _1D used once
_1E 0000032C

Symbol: _1E
   Definitions
      At line 176 in file ..\HARDWARE\NES\6502.s
   Uses
      At line 1423 in file ..\HARDWARE\NES\6502.s
Comment: _1E used once
_20 0000037C

Symbol: _20
   Definitions
      At line 182 in file ..\HARDWARE\NES\6502.s
   Uses
      At line 1424 in file ..\HARDWARE\NES\6502.s
Comment: _20 used once
_21 000003CE

Symbol: _21
   Definitions
      At line 193 in file ..\HARDWARE\NES\6502.s
   Uses
      At line 1424 in file ..\HARDWARE\NES\6502.s
Comment: _21 used once
_24 00000418

Symbol: _24
   Definitions
      At line 199 in file ..\HARDWARE\NES\6502.s
   Uses
      At line 1424 in file ..\HARDWARE\NES\6502.s
Comment: _24 used once
_25 00000448

Symbol: _25
   Definitions
      At line 205 in file ..\HARDWARE\NES\6502.s
   Uses
      At line 1424 in file ..\HARDWARE\NES\6502.s
Comment: _25 used once
_26 0000046A

Symbol: _26
   Definitions
      At line 211 in file ..\HARDWARE\NES\6502.s
   Uses
      At line 1424 in file ..\HARDWARE\NES\6502.s
Comment: _26 used once
_28 00000498

Symbol: _28
   Definitions
      At line 217 in file ..\HARDWARE\NES\6502.s
   Uses
      At line 1424 in file ..\HARDWARE\NES\6502.s



ARM Macro Assembler    Page 14 Alphabetic symbol ordering
Relocatable symbols

Comment: _28 used once
_29 000004D2

Symbol: _29
   Definitions
      At line 223 in file ..\HARDWARE\NES\6502.s
   Uses
      At line 1424 in file ..\HARDWARE\NES\6502.s
Comment: _29 used once
_2A 000004F0

Symbol: _2A
   Definitions
      At line 229 in file ..\HARDWARE\NES\6502.s
   Uses
      At line 1424 in file ..\HARDWARE\NES\6502.s
Comment: _2A used once
_2C 00000516

Symbol: _2C
   Definitions
      At line 238 in file ..\HARDWARE\NES\6502.s
   Uses
      At line 1424 in file ..\HARDWARE\NES\6502.s
Comment: _2C used once
_2D 0000055A

Symbol: _2D
   Definitions
      At line 244 in file ..\HARDWARE\NES\6502.s
   Uses
      At line 1424 in file ..\HARDWARE\NES\6502.s
Comment: _2D used once
_2E 00000590

Symbol: _2E
   Definitions
      At line 250 in file ..\HARDWARE\NES\6502.s
   Uses
      At line 1424 in file ..\HARDWARE\NES\6502.s
Comment: _2E used once
_30 000005E2

Symbol: _30
   Definitions
      At line 256 in file ..\HARDWARE\NES\6502.s
   Uses
      At line 1425 in file ..\HARDWARE\NES\6502.s
Comment: _30 used once
_31 00000604

Symbol: _31
   Definitions
      At line 265 in file ..\HARDWARE\NES\6502.s
   Uses
      At line 1425 in file ..\HARDWARE\NES\6502.s
Comment: _31 used once
_35 00000642




ARM Macro Assembler    Page 15 Alphabetic symbol ordering
Relocatable symbols

Symbol: _35
   Definitions
      At line 271 in file ..\HARDWARE\NES\6502.s
   Uses
      At line 1425 in file ..\HARDWARE\NES\6502.s
Comment: _35 used once
_36 0000066C

Symbol: _36
   Definitions
      At line 277 in file ..\HARDWARE\NES\6502.s
   Uses
      At line 1425 in file ..\HARDWARE\NES\6502.s
Comment: _36 used once
_38 000006A6

Symbol: _38
   Definitions
      At line 283 in file ..\HARDWARE\NES\6502.s
   Uses
      At line 1425 in file ..\HARDWARE\NES\6502.s
Comment: _38 used once
_39 000006BC

Symbol: _39
   Definitions
      At line 288 in file ..\HARDWARE\NES\6502.s
   Uses
      At line 1425 in file ..\HARDWARE\NES\6502.s
Comment: _39 used once
_3D 000006F6

Symbol: _3D
   Definitions
      At line 294 in file ..\HARDWARE\NES\6502.s
   Uses
      At line 1425 in file ..\HARDWARE\NES\6502.s
Comment: _3D used once
_3E 00000730

Symbol: _3E
   Definitions
      At line 300 in file ..\HARDWARE\NES\6502.s
   Uses
      At line 1425 in file ..\HARDWARE\NES\6502.s
Comment: _3E used once
_40 00000786

Symbol: _40
   Definitions
      At line 306 in file ..\HARDWARE\NES\6502.s
   Uses
      At line 1426 in file ..\HARDWARE\NES\6502.s
Comment: _40 used once
_41 000007F4

Symbol: _41
   Definitions
      At line 314 in file ..\HARDWARE\NES\6502.s



ARM Macro Assembler    Page 16 Alphabetic symbol ordering
Relocatable symbols

   Uses
      At line 1426 in file ..\HARDWARE\NES\6502.s
Comment: _41 used once
_45 0000083E

Symbol: _45
   Definitions
      At line 320 in file ..\HARDWARE\NES\6502.s
   Uses
      At line 1426 in file ..\HARDWARE\NES\6502.s
Comment: _45 used once
_46 00000860

Symbol: _46
   Definitions
      At line 326 in file ..\HARDWARE\NES\6502.s
   Uses
      At line 1426 in file ..\HARDWARE\NES\6502.s
Comment: _46 used once
_48 00000884

Symbol: _48
   Definitions
      At line 332 in file ..\HARDWARE\NES\6502.s
   Uses
      At line 1426 in file ..\HARDWARE\NES\6502.s
Comment: _48 used once
_49 000008A6

Symbol: _49
   Definitions
      At line 338 in file ..\HARDWARE\NES\6502.s
   Uses
      At line 1426 in file ..\HARDWARE\NES\6502.s
Comment: _49 used once
_4A 000008C4

Symbol: _4A
   Definitions
      At line 344 in file ..\HARDWARE\NES\6502.s
   Uses
      At line 1426 in file ..\HARDWARE\NES\6502.s
Comment: _4A used once
_4C 000008E0

Symbol: _4C
   Definitions
      At line 351 in file ..\HARDWARE\NES\6502.s
   Uses
      At line 1426 in file ..\HARDWARE\NES\6502.s
Comment: _4C used once
_4D 00000912

Symbol: _4D
   Definitions
      At line 359 in file ..\HARDWARE\NES\6502.s
   Uses
      At line 1426 in file ..\HARDWARE\NES\6502.s
Comment: _4D used once



ARM Macro Assembler    Page 17 Alphabetic symbol ordering
Relocatable symbols

_4E 00000948

Symbol: _4E
   Definitions
      At line 365 in file ..\HARDWARE\NES\6502.s
   Uses
      At line 1426 in file ..\HARDWARE\NES\6502.s
Comment: _4E used once
_50 00000992

Symbol: _50
   Definitions
      At line 371 in file ..\HARDWARE\NES\6502.s
   Uses
      At line 1427 in file ..\HARDWARE\NES\6502.s
Comment: _50 used once
_51 000009B4

Symbol: _51
   Definitions
      At line 380 in file ..\HARDWARE\NES\6502.s
   Uses
      At line 1427 in file ..\HARDWARE\NES\6502.s
Comment: _51 used once
_55 000009F2

Symbol: _55
   Definitions
      At line 386 in file ..\HARDWARE\NES\6502.s
   Uses
      At line 1427 in file ..\HARDWARE\NES\6502.s
Comment: _55 used once
_56 00000A1C

Symbol: _56
   Definitions
      At line 392 in file ..\HARDWARE\NES\6502.s
   Uses
      At line 1427 in file ..\HARDWARE\NES\6502.s
Comment: _56 used once
_58 00000A4C

Symbol: _58
   Definitions
      At line 398 in file ..\HARDWARE\NES\6502.s
   Uses
      At line 1427 in file ..\HARDWARE\NES\6502.s
Comment: _58 used once
_59 00000A62

Symbol: _59
   Definitions
      At line 403 in file ..\HARDWARE\NES\6502.s
   Uses
      At line 1427 in file ..\HARDWARE\NES\6502.s
Comment: _59 used once
_5D 00000A9C

Symbol: _5D



ARM Macro Assembler    Page 18 Alphabetic symbol ordering
Relocatable symbols

   Definitions
      At line 409 in file ..\HARDWARE\NES\6502.s
   Uses
      At line 1427 in file ..\HARDWARE\NES\6502.s
Comment: _5D used once
_5E 00000AD6

Symbol: _5E
   Definitions
      At line 415 in file ..\HARDWARE\NES\6502.s
   Uses
      At line 1427 in file ..\HARDWARE\NES\6502.s
Comment: _5E used once
_60 00000B24

Symbol: _60
   Definitions
      At line 421 in file ..\HARDWARE\NES\6502.s
   Uses
      At line 1428 in file ..\HARDWARE\NES\6502.s
Comment: _60 used once
_61 00000B6E

Symbol: _61
   Definitions
      At line 428 in file ..\HARDWARE\NES\6502.s
   Uses
      At line 1428 in file ..\HARDWARE\NES\6502.s
Comment: _61 used once
_65 00000BCC

Symbol: _65
   Definitions
      At line 434 in file ..\HARDWARE\NES\6502.s
   Uses
      At line 1428 in file ..\HARDWARE\NES\6502.s
Comment: _65 used once
_66 00000C02

Symbol: _66
   Definitions
      At line 440 in file ..\HARDWARE\NES\6502.s
   Uses
      At line 1428 in file ..\HARDWARE\NES\6502.s
Comment: _66 used once
_68 00000C34

Symbol: _68
   Definitions
      At line 446 in file ..\HARDWARE\NES\6502.s
   Uses
      At line 1428 in file ..\HARDWARE\NES\6502.s
Comment: _68 used once
_69 00000C5E

Symbol: _69
   Definitions
      At line 452 in file ..\HARDWARE\NES\6502.s
   Uses



ARM Macro Assembler    Page 19 Alphabetic symbol ordering
Relocatable symbols

      At line 1428 in file ..\HARDWARE\NES\6502.s
Comment: _69 used once
_6A 00000C90

Symbol: _6A
   Definitions
      At line 458 in file ..\HARDWARE\NES\6502.s
   Uses
      At line 1428 in file ..\HARDWARE\NES\6502.s
Comment: _6A used once
_6C 00000CB4

Symbol: _6C
   Definitions
      At line 467 in file ..\HARDWARE\NES\6502.s
   Uses
      At line 1428 in file ..\HARDWARE\NES\6502.s
Comment: _6C used once
_6D 00000D00

Symbol: _6D
   Definitions
      At line 484 in file ..\HARDWARE\NES\6502.s
   Uses
      At line 1428 in file ..\HARDWARE\NES\6502.s
Comment: _6D used once
_6E 00000D4A

Symbol: _6E
   Definitions
      At line 490 in file ..\HARDWARE\NES\6502.s
   Uses
      At line 1428 in file ..\HARDWARE\NES\6502.s
Comment: _6E used once
_70 00000DA0

Symbol: _70
   Definitions
      At line 496 in file ..\HARDWARE\NES\6502.s
   Uses
      At line 1429 in file ..\HARDWARE\NES\6502.s
Comment: _70 used once
_71 00000DC2

Symbol: _71
   Definitions
      At line 505 in file ..\HARDWARE\NES\6502.s
   Uses
      At line 1429 in file ..\HARDWARE\NES\6502.s
Comment: _71 used once
_75 00000E14

Symbol: _75
   Definitions
      At line 511 in file ..\HARDWARE\NES\6502.s
   Uses
      At line 1429 in file ..\HARDWARE\NES\6502.s
Comment: _75 used once
_76 00000E52



ARM Macro Assembler    Page 20 Alphabetic symbol ordering
Relocatable symbols


Symbol: _76
   Definitions
      At line 517 in file ..\HARDWARE\NES\6502.s
   Uses
      At line 1429 in file ..\HARDWARE\NES\6502.s
Comment: _76 used once
_78 00000E90

Symbol: _78
   Definitions
      At line 523 in file ..\HARDWARE\NES\6502.s
   Uses
      At line 1429 in file ..\HARDWARE\NES\6502.s
Comment: _78 used once
_79 00000EA6

Symbol: _79
   Definitions
      At line 528 in file ..\HARDWARE\NES\6502.s
   Uses
      At line 1429 in file ..\HARDWARE\NES\6502.s
Comment: _79 used once
_7D 00000EF4

Symbol: _7D
   Definitions
      At line 534 in file ..\HARDWARE\NES\6502.s
   Uses
      At line 1429 in file ..\HARDWARE\NES\6502.s
Comment: _7D used once
_7E 00000F42

Symbol: _7E
   Definitions
      At line 540 in file ..\HARDWARE\NES\6502.s
   Uses
      At line 1429 in file ..\HARDWARE\NES\6502.s
Comment: _7E used once
_81 00000F9C

Symbol: _81
   Definitions
      At line 546 in file ..\HARDWARE\NES\6502.s
   Uses
      At line 1430 in file ..\HARDWARE\NES\6502.s
Comment: _81 used once
_84 00000FE6

Symbol: _84
   Definitions
      At line 552 in file ..\HARDWARE\NES\6502.s
   Uses
      At line 1430 in file ..\HARDWARE\NES\6502.s
Comment: _84 used once
_85 00001004

Symbol: _85
   Definitions



ARM Macro Assembler    Page 21 Alphabetic symbol ordering
Relocatable symbols

      At line 558 in file ..\HARDWARE\NES\6502.s
   Uses
      At line 1430 in file ..\HARDWARE\NES\6502.s
Comment: _85 used once
_86 00001022

Symbol: _86
   Definitions
      At line 564 in file ..\HARDWARE\NES\6502.s
   Uses
      At line 1430 in file ..\HARDWARE\NES\6502.s
Comment: _86 used once
_88 00001040

Symbol: _88
   Definitions
      At line 570 in file ..\HARDWARE\NES\6502.s
   Uses
      At line 1430 in file ..\HARDWARE\NES\6502.s
Comment: _88 used once
_8A 0000105A

Symbol: _8A
   Definitions
      At line 576 in file ..\HARDWARE\NES\6502.s
   Uses
      At line 1430 in file ..\HARDWARE\NES\6502.s
Comment: _8A used once
_8C 00001072

Symbol: _8C
   Definitions
      At line 582 in file ..\HARDWARE\NES\6502.s
   Uses
      At line 1430 in file ..\HARDWARE\NES\6502.s
Comment: _8C used once
_8D 000010A8

Symbol: _8D
   Definitions
      At line 588 in file ..\HARDWARE\NES\6502.s
   Uses
      At line 1430 in file ..\HARDWARE\NES\6502.s
Comment: _8D used once
_8E 000010DE

Symbol: _8E
   Definitions
      At line 594 in file ..\HARDWARE\NES\6502.s
   Uses
      At line 1430 in file ..\HARDWARE\NES\6502.s
Comment: _8E used once
_90 00001114

Symbol: _90
   Definitions
      At line 600 in file ..\HARDWARE\NES\6502.s
   Uses
      At line 1431 in file ..\HARDWARE\NES\6502.s



ARM Macro Assembler    Page 22 Alphabetic symbol ordering
Relocatable symbols

Comment: _90 used once
_91 00001136

Symbol: _91
   Definitions
      At line 609 in file ..\HARDWARE\NES\6502.s
   Uses
      At line 1431 in file ..\HARDWARE\NES\6502.s
Comment: _91 used once
_94 00001174

Symbol: _94
   Definitions
      At line 615 in file ..\HARDWARE\NES\6502.s
   Uses
      At line 1431 in file ..\HARDWARE\NES\6502.s
Comment: _94 used once
_95 0000119A

Symbol: _95
   Definitions
      At line 621 in file ..\HARDWARE\NES\6502.s
   Uses
      At line 1431 in file ..\HARDWARE\NES\6502.s
Comment: _95 used once
_96 000011C0

Symbol: _96
   Definitions
      At line 627 in file ..\HARDWARE\NES\6502.s
   Uses
      At line 1431 in file ..\HARDWARE\NES\6502.s
Comment: _96 used once
_98 000011E6

Symbol: _98
   Definitions
      At line 633 in file ..\HARDWARE\NES\6502.s
   Uses
      At line 1431 in file ..\HARDWARE\NES\6502.s
Comment: _98 used once
_99 000011FE

Symbol: _99
   Definitions
      At line 639 in file ..\HARDWARE\NES\6502.s
   Uses
      At line 1431 in file ..\HARDWARE\NES\6502.s
Comment: _99 used once
_9A 00001238

Symbol: _9A
   Definitions
      At line 645 in file ..\HARDWARE\NES\6502.s
   Uses
      At line 1431 in file ..\HARDWARE\NES\6502.s
Comment: _9A used once
_9D 00001252




ARM Macro Assembler    Page 23 Alphabetic symbol ordering
Relocatable symbols

Symbol: _9D
   Definitions
      At line 651 in file ..\HARDWARE\NES\6502.s
   Uses
      At line 1431 in file ..\HARDWARE\NES\6502.s
Comment: _9D used once
_A0 0000128C

Symbol: _A0
   Definitions
      At line 657 in file ..\HARDWARE\NES\6502.s
   Uses
      At line 1432 in file ..\HARDWARE\NES\6502.s
Comment: _A0 used once
_A1 000012A6

Symbol: _A1
   Definitions
      At line 663 in file ..\HARDWARE\NES\6502.s
   Uses
      At line 1432 in file ..\HARDWARE\NES\6502.s
Comment: _A1 used once
_A2 000012F0

Symbol: _A2
   Definitions
      At line 669 in file ..\HARDWARE\NES\6502.s
   Uses
      At line 1432 in file ..\HARDWARE\NES\6502.s
Comment: _A2 used once
_A4 0000130A

Symbol: _A4
   Definitions
      At line 675 in file ..\HARDWARE\NES\6502.s
   Uses
      At line 1432 in file ..\HARDWARE\NES\6502.s
Comment: _A4 used once
_A5 00001328

Symbol: _A5
   Definitions
      At line 681 in file ..\HARDWARE\NES\6502.s
   Uses
      At line 1432 in file ..\HARDWARE\NES\6502.s
Comment: _A5 used once
_A6 00001346

Symbol: _A6
   Definitions
      At line 687 in file ..\HARDWARE\NES\6502.s
   Uses
      At line 1432 in file ..\HARDWARE\NES\6502.s
Comment: _A6 used once
_A8 00001364

Symbol: _A8
   Definitions
      At line 693 in file ..\HARDWARE\NES\6502.s



ARM Macro Assembler    Page 24 Alphabetic symbol ordering
Relocatable symbols

   Uses
      At line 1432 in file ..\HARDWARE\NES\6502.s
Comment: _A8 used once
_A9 0000137C

Symbol: _A9
   Definitions
      At line 699 in file ..\HARDWARE\NES\6502.s
   Uses
      At line 1432 in file ..\HARDWARE\NES\6502.s
Comment: _A9 used once
_AA 00001396

Symbol: _AA
   Definitions
      At line 705 in file ..\HARDWARE\NES\6502.s
   Uses
      At line 1432 in file ..\HARDWARE\NES\6502.s
Comment: _AA used once
_AC 000013AE

Symbol: _AC
   Definitions
      At line 711 in file ..\HARDWARE\NES\6502.s
   Uses
      At line 1432 in file ..\HARDWARE\NES\6502.s
Comment: _AC used once
_AD 000013E4

Symbol: _AD
   Definitions
      At line 717 in file ..\HARDWARE\NES\6502.s
   Uses
      At line 1432 in file ..\HARDWARE\NES\6502.s
Comment: _AD used once
_AE 0000141A

Symbol: _AE
   Definitions
      At line 723 in file ..\HARDWARE\NES\6502.s
   Uses
      At line 1432 in file ..\HARDWARE\NES\6502.s
Comment: _AE used once
_B0 00001450

Symbol: _B0
   Definitions
      At line 729 in file ..\HARDWARE\NES\6502.s
   Uses
      At line 1433 in file ..\HARDWARE\NES\6502.s
Comment: _B0 used once
_B1 00001472

Symbol: _B1
   Definitions
      At line 738 in file ..\HARDWARE\NES\6502.s
   Uses
      At line 1433 in file ..\HARDWARE\NES\6502.s
Comment: _B1 used once



ARM Macro Assembler    Page 25 Alphabetic symbol ordering
Relocatable symbols

_B4 000014B0

Symbol: _B4
   Definitions
      At line 744 in file ..\HARDWARE\NES\6502.s
   Uses
      At line 1433 in file ..\HARDWARE\NES\6502.s
Comment: _B4 used once
_B5 000014D6

Symbol: _B5
   Definitions
      At line 750 in file ..\HARDWARE\NES\6502.s
   Uses
      At line 1433 in file ..\HARDWARE\NES\6502.s
Comment: _B5 used once
_B6 000014FC

Symbol: _B6
   Definitions
      At line 756 in file ..\HARDWARE\NES\6502.s
   Uses
      At line 1433 in file ..\HARDWARE\NES\6502.s
Comment: _B6 used once
_B8 00001522

Symbol: _B8
   Definitions
      At line 762 in file ..\HARDWARE\NES\6502.s
   Uses
      At line 1433 in file ..\HARDWARE\NES\6502.s
Comment: _B8 used once
_B9 00001538

Symbol: _B9
   Definitions
      At line 767 in file ..\HARDWARE\NES\6502.s
   Uses
      At line 1433 in file ..\HARDWARE\NES\6502.s
Comment: _B9 used once
_BA 00001572

Symbol: _BA
   Definitions
      At line 773 in file ..\HARDWARE\NES\6502.s
   Uses
      At line 1433 in file ..\HARDWARE\NES\6502.s
Comment: _BA used once
_BC 00001590

Symbol: _BC
   Definitions
      At line 780 in file ..\HARDWARE\NES\6502.s
   Uses
      At line 1433 in file ..\HARDWARE\NES\6502.s
Comment: _BC used once
_BD 000015CA

Symbol: _BD



ARM Macro Assembler    Page 26 Alphabetic symbol ordering
Relocatable symbols

   Definitions
      At line 786 in file ..\HARDWARE\NES\6502.s
   Uses
      At line 1433 in file ..\HARDWARE\NES\6502.s
Comment: _BD used once
_BE 00001604

Symbol: _BE
   Definitions
      At line 792 in file ..\HARDWARE\NES\6502.s
   Uses
      At line 1433 in file ..\HARDWARE\NES\6502.s
Comment: _BE used once
_C0 0000163E

Symbol: _C0
   Definitions
      At line 798 in file ..\HARDWARE\NES\6502.s
   Uses
      At line 1434 in file ..\HARDWARE\NES\6502.s
Comment: _C0 used once
_C1 00001660

Symbol: _C1
   Definitions
      At line 804 in file ..\HARDWARE\NES\6502.s
   Uses
      At line 1434 in file ..\HARDWARE\NES\6502.s
Comment: _C1 used once
_C4 000016AE

Symbol: _C4
   Definitions
      At line 810 in file ..\HARDWARE\NES\6502.s
   Uses
      At line 1434 in file ..\HARDWARE\NES\6502.s
Comment: _C4 used once
_C5 000016D4

Symbol: _C5
   Definitions
      At line 816 in file ..\HARDWARE\NES\6502.s
   Uses
      At line 1434 in file ..\HARDWARE\NES\6502.s
Comment: _C5 used once
_C6 000016FA

Symbol: _C6
   Definitions
      At line 822 in file ..\HARDWARE\NES\6502.s
   Uses
      At line 1434 in file ..\HARDWARE\NES\6502.s
Comment: _C6 used once
_C8 00001720

Symbol: _C8
   Definitions
      At line 828 in file ..\HARDWARE\NES\6502.s
   Uses



ARM Macro Assembler    Page 27 Alphabetic symbol ordering
Relocatable symbols

      At line 1434 in file ..\HARDWARE\NES\6502.s
Comment: _C8 used once
_C9 0000173A

Symbol: _C9
   Definitions
      At line 834 in file ..\HARDWARE\NES\6502.s
   Uses
      At line 1434 in file ..\HARDWARE\NES\6502.s
Comment: _C9 used once
_CA 0000175C

Symbol: _CA
   Definitions
      At line 840 in file ..\HARDWARE\NES\6502.s
   Uses
      At line 1434 in file ..\HARDWARE\NES\6502.s
Comment: _CA used once
_CC 00001776

Symbol: _CC
   Definitions
      At line 846 in file ..\HARDWARE\NES\6502.s
   Uses
      At line 1434 in file ..\HARDWARE\NES\6502.s
Comment: _CC used once
_CD 000017B0

Symbol: _CD
   Definitions
      At line 852 in file ..\HARDWARE\NES\6502.s
   Uses
      At line 1434 in file ..\HARDWARE\NES\6502.s
Comment: _CD used once
_CE 000017EA

Symbol: _CE
   Definitions
      At line 858 in file ..\HARDWARE\NES\6502.s
   Uses
      At line 1434 in file ..\HARDWARE\NES\6502.s
Comment: _CE used once
_D0 00001834

Symbol: _D0
   Definitions
      At line 864 in file ..\HARDWARE\NES\6502.s
   Uses
      At line 1435 in file ..\HARDWARE\NES\6502.s
Comment: _D0 used once
_D1 00001856

Symbol: _D1
   Definitions
      At line 873 in file ..\HARDWARE\NES\6502.s
   Uses
      At line 1435 in file ..\HARDWARE\NES\6502.s
Comment: _D1 used once
_D5 00001898



ARM Macro Assembler    Page 28 Alphabetic symbol ordering
Relocatable symbols


Symbol: _D5
   Definitions
      At line 879 in file ..\HARDWARE\NES\6502.s
   Uses
      At line 1435 in file ..\HARDWARE\NES\6502.s
Comment: _D5 used once
_D6 000018C6

Symbol: _D6
   Definitions
      At line 885 in file ..\HARDWARE\NES\6502.s
   Uses
      At line 1435 in file ..\HARDWARE\NES\6502.s
Comment: _D6 used once
_D8 000018F8

Symbol: _D8
   Definitions
      At line 891 in file ..\HARDWARE\NES\6502.s
   Uses
      At line 1435 in file ..\HARDWARE\NES\6502.s
Comment: _D8 used once
_D9 0000190E

Symbol: _D9
   Definitions
      At line 896 in file ..\HARDWARE\NES\6502.s
   Uses
      At line 1435 in file ..\HARDWARE\NES\6502.s
Comment: _D9 used once
_DD 0000194C

Symbol: _DD
   Definitions
      At line 902 in file ..\HARDWARE\NES\6502.s
   Uses
      At line 1435 in file ..\HARDWARE\NES\6502.s
Comment: _DD used once
_DE 0000198A

Symbol: _DE
   Definitions
      At line 908 in file ..\HARDWARE\NES\6502.s
   Uses
      At line 1435 in file ..\HARDWARE\NES\6502.s
Comment: _DE used once
_E0 000019D8

Symbol: _E0
   Definitions
      At line 914 in file ..\HARDWARE\NES\6502.s
   Uses
      At line 1436 in file ..\HARDWARE\NES\6502.s
Comment: _E0 used once
_E1 000019FA

Symbol: _E1
   Definitions



ARM Macro Assembler    Page 29 Alphabetic symbol ordering
Relocatable symbols

      At line 920 in file ..\HARDWARE\NES\6502.s
   Uses
      At line 1436 in file ..\HARDWARE\NES\6502.s
Comment: _E1 used once
_E4 00001A56

Symbol: _E4
   Definitions
      At line 926 in file ..\HARDWARE\NES\6502.s
   Uses
      At line 1436 in file ..\HARDWARE\NES\6502.s
Comment: _E4 used once
_E5 00001A7C

Symbol: _E5
   Definitions
      At line 932 in file ..\HARDWARE\NES\6502.s
   Uses
      At line 1436 in file ..\HARDWARE\NES\6502.s
Comment: _E5 used once
_E6 00001AB0

Symbol: _E6
   Definitions
      At line 938 in file ..\HARDWARE\NES\6502.s
   Uses
      At line 1436 in file ..\HARDWARE\NES\6502.s
Comment: _E6 used once
_E8 00001AD6

Symbol: _E8
   Definitions
      At line 944 in file ..\HARDWARE\NES\6502.s
   Uses
      At line 1436 in file ..\HARDWARE\NES\6502.s
Comment: _E8 used once
_E9 00001AF0

Symbol: _E9
   Definitions
      At line 950 in file ..\HARDWARE\NES\6502.s
   Uses
      At line 1436 in file ..\HARDWARE\NES\6502.s
Comment: _E9 used once
_EA 00001B20

Symbol: _EA
   Definitions
      At line 956 in file ..\HARDWARE\NES\6502.s
   Uses
      At line 1436 in file ..\HARDWARE\NES\6502.s
Comment: _EA used once
_EC 00001B32

Symbol: _EC
   Definitions
      At line 960 in file ..\HARDWARE\NES\6502.s
   Uses
      At line 1436 in file ..\HARDWARE\NES\6502.s



ARM Macro Assembler    Page 30 Alphabetic symbol ordering
Relocatable symbols

Comment: _EC used once
_ED 00001B6C

Symbol: _ED
   Definitions
      At line 966 in file ..\HARDWARE\NES\6502.s
   Uses
      At line 1436 in file ..\HARDWARE\NES\6502.s
Comment: _ED used once
_EE 00001BB4

Symbol: _EE
   Definitions
      At line 972 in file ..\HARDWARE\NES\6502.s
   Uses
      At line 1436 in file ..\HARDWARE\NES\6502.s
Comment: _EE used once
_F0 00001BFE

Symbol: _F0
   Definitions
      At line 978 in file ..\HARDWARE\NES\6502.s
   Uses
      At line 1437 in file ..\HARDWARE\NES\6502.s
Comment: _F0 used once
_F1 00001C20

Symbol: _F1
   Definitions
      At line 987 in file ..\HARDWARE\NES\6502.s
   Uses
      At line 1437 in file ..\HARDWARE\NES\6502.s
Comment: _F1 used once
_F5 00001C70

Symbol: _F5
   Definitions
      At line 993 in file ..\HARDWARE\NES\6502.s
   Uses
      At line 1437 in file ..\HARDWARE\NES\6502.s
Comment: _F5 used once
_F6 00001CAC

Symbol: _F6
   Definitions
      At line 999 in file ..\HARDWARE\NES\6502.s
   Uses
      At line 1437 in file ..\HARDWARE\NES\6502.s
Comment: _F6 used once
_F8 00001CDE

Symbol: _F8
   Definitions
      At line 1005 in file ..\HARDWARE\NES\6502.s
   Uses
      At line 1437 in file ..\HARDWARE\NES\6502.s
Comment: _F8 used once
_F9 00001CF4




ARM Macro Assembler    Page 31 Alphabetic symbol ordering
Relocatable symbols

Symbol: _F9
   Definitions
      At line 1010 in file ..\HARDWARE\NES\6502.s
   Uses
      At line 1437 in file ..\HARDWARE\NES\6502.s
Comment: _F9 used once
_FD 00001D40

Symbol: _FD
   Definitions
      At line 1016 in file ..\HARDWARE\NES\6502.s
   Uses
      At line 1437 in file ..\HARDWARE\NES\6502.s
Comment: _FD used once
_FE 00001D8C

Symbol: _FE
   Definitions
      At line 1022 in file ..\HARDWARE\NES\6502.s
   Uses
      At line 1437 in file ..\HARDWARE\NES\6502.s
Comment: _FE used once
cpu_code 00000000

Symbol: cpu_code
   Definitions
      At line 30 in file ..\HARDWARE\NES\6502.s
   Uses
      None
Comment: cpu_code unused
225 symbols



ARM Macro Assembler    Page 1 Alphabetic symbol ordering
Relocatable symbols

CPU_reset 00000118

Symbol: CPU_reset
   Definitions
      At line 1134 in file ..\HARDWARE\NES\6502.s
   Uses
      At line 12 in file ..\HARDWARE\NES\6502.s
Comment: CPU_reset used once
CheckI 00000072

Symbol: CheckI
   Definitions
      At line 1087 in file ..\HARDWARE\NES\6502.s
   Uses
      None
Comment: CheckI unused
Vec6502 00000092

Symbol: Vec6502
   Definitions
      At line 1098 in file ..\HARDWARE\NES\6502.s
   Uses
      At line 1072 in file ..\HARDWARE\NES\6502.s
      At line 1095 in file ..\HARDWARE\NES\6502.s
      At line 1147 in file ..\HARDWARE\NES\6502.s

VecCont 000000CE

Symbol: VecCont
   Definitions
      At line 1105 in file ..\HARDWARE\NES\6502.s
   Uses
      At line 78 in file ..\HARDWARE\NES\6502.s
Comment: VecCont used once
_xx 00000106

Symbol: _xx
   Definitions
      At line 1123 in file ..\HARDWARE\NES\6502.s
   Uses
      At line 1422 in file ..\HARDWARE\NES\6502.s
      At line 1422 in file ..\HARDWARE\NES\6502.s
      At line 1422 in file ..\HARDWARE\NES\6502.s
      At line 1422 in file ..\HARDWARE\NES\6502.s
      At line 1422 in file ..\HARDWARE\NES\6502.s
      At line 1422 in file ..\HARDWARE\NES\6502.s
      At line 1422 in file ..\HARDWARE\NES\6502.s
      At line 1423 in file ..\HARDWARE\NES\6502.s
      At line 1423 in file ..\HARDWARE\NES\6502.s
      At line 1423 in file ..\HARDWARE\NES\6502.s
      At line 1423 in file ..\HARDWARE\NES\6502.s
      At line 1423 in file ..\HARDWARE\NES\6502.s
      At line 1423 in file ..\HARDWARE\NES\6502.s
      At line 1423 in file ..\HARDWARE\NES\6502.s
      At line 1423 in file ..\HARDWARE\NES\6502.s
      At line 1424 in file ..\HARDWARE\NES\6502.s
      At line 1424 in file ..\HARDWARE\NES\6502.s
      At line 1424 in file ..\HARDWARE\NES\6502.s
      At line 1424 in file ..\HARDWARE\NES\6502.s



ARM Macro Assembler    Page 2 Alphabetic symbol ordering
Relocatable symbols

      At line 1424 in file ..\HARDWARE\NES\6502.s
      At line 1425 in file ..\HARDWARE\NES\6502.s
      At line 1425 in file ..\HARDWARE\NES\6502.s
      At line 1425 in file ..\HARDWARE\NES\6502.s
      At line 1425 in file ..\HARDWARE\NES\6502.s
      At line 1425 in file ..\HARDWARE\NES\6502.s
      At line 1425 in file ..\HARDWARE\NES\6502.s
      At line 1425 in file ..\HARDWARE\NES\6502.s
      At line 1425 in file ..\HARDWARE\NES\6502.s
      At line 1426 in file ..\HARDWARE\NES\6502.s
      At line 1426 in file ..\HARDWARE\NES\6502.s
      At line 1426 in file ..\HARDWARE\NES\6502.s
      At line 1426 in file ..\HARDWARE\NES\6502.s
      At line 1426 in file ..\HARDWARE\NES\6502.s
      At line 1426 in file ..\HARDWARE\NES\6502.s
      At line 1427 in file ..\HARDWARE\NES\6502.s
      At line 1427 in file ..\HARDWARE\NES\6502.s
      At line 1427 in file ..\HARDWARE\NES\6502.s
      At line 1427 in file ..\HARDWARE\NES\6502.s
      At line 1427 in file ..\HARDWARE\NES\6502.s
      At line 1427 in file ..\HARDWARE\NES\6502.s
      At line 1427 in file ..\HARDWARE\NES\6502.s
      At line 1427 in file ..\HARDWARE\NES\6502.s
      At line 1428 in file ..\HARDWARE\NES\6502.s
      At line 1428 in file ..\HARDWARE\NES\6502.s
      At line 1428 in file ..\HARDWARE\NES\6502.s
      At line 1428 in file ..\HARDWARE\NES\6502.s
      At line 1428 in file ..\HARDWARE\NES\6502.s
      At line 1428 in file ..\HARDWARE\NES\6502.s
      At line 1429 in file ..\HARDWARE\NES\6502.s
      At line 1429 in file ..\HARDWARE\NES\6502.s
      At line 1429 in file ..\HARDWARE\NES\6502.s
      At line 1429 in file ..\HARDWARE\NES\6502.s
      At line 1429 in file ..\HARDWARE\NES\6502.s
      At line 1429 in file ..\HARDWARE\NES\6502.s
      At line 1429 in file ..\HARDWARE\NES\6502.s
      At line 1429 in file ..\HARDWARE\NES\6502.s
      At line 1430 in file ..\HARDWARE\NES\6502.s
      At line 1430 in file ..\HARDWARE\NES\6502.s
      At line 1430 in file ..\HARDWARE\NES\6502.s
      At line 1430 in file ..\HARDWARE\NES\6502.s
      At line 1430 in file ..\HARDWARE\NES\6502.s
      At line 1430 in file ..\HARDWARE\NES\6502.s
      At line 1430 in file ..\HARDWARE\NES\6502.s
      At line 1431 in file ..\HARDWARE\NES\6502.s
      At line 1431 in file ..\HARDWARE\NES\6502.s
      At line 1431 in file ..\HARDWARE\NES\6502.s
      At line 1431 in file ..\HARDWARE\NES\6502.s
      At line 1431 in file ..\HARDWARE\NES\6502.s
      At line 1431 in file ..\HARDWARE\NES\6502.s
      At line 1431 in file ..\HARDWARE\NES\6502.s
      At line 1432 in file ..\HARDWARE\NES\6502.s
      At line 1432 in file ..\HARDWARE\NES\6502.s
      At line 1432 in file ..\HARDWARE\NES\6502.s
      At line 1432 in file ..\HARDWARE\NES\6502.s
      At line 1433 in file ..\HARDWARE\NES\6502.s
      At line 1433 in file ..\HARDWARE\NES\6502.s
      At line 1433 in file ..\HARDWARE\NES\6502.s
      At line 1433 in file ..\HARDWARE\NES\6502.s



ARM Macro Assembler    Page 3 Alphabetic symbol ordering
Relocatable symbols

      At line 1433 in file ..\HARDWARE\NES\6502.s
      At line 1434 in file ..\HARDWARE\NES\6502.s
      At line 1434 in file ..\HARDWARE\NES\6502.s
      At line 1434 in file ..\HARDWARE\NES\6502.s
      At line 1434 in file ..\HARDWARE\NES\6502.s
      At line 1434 in file ..\HARDWARE\NES\6502.s
      At line 1435 in file ..\HARDWARE\NES\6502.s
      At line 1435 in file ..\HARDWARE\NES\6502.s
      At line 1435 in file ..\HARDWARE\NES\6502.s
      At line 1435 in file ..\HARDWARE\NES\6502.s
      At line 1435 in file ..\HARDWARE\NES\6502.s
      At line 1435 in file ..\HARDWARE\NES\6502.s
      At line 1435 in file ..\HARDWARE\NES\6502.s
      At line 1435 in file ..\HARDWARE\NES\6502.s
      At line 1436 in file ..\HARDWARE\NES\6502.s
      At line 1436 in file ..\HARDWARE\NES\6502.s
      At line 1436 in file ..\HARDWARE\NES\6502.s
      At line 1436 in file ..\HARDWARE\NES\6502.s
      At line 1436 in file ..\HARDWARE\NES\6502.s
      At line 1437 in file ..\HARDWARE\NES\6502.s
      At line 1437 in file ..\HARDWARE\NES\6502.s
      At line 1437 in file ..\HARDWARE\NES\6502.s
      At line 1437 in file ..\HARDWARE\NES\6502.s
      At line 1437 in file ..\HARDWARE\NES\6502.s
      At line 1437 in file ..\HARDWARE\NES\6502.s
      At line 1437 in file ..\HARDWARE\NES\6502.s
      At line 1437 in file ..\HARDWARE\NES\6502.s

cpu_run 00000000

Symbol: cpu_run
   Definitions
      At line 1029 in file ..\HARDWARE\NES\6502.s
   Uses
      None
Comment: cpu_run unused
default_scanlinehook 00000060

Symbol: default_scanlinehook
   Definitions
      At line 1084 in file ..\HARDWARE\NES\6502.s
   Uses
      At line 1090 in file ..\HARDWARE\NES\6502.s
Comment: default_scanlinehook used once
exit_run 00000028

Symbol: exit_run
   Definitions
      At line 1054 in file ..\HARDWARE\NES\6502.s
   Uses
      At line 1152 in file ..\HARDWARE\NES\6502.s
Comment: exit_run used once
irq6502 00000078

Symbol: irq6502
   Definitions
      At line 1092 in file ..\HARDWARE\NES\6502.s
   Uses
      None



ARM Macro Assembler    Page 4 Alphabetic symbol ordering
Relocatable symbols

Comment: irq6502 unused
line242NMI 00000034

Symbol: line242NMI
   Definitions
      At line 1063 in file ..\HARDWARE\NES\6502.s
   Uses
      At line 11 in file ..\HARDWARE\NES\6502.s
Comment: line242NMI used once
run 00000000

Symbol: run
   Definitions
      At line 1030 in file ..\HARDWARE\NES\6502.s
   Uses
      At line 13 in file ..\HARDWARE\NES\6502.s
Comment: run used once
11 symbols



ARM Macro Assembler    Page 1 Alphabetic symbol ordering
Relocatable symbols

empty_R 00000000

Symbol: empty_R
   Definitions
      At line 1164 in file ..\HARDWARE\NES\6502.s
   Uses
      At line 1169 in file ..\HARDWARE\NES\6502.s
      At line 1253 in file ..\HARDWARE\NES\6502.s
      At line 1259 in file ..\HARDWARE\NES\6502.s

ram_R 00000008

Symbol: ram_R
   Definitions
      At line 1178 in file ..\HARDWARE\NES\6502.s
   Uses
      At line 1439 in file ..\HARDWARE\NES\6502.s
Comment: ram_R used once
ram_W 00000016

Symbol: ram_W
   Definitions
      At line 1185 in file ..\HARDWARE\NES\6502.s
   Uses
      At line 1448 in file ..\HARDWARE\NES\6502.s
Comment: ram_W used once
rom_R60 00000024

Symbol: rom_R60
   Definitions
      At line 1194 in file ..\HARDWARE\NES\6502.s
   Uses
      None
Comment: rom_R60 unused
rom_R80 00000032

Symbol: rom_R80
   Definitions
      At line 1201 in file ..\HARDWARE\NES\6502.s
   Uses
      At line 1443 in file ..\HARDWARE\NES\6502.s
Comment: rom_R80 used once
rom_RA0 00000040

Symbol: rom_RA0
   Definitions
      At line 1208 in file ..\HARDWARE\NES\6502.s
   Uses
      At line 1444 in file ..\HARDWARE\NES\6502.s
Comment: rom_RA0 used once
rom_RC0 0000004E

Symbol: rom_RC0
   Definitions
      At line 1215 in file ..\HARDWARE\NES\6502.s
   Uses
      At line 1445 in file ..\HARDWARE\NES\6502.s
Comment: rom_RC0 used once
rom_RE0 0000005C



ARM Macro Assembler    Page 2 Alphabetic symbol ordering
Relocatable symbols


Symbol: rom_RE0
   Definitions
      At line 1222 in file ..\HARDWARE\NES\6502.s
   Uses
      At line 1446 in file ..\HARDWARE\NES\6502.s
Comment: rom_RE0 used once
rwram_code 00000000

Symbol: rwram_code
   Definitions
      At line 1160 in file ..\HARDWARE\NES\6502.s
   Uses
      None
Comment: rwram_code unused
void 00000002

Symbol: void
   Definitions
      At line 1171 in file ..\HARDWARE\NES\6502.s
   Uses
      At line 1263 in file ..\HARDWARE\NES\6502.s
      At line 1265 in file ..\HARDWARE\NES\6502.s
      At line 1280 in file ..\HARDWARE\NES\6502.s
      At line 1281 in file ..\HARDWARE\NES\6502.s
      At line 1282 in file ..\HARDWARE\NES\6502.s
      At line 1283 in file ..\HARDWARE\NES\6502.s
      At line 1284 in file ..\HARDWARE\NES\6502.s
      At line 1285 in file ..\HARDWARE\NES\6502.s
      At line 1286 in file ..\HARDWARE\NES\6502.s
      At line 1287 in file ..\HARDWARE\NES\6502.s
      At line 1288 in file ..\HARDWARE\NES\6502.s
      At line 1289 in file ..\HARDWARE\NES\6502.s
      At line 1290 in file ..\HARDWARE\NES\6502.s
      At line 1291 in file ..\HARDWARE\NES\6502.s
      At line 1292 in file ..\HARDWARE\NES\6502.s
      At line 1293 in file ..\HARDWARE\NES\6502.s
      At line 1294 in file ..\HARDWARE\NES\6502.s
      At line 1295 in file ..\HARDWARE\NES\6502.s
      At line 1296 in file ..\HARDWARE\NES\6502.s
      At line 1297 in file ..\HARDWARE\NES\6502.s
      At line 1298 in file ..\HARDWARE\NES\6502.s
      At line 1299 in file ..\HARDWARE\NES\6502.s
      At line 1301 in file ..\HARDWARE\NES\6502.s
      At line 1304 in file ..\HARDWARE\NES\6502.s
      At line 1442 in file ..\HARDWARE\NES\6502.s
      At line 1451 in file ..\HARDWARE\NES\6502.s
      At line 1452 in file ..\HARDWARE\NES\6502.s
      At line 1453 in file ..\HARDWARE\NES\6502.s
      At line 1454 in file ..\HARDWARE\NES\6502.s
      At line 1455 in file ..\HARDWARE\NES\6502.s

10 symbols



ARM Macro Assembler    Page 1 Alphabetic symbol ordering
Relocatable symbols

IO_R 00000000

Symbol: IO_R
   Definitions
      At line 1245 in file ..\HARDWARE\NES\6502.s
   Uses
      At line 1441 in file ..\HARDWARE\NES\6502.s
Comment: IO_R used once
IO_W 00000028

Symbol: IO_W
   Definitions
      At line 1267 in file ..\HARDWARE\NES\6502.s
   Uses
      At line 1450 in file ..\HARDWARE\NES\6502.s
Comment: IO_W used once
copy_ 000000BA

Symbol: copy_
   Definitions
      At line 1322 in file ..\HARDWARE\NES\6502.s
   Uses
      At line 1326 in file ..\HARDWARE\NES\6502.s
Comment: copy_ used once
dma_W 00000098

Symbol: dma_W
   Definitions
      At line 1307 in file ..\HARDWARE\NES\6502.s
   Uses
      At line 1300 in file ..\HARDWARE\NES\6502.s
Comment: dma_W used once
io_code 00000000

Symbol: io_code
   Definitions
      At line 1241 in file ..\HARDWARE\NES\6502.s
   Uses
      None
Comment: io_code unused
io_read_tbl 0000001C

Symbol: io_read_tbl
   Definitions
      At line 1262 in file ..\HARDWARE\NES\6502.s
   Uses
      At line 1256 in file ..\HARDWARE\NES\6502.s
Comment: io_read_tbl used once
io_write_tbl 00000038

Symbol: io_write_tbl
   Definitions
      At line 1279 in file ..\HARDWARE\NES\6502.s
   Uses
      At line 1273 in file ..\HARDWARE\NES\6502.s
Comment: io_write_tbl used once
joy0_R 00000116

Symbol: joy0_R



ARM Macro Assembler    Page 2 Alphabetic symbol ordering
Relocatable symbols

   Definitions
      At line 1372 in file ..\HARDWARE\NES\6502.s
   Uses
      At line 1264 in file ..\HARDWARE\NES\6502.s
Comment: joy0_R used once
joy0_W 000000D0

Symbol: joy0_W
   Definitions
      At line 1334 in file ..\HARDWARE\NES\6502.s
   Uses
      At line 1303 in file ..\HARDWARE\NES\6502.s
Comment: joy0_W used once
joy1_R 00000130

Symbol: joy1_R
   Definitions
      At line 1384 in file ..\HARDWARE\NES\6502.s
   Uses
      None
Comment: joy1_R unused
joypad_write_ptr 00000090

Symbol: joypad_write_ptr
   Definitions
      At line 1302 in file ..\HARDWARE\NES\6502.s
   Uses
      None
Comment: joypad_write_ptr unused
11 symbols



ARM Macro Assembler    Page 1 Alphabetic symbol ordering
Relocatable symbols

CPU_GPU 00000000

Symbol: CPU_GPU
   Definitions
      At line 1393 in file ..\HARDWARE\NES\6502.s
   Uses
      None
Comment: CPU_GPU unused
PPU_R 00000014

Symbol: PPU_R
   Definitions
      At line 1410 in file ..\HARDWARE\NES\6502.s
   Uses
      At line 1440 in file ..\HARDWARE\NES\6502.s
Comment: PPU_R used once
PPU_W 00000000

Symbol: PPU_W
   Definitions
      At line 1398 in file ..\HARDWARE\NES\6502.s
   Uses
      At line 1449 in file ..\HARDWARE\NES\6502.s
Comment: PPU_W used once
3 symbols



ARM Macro Assembler    Page 1 Alphabetic symbol ordering
Relocatable symbols

cpustate 00000460

Symbol: cpustate
   Definitions
      At line 1463 in file ..\HARDWARE\NES\6502.s
   Uses
      None
Comment: cpustate unused
op_table 00000000

Symbol: op_table
   Definitions
      At line 1421 in file ..\HARDWARE\NES\6502.s
   Uses
      At line 10 in file ..\HARDWARE\NES\6502.s
      At line 1035 in file ..\HARDWARE\NES\6502.s
      At line 1065 in file ..\HARDWARE\NES\6502.s

rommap 00000450

Symbol: rommap
   Definitions
      At line 1461 in file ..\HARDWARE\NES\6502.s
   Uses
      None
Comment: rommap unused
wram_globals0 00000000

Symbol: wram_globals0
   Definitions
      At line 1420 in file ..\HARDWARE\NES\6502.s
   Uses
      None
Comment: wram_globals0 unused
4 symbols



ARM Macro Assembler    Page 1 Alphabetic symbol ordering
Absolute symbols

B 00000010

Symbol: B
   Definitions
      At line 6 in file ..\HARDWARE\NES\6502mac.h
   Uses
      At line 33 in macro vcodeP
      at line 75 in file ..\HARDWARE\NES\6502.s
Comment: B used once
C 00000001

Symbol: C
   Definitions
      At line 2 in file ..\HARDWARE\NES\6502mac.h
   Uses
      At line 39 in macro zcodeP
      at line 220 in file ..\HARDWARE\NES\6502.s
Comment: C used once
CYC_C 00000001

Symbol: CYC_C
   Definitions
      At line 21 in file ..\HARDWARE\NES\6502.s
   Uses
      At line 28 in macro vcodeP
      at line 75 in file ..\HARDWARE\NES\6502.s
      At line 373 in macro JASL
      at line 98 in file ..\HARDWARE\NES\6502.s
      At line 117 in file ..\HARDWARE\NES\6502.s
      At line 161 in file ..\HARDWARE\NES\6502.s
      At line 38 in macro zcodeP
      at line 220 in file ..\HARDWARE\NES\6502.s
      At line 285 in file ..\HARDWARE\NES\6502.s
      At line 436 in macro \LSR
      at line 329 in file ..\HARDWARE\NES\6502.s
      At line 348 in file ..\HARDWARE\NES\6502.s
      At line 429 in macro \LSR
      at line 368 in file ..\HARDWARE\NES\6502.s
      At line 445 in macro \LSR
      at line 395 in file ..\HARDWARE\NES\6502.s
      At line 357 in macro FADC
      at line 431 in file ..\HARDWARE\NES\6502.s
      At line 602 in file ..\HARDWARE\NES\6502.s
      At line 731 in file ..\HARDWARE\NES\6502.s
      At line 392 in macro NCOMP
      at line 801 in file ..\HARDWARE\NES\6502.s
      At line 488 in macro dSBC
      at line 923 in file ..\HARDWARE\NES\6502.s

CYC_D 00000008

Symbol: CYC_D
   Definitions
      At line 24 in file ..\HARDWARE\NES\6502.s
   Uses
      At line 28 in macro vcodeP
      at line 75 in file ..\HARDWARE\NES\6502.s
      At line 38 in macro zcodeP
      at line 220 in file ..\HARDWARE\NES\6502.s



ARM Macro Assembler    Page 2 Alphabetic symbol ordering
Absolute symbols

      At line 893 in file ..\HARDWARE\NES\6502.s
      At line 1007 in file ..\HARDWARE\NES\6502.s

CYC_I 00000004

Symbol: CYC_I
   Definitions
      At line 23 in file ..\HARDWARE\NES\6502.s
   Uses
      At line 28 in macro vcodeP
      at line 75 in file ..\HARDWARE\NES\6502.s
      At line 38 in macro zcodeP
      at line 220 in file ..\HARDWARE\NES\6502.s
      At line 400 in file ..\HARDWARE\NES\6502.s
      At line 525 in file ..\HARDWARE\NES\6502.s
      At line 1089 in file ..\HARDWARE\NES\6502.s
      At line 1108 in file ..\HARDWARE\NES\6502.s

CYC_V 00000040

Symbol: CYC_V
   Definitions
      At line 25 in file ..\HARDWARE\NES\6502.s
   Uses
      At line 28 in macro vcodeP
      at line 75 in file ..\HARDWARE\NES\6502.s
      At line 380 in macro LBIT
      at line 202 in file ..\HARDWARE\NES\6502.s
      At line 382 in macro LBIT
      at line 202 in file ..\HARDWARE\NES\6502.s
      At line 38 in macro zcodeP
      at line 220 in file ..\HARDWARE\NES\6502.s
      At line 373 in file ..\HARDWARE\NES\6502.s
      At line 357 in macro FADC
      at line 431 in file ..\HARDWARE\NES\6502.s
      At line 358 in macro FADC
      at line 431 in file ..\HARDWARE\NES\6502.s
      At line 498 in file ..\HARDWARE\NES\6502.s
      At line 764 in file ..\HARDWARE\NES\6502.s
      At line 488 in macro dSBC
      at line 923 in file ..\HARDWARE\NES\6502.s
      At line 489 in macro dSBC
      at line 923 in file ..\HARDWARE\NES\6502.s

D 00000008

Symbol: D
   Definitions
      At line 5 in file ..\HARDWARE\NES\6502mac.h
   Uses
      At line 39 in macro zcodeP
      at line 220 in file ..\HARDWARE\NES\6502.s
Comment: D used once
I 00000004

Symbol: I
   Definitions
      At line 4 in file ..\HARDWARE\NES\6502mac.h
   Uses



ARM Macro Assembler    Page 3 Alphabetic symbol ordering
Absolute symbols

      At line 39 in macro zcodeP
      at line 220 in file ..\HARDWARE\NES\6502.s
Comment: I used once
IRQ_VECTOR 0000FFFE

Symbol: IRQ_VECTOR
   Definitions
      At line 15 in file ..\HARDWARE\NES\6502.s
   Uses
      At line 77 in file ..\HARDWARE\NES\6502.s
      At line 1094 in file ..\HARDWARE\NES\6502.s

N 00000080

Symbol: N
   Definitions
      At line 9 in file ..\HARDWARE\NES\6502mac.h
   Uses
      At line 30 in macro vcodeP
      at line 75 in file ..\HARDWARE\NES\6502.s
Comment: N used once
NMI_VECTOR 0000FFFA

Symbol: NMI_VECTOR
   Definitions
      At line 17 in file ..\HARDWARE\NES\6502.s
   Uses
      At line 1071 in file ..\HARDWARE\NES\6502.s
Comment: NMI_VECTOR used once
R 00000020

Symbol: R
   Definitions
      At line 7 in file ..\HARDWARE\NES\6502mac.h
   Uses
      At line 33 in macro vcodeP
      at line 75 in file ..\HARDWARE\NES\6502.s
Comment: R used once
RES_VECTOR 0000FFFC

Symbol: RES_VECTOR
   Definitions
      At line 16 in file ..\HARDWARE\NES\6502.s
   Uses
      At line 1146 in file ..\HARDWARE\NES\6502.s
Comment: RES_VECTOR used once
V 00000040

Symbol: V
   Definitions
      At line 8 in file ..\HARDWARE\NES\6502mac.h
   Uses
      At line 381 in macro LBIT
      at line 202 in file ..\HARDWARE\NES\6502.s
      At line 39 in macro zcodeP
      at line 220 in file ..\HARDWARE\NES\6502.s

Z 00000002




ARM Macro Assembler    Page 4 Alphabetic symbol ordering
Absolute symbols

Symbol: Z
   Definitions
      At line 3 in file ..\HARDWARE\NES\6502mac.h
   Uses
      At line 32 in macro vcodeP
      at line 75 in file ..\HARDWARE\NES\6502.s
      At line 42 in macro zcodeP
      at line 220 in file ..\HARDWARE\NES\6502.s

_ABS 00000004

Symbol: _ABS
   Definitions
      At line 224 in file ..\HARDWARE\NES\6502mac.h
   Uses
      At line 261 in macro 4IIX
      at line 85 in file ..\HARDWARE\NES\6502.s
      At line 108 in macro admem
      at line 455 in macro ^ORA
      at line 86 in file ..\HARDWARE\NES\6502.s
      At line 165 in macro itemem
      at line 374 in macro JASL
      at line 98 in file ..\HARDWARE\NES\6502.s
      At line 228 in macro ABS
      at line 122 in file ..\HARDWARE\NES\6502.s
      At line 278 in macro 6IIY
      at line 143 in file ..\HARDWARE\NES\6502.s
      At line 246 in macro 0AIY
      at line 166 in file ..\HARDWARE\NES\6502.s
      At line 236 in macro .AIX
      at line 172 in file ..\HARDWARE\NES\6502.s
      At line 426 in macro \LSR
      at line 329 in file ..\HARDWARE\NES\6502.s
      At line 124 in macro 
admems
      at line 420 in macro XLOAD
      at line 660 in file ..\HARDWARE\NES\6502.s

_IMM 00000001

Symbol: _IMM
   Definitions
      At line 221 in file ..\HARDWARE\NES\6502mac.h
   Uses
      At line 117 in macro admem
      at line 455 in macro ^ORA
      at line 86 in file ..\HARDWARE\NES\6502.s
      At line 256 in macro 2IMM
      at line 109 in file ..\HARDWARE\NES\6502.s
      At line 131 in macro 
admems
      at line 420 in macro XLOAD
      at line 660 in file ..\HARDWARE\NES\6502.s

_ZP 00000002

Symbol: _ZP
   Definitions
      At line 222 in file ..\HARDWARE\NES\6502mac.h



ARM Macro Assembler    Page 5 Alphabetic symbol ordering
Absolute symbols

   Uses
      At line 111 in macro admem
      at line 455 in macro ^ORA
      at line 86 in file ..\HARDWARE\NES\6502.s
      At line 308 in macro :Z
      at line 91 in file ..\HARDWARE\NES\6502.s
      At line 168 in macro itemem
      at line 374 in macro JASL
      at line 98 in file ..\HARDWARE\NES\6502.s
      At line 433 in macro \LSR
      at line 329 in file ..\HARDWARE\NES\6502.s
      At line 128 in macro 
admems
      at line 420 in macro XLOAD
      at line 660 in file ..\HARDWARE\NES\6502.s
      At line 320 in macro >ZIX
      at line 746 in file ..\HARDWARE\NES\6502.s
      At line 335 in macro BZIY
      at line 758 in file ..\HARDWARE\NES\6502.s

_ZPI 00000003

Symbol: _ZPI
   Definitions
      At line 223 in file ..\HARDWARE\NES\6502mac.h
   Uses
      At line 114 in macro admem
      at line 455 in macro ^ORA
      at line 86 in file ..\HARDWARE\NES\6502.s
      At line 171 in macro itemem
      at line 374 in macro JASL
      at line 98 in file ..\HARDWARE\NES\6502.s
      At line 328 in macro @ZIXf
      at line 149 in file ..\HARDWARE\NES\6502.s
      At line 439 in macro \LSR
      at line 329 in file ..\HARDWARE\NES\6502.s
      At line 343 in macro DZIYf
      at line 629 in file ..\HARDWARE\NES\6502.s

19 symbols



ARM Macro Assembler    Page 1 Alphabetic symbol ordering
Register relative symbols

cpuregs 00000460

Symbol: cpuregs
   Definitions
      At line 19 in file ..\HARDWARE\NES\equates.h
   Uses
      At line 1049 in file ..\HARDWARE\NES\6502.s
      At line 1055 in file ..\HARDWARE\NES\6502.s
      At line 1068 in file ..\HARDWARE\NES\6502.s
      At line 1076 in file ..\HARDWARE\NES\6502.s
      At line 1149 in file ..\HARDWARE\NES\6502.s

joy0serial 00000494

Symbol: joy0serial
   Definitions
      At line 28 in file ..\HARDWARE\NES\equates.h
   Uses
      At line 1368 in file ..\HARDWARE\NES\6502.s
      At line 1375 in file ..\HARDWARE\NES\6502.s
      At line 1377 in file ..\HARDWARE\NES\6502.s

lastbank 00000480

Symbol: lastbank
   Definitions
      At line 21 in file ..\HARDWARE\NES\equates.h
   Uses
      At line 70 in file ..\HARDWARE\NES\6502.s
      At line 185 in file ..\HARDWARE\NES\6502.s
      At line 22 in macro ÿÿcodePC
      at line 190 in file ..\HARDWARE\NES\6502.s
      At line 1100 in file ..\HARDWARE\NES\6502.s

m6502_s 0000047C

Symbol: m6502_s
   Definitions
      At line 20 in file ..\HARDWARE\NES\equates.h
   Uses
      At line 180 in macro sh16
      at line 73 in file ..\HARDWARE\NES\6502.s
      At line 184 in macro sh16
      at line 73 in file ..\HARDWARE\NES\6502.s
      At line 189 in macro sh8
      at line 104 in file ..\HARDWARE\NES\6502.s
      At line 191 in macro sh8
      at line 104 in file ..\HARDWARE\NES\6502.s
      At line 208 in macro p8
      at line 219 in file ..\HARDWARE\NES\6502.s
      At line 210 in macro p8
      at line 219 in file ..\HARDWARE\NES\6502.s
      At line 196 in macro p16
      at line 310 in file ..\HARDWARE\NES\6502.s
      At line 198 in macro p16
      at line 310 in file ..\HARDWARE\NES\6502.s
      At line 199 in macro p16
      at line 310 in file ..\HARDWARE\NES\6502.s
      At line 648 in file ..\HARDWARE\NES\6502.s



ARM Macro Assembler    Page 2 Alphabetic symbol ordering
Register relative symbols

      At line 775 in file ..\HARDWARE\NES\6502.s
      At line 1143 in file ..\HARDWARE\NES\6502.s

memmap_tbl 00000440

Symbol: memmap_tbl
   Definitions
      At line 18 in file ..\HARDWARE\NES\equates.h
   Uses
      At line 16 in macro ÿÿcodePC
      at line 190 in file ..\HARDWARE\NES\6502.s
      At line 470 in file ..\HARDWARE\NES\6502.s
      At line 1110 in file ..\HARDWARE\NES\6502.s
      At line 1196 in file ..\HARDWARE\NES\6502.s
      At line 1203 in file ..\HARDWARE\NES\6502.s
      At line 1210 in file ..\HARDWARE\NES\6502.s
      At line 1217 in file ..\HARDWARE\NES\6502.s
      At line 1224 in file ..\HARDWARE\NES\6502.s
      At line 1315 in file ..\HARDWARE\NES\6502.s

nexttimeout 00000484

Symbol: nexttimeout
   Definitions
      At line 22 in file ..\HARDWARE\NES\equates.h
   Uses
      At line 51 in macro ÿÿtch
      at line 80 in file ..\HARDWARE\NES\6502.s
      At line 59 in macro tch_c
      at line 99 in file ..\HARDWARE\NES\6502.s
      At line 1153 in file ..\HARDWARE\NES\6502.s

opz 00000000

Symbol: opz
   Definitions
      At line 15 in file ..\HARDWARE\NES\equates.h
   Uses
      None
Comment: opz unused
readmem_tbl 00000400

Symbol: readmem_tbl
   Definitions
      At line 16 in file ..\HARDWARE\NES\equates.h
   Uses
      At line 1141 in file ..\HARDWARE\NES\6502.s
Comment: readmem_tbl used once
rombase 00000488

Symbol: rombase
   Definitions
      At line 24 in file ..\HARDWARE\NES\equates.h
   Uses
      None
Comment: rombase unused
rommask 00000490

Symbol: rommask



ARM Macro Assembler    Page 3 Alphabetic symbol ordering
Register relative symbols

   Definitions
      At line 26 in file ..\HARDWARE\NES\equates.h
   Uses
      None
Comment: rommask unused
romnumber 0000048C

Symbol: romnumber
   Definitions
      At line 25 in file ..\HARDWARE\NES\equates.h
   Uses
      None
Comment: romnumber unused
writemem_tbl 00000420

Symbol: writemem_tbl
   Definitions
      At line 17 in file ..\HARDWARE\NES\equates.h
   Uses
      At line 140 in macro z¡

      at line 166 in macro itemem
      at line 374 in macro JASL
      at line 129 in file ..\HARDWARE\NES\6502.s
Comment: writemem_tbl used once
12 symbols



ARM Macro Assembler    Page 1 Alphabetic symbol ordering
External symbols

NES_RAM 00000000

Symbol: NES_RAM
   Definitions
      At line 5 in file ..\HARDWARE\NES\6502.s
   Uses
      At line 1036 in file ..\HARDWARE\NES\6502.s
      At line 1066 in file ..\HARDWARE\NES\6502.s
      At line 1142 in file ..\HARDWARE\NES\6502.s
      At line 1457 in file ..\HARDWARE\NES\6502.s
      At line 1458 in file ..\HARDWARE\NES\6502.s
      At line 1459 in file ..\HARDWARE\NES\6502.s
      At line 1460 in file ..\HARDWARE\NES\6502.s

PPU_RegRead 00000000

Symbol: PPU_RegRead
   Definitions
      At line 1396 in file ..\HARDWARE\NES\6502.s
   Uses
      At line 1413 in file ..\HARDWARE\NES\6502.s
Comment: PPU_RegRead used once
PPU_RegWrite 00000000

Symbol: PPU_RegWrite
   Definitions
      At line 1395 in file ..\HARDWARE\NES\6502.s
   Uses
      At line 1405 in file ..\HARDWARE\NES\6502.s
Comment: PPU_RegWrite used once
spr_ram 00000000

Symbol: spr_ram
   Definitions
      At line 8 in file ..\HARDWARE\NES\6502.s
   Uses
      At line 1320 in file ..\HARDWARE\NES\6502.s
Comment: spr_ram used once
4 symbols
645 symbols in table
